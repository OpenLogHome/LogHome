(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{500:function(t,r,e){"use strict";e.d(r,"a",(function(){return l}));var n=e(106);var c=e(152),o=e(77);function l(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||Object(c.a)(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},515:function(t,r,e){var content=e(564);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(26).default)("06bae06a",content,!0,{sourceMap:!1})},563:function(t,r,e){"use strict";e(515)},564:function(t,r,e){var n=e(25)(!1);n.push([t.i,"\r\n/* 变量定义 - 深棕色系 */\n[data-v-21909cc9]:root {\r\n  --primary-color: #947358;\r\n  --secondary-color: #704C35;\r\n  --text-color: #333;\r\n  --text-light: #666;\r\n  --text-lighter: #888;\r\n  --border-color: #eee;\r\n  --border-light: #f5f5f5;\r\n  --background-color: #fff;\r\n  --orange-color: #FB7D46;\r\n  --orange-dark: #fa6c2e;\n}\n.search-page[data-v-21909cc9] {\r\n  min-height: 100vh;\r\n  background: #f8f9fa;\n}\r\n\r\n/* 搜索头部 */\n.search-header[data-v-21909cc9] {\r\n  background: white;\r\n  border-bottom: 1px solid #e0e0e0;\r\n  padding: 20px 0;\r\n  position: sticky;\r\n  top: 60px;\r\n  z-index: 100;\n}\n.search-container[data-v-21909cc9] {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 0 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 15px;\n}\n.search-box[data-v-21909cc9] {\r\n  flex: 1;\r\n  max-width: 600px;\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  background: #f5f5f5;\r\n  border-radius: 25px;\r\n  padding: 0 20px;\r\n  transition: all 0.3s;\n}\n.search-box[data-v-21909cc9]:focus-within {\r\n  background: white;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  border: 1px solid #947358;\n}\n.search-icon[data-v-21909cc9] {\r\n  color: #999;\r\n  font-size: 18px;\r\n  margin-right: 10px;\n}\n.search-input[data-v-21909cc9] {\r\n  flex: 1;\r\n  border: none;\r\n  background: transparent;\r\n  outline: none;\r\n  padding: 12px 0;\r\n  font-size: 16px;\r\n  color: #333;\n}\n.search-input[data-v-21909cc9]::placeholder {\r\n  color: #999;\n}\n.search-clear[data-v-21909cc9] {\r\n  color: #999;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  margin-left: 10px;\r\n  transition: color 0.3s;\n}\n.search-clear[data-v-21909cc9]:hover {\r\n  color: #666;\n}\n.search-btn[data-v-21909cc9] {\r\n  background: #947358;\r\n  color: white;\r\n  border: none;\r\n  padding: 12px 24px;\r\n  border-radius: 20px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  transition: all 0.3s;\n}\n.search-btn[data-v-21909cc9]:hover:not(:disabled) {\r\n  background: #704C35;\n}\n.search-btn[data-v-21909cc9]:disabled {\r\n  background: #c0c4cc;\r\n  cursor: not-allowed;\n}\r\n\r\n/* 搜索内容区域 */\n.search-content[data-v-21909cc9] {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 30px 20px;\n}\r\n\r\n/* 搜索前状态 */\n.search-before[data-v-21909cc9] {\r\n  max-width: 800px;\r\n  margin: 0 auto;\n}\n.search-section[data-v-21909cc9] {\r\n  margin-bottom: 40px;\n}\n.section-header[data-v-21909cc9] {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\n}\n.section-title[data-v-21909cc9] {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin: 0;\n}\n.clear-btn[data-v-21909cc9] {\r\n  background: none;\r\n  border: none;\r\n  color: #999;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 14px;\r\n  transition: color 0.3s;\n}\n.clear-btn[data-v-21909cc9]:hover {\r\n  color: #666;\n}\n.tag-list[data-v-21909cc9] {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12px;\n}\n.tag-item[data-v-21909cc9] {\r\n  background: white;\r\n  color: #666;\r\n  padding: 8px 16px;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  border: 1px solid #e0e0e0;\r\n  transition: all 0.3s;\n}\n.tag-item[data-v-21909cc9]:hover {\r\n  background: #947358;\r\n  color: white;\r\n  border-color: #947358;\n}\n.hot-tag[data-v-21909cc9] {\r\n  background: linear-gradient(45deg, #704C35, #947358);\r\n  color: white;\r\n  border: none;\n}\n.hot-tag[data-v-21909cc9]:hover {\r\n  background: linear-gradient(45deg, #5D3C29, #A68B76);\r\n  transform: translateY(-2px);\n}\r\n\r\n/* 搜索后状态 */\n.search-stats[data-v-21909cc9] {\r\n  margin-bottom: 20px;\r\n  padding: 20px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n.search-keyword[data-v-21909cc9] {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #947358;\r\n  margin-right: 15px;\n}\n.search-count[data-v-21909cc9] {\r\n  color: #666;\r\n  font-size: 14px;\n}\r\n\r\n/* 搜索类型切换 */\n.search-tabs[data-v-21909cc9] {\r\n  display: flex;\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\r\n  margin-bottom: 30px;\r\n  overflow: hidden;\n}\n.tab-item[data-v-21909cc9] {\r\n  flex: 1;\r\n  padding: 15px 20px;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  border-bottom: 3px solid transparent;\r\n  transition: all 0.3s;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 5px;\n}\n.tab-item[data-v-21909cc9]:hover {\r\n  background: #f8f9fa;\n}\n.tab-item.active[data-v-21909cc9] {\r\n  color: #947358;\r\n  border-bottom-color: #947358;\r\n  background: #f5f2ef;\n}\n.tab-name[data-v-21909cc9] {\r\n  font-weight: 500;\n}\n.tab-count[data-v-21909cc9] {\r\n  font-size: 12px;\r\n  color: #999;\n}\n.tab-item.active .tab-count[data-v-21909cc9] {\r\n  color: #947358;\n}\r\n\r\n/* 结果容器 */\n.results-container[data-v-21909cc9] {\r\n  min-height: 400px;\n}\n.loading[data-v-21909cc9] {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 60px 20px;\r\n  color: #666;\r\n  font-size: 16px;\r\n  gap: 10px;\n}\n.loading i[data-v-21909cc9] {\r\n  font-size: 20px;\n}\r\n\r\n/* 全部结果 */\n.result-section[data-v-21909cc9] {\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\r\n  margin-bottom: 30px;\r\n  overflow: hidden;\n}\n.result-section .section-title[data-v-21909cc9] {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 20px;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  background: #f8f9fa;\n}\n.result-section .section-title h4[data-v-21909cc9] {\r\n  margin: 0;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #333;\n}\n.more-link[data-v-21909cc9] {\r\n  color: #947358;\r\n  text-decoration: none;\r\n  font-size: 14px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  transition: color 0.3s;\n}\n.more-link[data-v-21909cc9]:hover {\r\n  color: #704C35;\n}\r\n\r\n/* 书籍结果 */\n.book-grid[data-v-21909cc9] {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\r\n  gap: 20px;\r\n  padding: 20px;\n}\n.book-item[data-v-21909cc9] {\r\n  display: flex;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n  padding: 15px;\r\n  border-radius: 8px;\n}\n.book-item[data-v-21909cc9]:hover {\r\n  background: #f5f2ef;\r\n  transform: translateY(-2px);\n}\n.book-cover[data-v-21909cc9] {\r\n  width: 60px;\r\n  height: 84px;\r\n  border-radius: 6px;\r\n  object-fit: cover;\r\n  margin-right: 15px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.book-info[data-v-21909cc9] {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\n}\n.book-title[data-v-21909cc9] {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 8px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\n}\n.book-author[data-v-21909cc9] {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 8px;\n}\n.book-desc[data-v-21909cc9] {\r\n  font-size: 13px;\r\n  color: #999;\r\n  line-height: 1.4;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\n}\r\n\r\n/* 帖子结果 */\n.post-list[data-v-21909cc9] {\r\n  padding: 0;\n}\n.post-item[data-v-21909cc9] {\r\n  padding: 20px;\r\n  cursor: pointer;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  transition: background-color 0.3s;\n}\n.post-item[data-v-21909cc9]:last-child {\r\n  border-bottom: none;\n}\n.post-item[data-v-21909cc9]:hover {\r\n  background: #f5f2ef;\n}\n.post-header[data-v-21909cc9] {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 12px;\n}\n.post-header .user-avatar[data-v-21909cc9] {\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50%;\r\n  margin-right: 12px;\n}\n.post-meta[data-v-21909cc9] {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\n}\n.user-name[data-v-21909cc9] {\r\n  font-size: 14px;\r\n  color: #666;\r\n  font-weight: 500;\n}\n.post-time[data-v-21909cc9] {\r\n  font-size: 12px;\r\n  color: #999;\n}\n.post-content[data-v-21909cc9] {\r\n  margin-left: 44px;\n}\n.post-title[data-v-21909cc9] {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 8px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\n}\n.post-text[data-v-21909cc9] {\r\n  font-size: 14px;\r\n  color: #666;\r\n  line-height: 1.5;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\n}\r\n\r\n/* 圈子结果 */\n.circle-list[data-v-21909cc9] {\r\n  padding: 20px;\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n  gap: 20px;\n}\n.circle-item[data-v-21909cc9] {\r\n  display: flex;\r\n  cursor: pointer;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  transition: all 0.3s;\n}\n.circle-item[data-v-21909cc9]:hover {\r\n  background: #f5f2ef;\r\n  transform: translateY(-2px);\n}\n.circle-icon[data-v-21909cc9] {\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n  margin-right: 15px;\n}\n.circle-info[data-v-21909cc9] {\r\n  flex: 1;\n}\n.circle-name[data-v-21909cc9] {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 6px;\n}\n.circle-meta[data-v-21909cc9] {\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-bottom: 6px;\n}\n.circle-desc[data-v-21909cc9] {\r\n  font-size: 13px;\r\n  color: #999;\r\n  line-height: 1.4;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\n}\r\n\r\n/* 用户结果 */\n.user-list[data-v-21909cc9] {\r\n  padding: 20px;\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\r\n  gap: 20px;\n}\n.user-item[data-v-21909cc9] {\r\n  display: flex;\r\n  cursor: pointer;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  transition: all 0.3s;\n}\n.user-item[data-v-21909cc9]:hover {\r\n  background: #f5f2ef;\r\n  transform: translateY(-2px);\n}\n.user-item .user-avatar[data-v-21909cc9] {\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n  margin-right: 15px;\n}\n.user-info[data-v-21909cc9] {\r\n  flex: 1;\n}\n.user-name[data-v-21909cc9] {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 6px;\n}\n.user-motto[data-v-21909cc9] {\r\n  font-size: 13px;\r\n  color: #666;\r\n  line-height: 1.4;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 2;\r\n  -webkit-box-orient: vertical;\n}\r\n\r\n/* 加载更多 */\n.load-more[data-v-21909cc9] {\r\n  text-align: center;\r\n  padding: 30px 20px;\n}\n.load-more-btn[data-v-21909cc9] {\r\n  background: white;\r\n  color: #947358;\r\n  border: 1px solid #947358;\r\n  padding: 12px 30px;\r\n  border-radius: 20px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  transition: all 0.3s;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8px;\n}\n.load-more-btn[data-v-21909cc9]:hover:not(:disabled) {\r\n  background: #947358;\r\n  color: white;\n}\n.load-more-btn[data-v-21909cc9]:disabled {\r\n  background: #f5f5f5;\r\n  color: #c0c4cc;\r\n  border-color: #e0e0e0;\r\n  cursor: not-allowed;\n}\r\n\r\n/* 无结果 */\n.no-results[data-v-21909cc9] {\r\n  text-align: center;\r\n  padding: 80px 20px;\r\n  color: #999;\n}\n.no-results-icon[data-v-21909cc9] {\r\n  font-size: 64px;\r\n  margin-bottom: 20px;\r\n  opacity: 0.5;\n}\n.no-results-text h3[data-v-21909cc9] {\r\n  font-size: 18px;\r\n  margin: 0 0 10px 0;\r\n  color: #666;\n}\n.no-results-text p[data-v-21909cc9] {\r\n  font-size: 14px;\r\n  margin: 0;\r\n  color: #999;\n}\r\n\r\n/* 响应式设计 */\n@media (max-width: 768px) {\n.search-container[data-v-21909cc9] {\r\n    padding: 0 15px;\r\n    flex-direction: column;\r\n    gap: 15px;\n}\n.search-box[data-v-21909cc9] {\r\n    max-width: none;\n}\n.search-content[data-v-21909cc9] {\r\n    padding: 20px 15px;\n}\n.search-tabs[data-v-21909cc9] {\r\n    flex-direction: column;\n}\n.tab-item[data-v-21909cc9] {\r\n    border-bottom: 1px solid #f0f0f0;\r\n    border-right: none;\n}\n.book-grid[data-v-21909cc9] {\r\n    grid-template-columns: 1fr;\r\n    gap: 15px;\r\n    padding: 15px;\n}\n.circle-list[data-v-21909cc9],\r\n  .user-list[data-v-21909cc9] {\r\n    grid-template-columns: 1fr;\r\n    gap: 15px;\r\n    padding: 15px;\n}\n.post-content[data-v-21909cc9] {\r\n    margin-left: 0;\n}\n.tag-list[data-v-21909cc9] {\r\n    gap: 8px;\n}\n.tag-item[data-v-21909cc9] {\r\n    font-size: 13px;\r\n    padding: 6px 12px;\n}\n}\r\n",""]),t.exports=n},624:function(t,r,e){"use strict";e.r(r);e(28),e(27);var n=e(500),c=e(0),o=(e(6),e(105),e(33),e(10),e(34),e(18),{name:"SearchPage",head:function(){return{title:this.hasSearched?"".concat(this.currentKeyword," - 搜索结果"):"搜索 - LogHome",meta:[{hid:"description",name:"description",content:this.hasSearched?'搜索"'.concat(this.currentKeyword,'"的结果'):"LogHome搜索页面"}]}},data:function(){return{searchKeyword:"",currentKeyword:"",hasSearched:!1,searchType:"all",searchHistory:[],hotSearches:[],searchResults:{circles:{list:[],total:0},posts:{list:[],total:0},users:{list:[],total:0},books:{list:[],total:0}},isSearching:!1,isLoadingMore:!1,searchTimer:null,currentPage:{circles:1,posts:1,users:1,books:1}}},computed:{totalResults:function(){var t=this.searchResults,r=t.circles,e=t.posts,n=t.users,c=t.books;return(r.total||0)+(e.total||0)+(n.total||0)+(c.total||0)},noResults:function(){return!!this.hasSearched&&0===this.totalResults},canLoadMore:function(){if("all"===this.searchType)return!1;var t=this.searchResults[this.searchType];return t.list.length<t.total}},mounted:function(){var t=this;this.loadSearchHistory(),this.getHotSearches();var r=this.$route.query,e=r.keyword,n=r.type;e&&(this.searchKeyword=e,this.currentKeyword=e,this.searchType=n||"all",this.search()),this.$nextTick((function(){t.$refs.searchInput&&t.$refs.searchInput.focus()}))},watch:{"$route.query":{handler:function(t){var r=t.keyword,e=t.type;r&&r!==this.currentKeyword&&(this.searchKeyword=r,this.currentKeyword=r,this.searchType=e||"all",this.search())},deep:!0}},methods:{onSearchInput:function(){this.searchTimer&&clearTimeout(this.searchTimer)},clearSearch:function(){this.searchKeyword="",this.hasSearched=!1,this.currentKeyword="",this.$router.push("/search")},handleSearch:function(){this.searchKeyword.trim()&&(this.currentKeyword=this.searchKeyword.trim(),this.search(),this.saveSearchHistory(this.currentKeyword),this.$router.push({path:"/search",query:{keyword:this.currentKeyword,type:this.searchType}}))},searchWithKeyword:function(t){this.searchKeyword=t,this.currentKeyword=t,this.search(),this.saveSearchHistory(t),this.$router.push({path:"/search",query:{keyword:t,type:this.searchType}})},switchSearchType:function(t){this.searchType=t,this.hasSearched&&(this.resetPagination(),this.search(),this.$router.push({path:"/search",query:{keyword:this.currentKeyword,type:t}}))},resetPagination:function(){this.currentPage={circles:1,posts:1,users:1,books:1}},search:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.isSearching&&t.currentKeyword.trim()){r.next=2;break}return r.abrupt("return");case 2:if(t.isSearching=!0,t.hasSearched=!0,r.prev=4,"all"!==t.searchType){r.next=10;break}return r.next=8,Promise.all([t.searchBooks(),t.searchPosts(),t.searchCircles(),t.searchUsers()]);case 8:r.next=25;break;case 10:r.t0=t.searchType,r.next="books"===r.t0?13:"posts"===r.t0?16:"circles"===r.t0?19:"users"===r.t0?22:25;break;case 13:return r.next=15,t.searchBooks();case 15:return r.abrupt("break",25);case 16:return r.next=18,t.searchPosts();case 18:return r.abrupt("break",25);case 19:return r.next=21,t.searchCircles();case 21:return r.abrupt("break",25);case 22:return r.next=24,t.searchUsers();case 24:return r.abrupt("break",25);case 25:r.next=31;break;case 27:r.prev=27,r.t1=r.catch(4),console.error("搜索失败:",r.t1),t.$message.error("搜索失败，请稍后重试");case 31:return r.prev=31,t.isSearching=!1,r.finish(31);case 34:case"end":return r.stop()}}),r,null,[[4,27,31,34]])})))()},loadMore:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.isLoadingMore&&t.canLoadMore){r.next=2;break}return r.abrupt("return");case 2:t.isLoadingMore=!0,t.currentPage[t.searchType]++,r.prev=4,r.t0=t.searchType,r.next="books"===r.t0?8:"posts"===r.t0?11:"circles"===r.t0?14:"users"===r.t0?17:20;break;case 8:return r.next=10,t.searchBooks(!0);case 10:return r.abrupt("break",20);case 11:return r.next=13,t.searchPosts(!0);case 13:return r.abrupt("break",20);case 14:return r.next=16,t.searchCircles(!0);case 16:return r.abrupt("break",20);case 17:return r.next=19,t.searchUsers(!0);case 19:return r.abrupt("break",20);case 20:r.next=27;break;case 22:r.prev=22,r.t1=r.catch(4),console.error("加载更多失败:",r.t1),t.$message.error("加载失败，请稍后重试"),t.currentPage[t.searchType]--;case 27:return r.prev=27,t.isLoadingMore=!1,r.finish(27);case 30:case"end":return r.stop()}}),r,null,[[4,22,27,30]])})))()},searchBooks:function(){var t=arguments,r=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var c,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.length>0&&void 0!==t[0]&&t[0],e.prev=1,e.next=4,r.$api.search.searchNovels({keyword:r.currentKeyword,page:r.currentPage.books,limit:"all"===r.searchType?6:12});case 4:o=e.sent,c?(l=r.searchResults.books.list).push.apply(l,Object(n.a)(o.list)):r.searchResults.books=o,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("搜索书籍失败:",e.t0),r.searchResults.books={list:[],total:0};case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},searchPosts:function(){var t=arguments,r=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var c,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.length>0&&void 0!==t[0]&&t[0],e.prev=1,e.next=4,r.$api.search.searchPosts({keyword:r.currentKeyword,page:r.currentPage.posts,limit:"all"===r.searchType?5:10});case 4:o=e.sent,c?(l=r.searchResults.posts.list).push.apply(l,Object(n.a)(o.list)):r.searchResults.posts=o,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("搜索帖子失败:",e.t0),r.searchResults.posts={list:[],total:0};case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},searchCircles:function(){var t=arguments,r=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var c,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.length>0&&void 0!==t[0]&&t[0],e.prev=1,e.next=4,r.$api.search.searchCircles({keyword:r.currentKeyword,page:r.currentPage.circles,limit:"all"===r.searchType?4:8});case 4:o=e.sent,c?(l=r.searchResults.circles.list).push.apply(l,Object(n.a)(o.list)):r.searchResults.circles=o,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("搜索圈子失败:",e.t0),r.searchResults.circles={list:[],total:0};case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},searchUsers:function(){var t=arguments,r=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var c,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.length>0&&void 0!==t[0]&&t[0],e.prev=1,e.next=4,r.$api.search.searchUsers({keyword:r.currentKeyword,page:r.currentPage.users,limit:"all"===r.searchType?6:12});case 4:o=e.sent,c?(l=r.searchResults.users.list).push.apply(l,Object(n.a)(o.list)):r.searchResults.users=o,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("搜索用户失败:",e.t0),r.searchResults.users={list:[],total:0};case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},saveSearchHistory:function(t){if(t&&""!==t.trim()){var r=JSON.parse(localStorage.getItem("searchHistory")||"[]");(r=r.filter((function(r){return r!==t}))).unshift(t),r=r.slice(0,10),localStorage.setItem("searchHistory",JSON.stringify(r)),this.searchHistory=r}},loadSearchHistory:function(){this.searchHistory=JSON.parse(localStorage.getItem("searchHistory")||"[]")},clearSearchHistory:function(){localStorage.removeItem("searchHistory"),this.searchHistory=[],this.$message.success("搜索历史已清空")},getHotSearches:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$api.search.getHotSearches();case 3:t.hotSearches=r.sent,r.next=10;break;case 6:r.prev=6,r.t0=r.catch(0),console.error("获取热门搜索失败:",r.t0),t.hotSearches=[{keyword:"修仙"},{keyword:"都市"},{keyword:"玄幻"},{keyword:"言情"},{keyword:"历史"},{keyword:"科幻"},{keyword:"悬疑"},{keyword:"武侠"}];case 10:case"end":return r.stop()}}),r,null,[[0,6]])})))()},formatTime:function(t){if(!t)return"";var r=new Date(t),e=new Date-r;return e<6e4?"刚刚":e<36e5?Math.floor(e/6e4)+"分钟前":e<864e5?Math.floor(e/36e5)+"小时前":Math.floor(e/864e5)+"天前"},navigateToBook:function(t,r){"world"===r?this.$router.push("/world/".concat(t)):this.$router.push("/novel/".concat(t))},navigateToPost:function(t){this.$router.push("/community/post/".concat(t))},navigateToCircle:function(t){this.$router.push("/community/circle/".concat(t))},navigateToUser:function(t){this.$router.push("/users/".concat(t))}}}),l=o,d=(e(563),e(12)),component=Object(d.a)(l,(function(){var t=this,r=t._self._c;return r("div",{staticClass:"search-page"},[r("div",{staticClass:"search-header"},[r("div",{staticClass:"search-container"},[r("div",{staticClass:"search-box"},[r("i",{staticClass:"el-icon-search search-icon"}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKeyword,expression:"searchKeyword"}],ref:"searchInput",staticClass:"search-input",attrs:{type:"text",placeholder:"搜索小说、作者、帖子、用户..."},domProps:{value:t.searchKeyword},on:{input:[function(r){r.target.composing||(t.searchKeyword=r.target.value)},t.onSearchInput],keyup:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.handleSearch.apply(null,arguments)}}}),t._v(" "),t.searchKeyword?r("i",{staticClass:"el-icon-close search-clear",on:{click:t.clearSearch}}):t._e()]),t._v(" "),r("button",{staticClass:"search-btn",attrs:{disabled:!t.searchKeyword.trim()},on:{click:t.handleSearch}},[t._v("\n        搜索\n      ")])])]),t._v(" "),r("div",{staticClass:"search-content"},[t.hasSearched?t._e():r("div",{staticClass:"search-before"},[t.searchHistory.length>0?r("div",{staticClass:"search-section"},[r("div",{staticClass:"section-header"},[r("h3",{staticClass:"section-title"},[t._v("搜索历史")]),t._v(" "),r("button",{staticClass:"clear-btn",on:{click:t.clearSearchHistory}},[r("i",{staticClass:"el-icon-delete"}),t._v("\n            清空\n          ")])]),t._v(" "),r("div",{staticClass:"tag-list"},t._l(t.searchHistory,(function(e,n){return r("span",{key:"history-"+n,staticClass:"tag-item",on:{click:function(r){return t.searchWithKeyword(e)}}},[t._v("\n            "+t._s(e)+"\n          ")])})),0)]):t._e(),t._v(" "),r("div",{staticClass:"search-section"},[t._m(0),t._v(" "),r("div",{staticClass:"tag-list"},t._l(t.hotSearches,(function(e,n){return r("span",{key:"hot-"+n,staticClass:"tag-item hot-tag",on:{click:function(r){return t.searchWithKeyword(e.keyword)}}},[t._v("\n            "+t._s(e.keyword)+"\n          ")])})),0)])]),t._v(" "),t.hasSearched?r("div",{staticClass:"search-after"},[r("div",{staticClass:"search-stats"},[r("span",{staticClass:"search-keyword"},[t._v('"'+t._s(t.currentKeyword)+'"')]),t._v(" "),r("span",{staticClass:"search-count"},[t._v("找到 "+t._s(t.totalResults)+" 个结果")])]),t._v(" "),r("div",{staticClass:"search-tabs"},[r("div",{staticClass:"tab-item",class:{active:"all"===t.searchType},on:{click:function(r){return t.switchSearchType("all")}}},[r("span",{staticClass:"tab-name"},[t._v("全部")]),t._v(" "),t.totalResults>0?r("span",{staticClass:"tab-count"},[t._v("("+t._s(t.totalResults)+")")]):t._e()]),t._v(" "),r("div",{staticClass:"tab-item",class:{active:"books"===t.searchType},on:{click:function(r){return t.switchSearchType("books")}}},[r("span",{staticClass:"tab-name"},[t._v("书籍")]),t._v(" "),t.searchResults.books.total>0?r("span",{staticClass:"tab-count"},[t._v("("+t._s(t.searchResults.books.total)+")")]):t._e()]),t._v(" "),r("div",{staticClass:"tab-item",class:{active:"posts"===t.searchType},on:{click:function(r){return t.switchSearchType("posts")}}},[r("span",{staticClass:"tab-name"},[t._v("帖子")]),t._v(" "),t.searchResults.posts.total>0?r("span",{staticClass:"tab-count"},[t._v("("+t._s(t.searchResults.posts.total)+")")]):t._e()]),t._v(" "),r("div",{staticClass:"tab-item",class:{active:"circles"===t.searchType},on:{click:function(r){return t.switchSearchType("circles")}}},[r("span",{staticClass:"tab-name"},[t._v("圈子")]),t._v(" "),t.searchResults.circles.total>0?r("span",{staticClass:"tab-count"},[t._v("("+t._s(t.searchResults.circles.total)+")")]):t._e()]),t._v(" "),r("div",{staticClass:"tab-item",class:{active:"users"===t.searchType},on:{click:function(r){return t.switchSearchType("users")}}},[r("span",{staticClass:"tab-name"},[t._v("用户")]),t._v(" "),t.searchResults.users.total>0?r("span",{staticClass:"tab-count"},[t._v("("+t._s(t.searchResults.users.total)+")")]):t._e()])]),t._v(" "),r("div",{staticClass:"results-container"},[t.isSearching?r("div",{staticClass:"loading"},[r("i",{staticClass:"el-icon-loading"}),t._v(" "),r("span",[t._v("搜索中...")])]):r("div",{staticClass:"results-content"},["all"===t.searchType?r("div",{staticClass:"all-results"},[t.searchResults.books.list.length>0?r("div",{staticClass:"result-section"},[r("div",{staticClass:"section-title"},[r("h4",[t._v("书籍")]),t._v(" "),r("nuxt-link",{staticClass:"more-link",attrs:{to:"/search?type=books&keyword=".concat(t.currentKeyword)}},[t._v("\n                  查看更多 "),r("i",{staticClass:"el-icon-arrow-right"})])],1),t._v(" "),r("div",{staticClass:"book-grid"},t._l(t.searchResults.books.list.slice(0,6),(function(e,n){return r("div",{key:"book-"+n,staticClass:"book-item",on:{click:function(r){return t.navigateToBook(e.novel_id)}}},[r("img",{staticClass:"book-cover",attrs:{src:e.picUrl+"?thumbnail=1",alt:e.name}}),t._v(" "),r("div",{staticClass:"book-info"},[r("div",{staticClass:"book-title"},[t._v(t._s(e.name))]),t._v(" "),r("div",{staticClass:"book-author"},[t._v(t._s(e.author_name))]),t._v(" "),r("div",{staticClass:"book-desc"},[t._v(t._s(e.content))])])])})),0)]):t._e(),t._v(" "),t.searchResults.posts.list.length>0?r("div",{staticClass:"result-section"},[r("div",{staticClass:"section-title"},[r("h4",[t._v("帖子")]),t._v(" "),r("nuxt-link",{staticClass:"more-link",attrs:{to:"/search?type=posts&keyword=".concat(t.currentKeyword)}},[t._v("\n                  查看更多 "),r("i",{staticClass:"el-icon-arrow-right"})])],1),t._v(" "),r("div",{staticClass:"post-list"},t._l(t.searchResults.posts.list.slice(0,5),(function(e,n){return r("div",{key:"post-"+n,staticClass:"post-item",on:{click:function(r){return t.navigateToPost(e.post_id)}}},[r("div",{staticClass:"post-header"},[r("img",{staticClass:"user-avatar",attrs:{src:e.author_avatar||"/default-avatar.png",alt:e.author_name}}),t._v(" "),r("div",{staticClass:"post-meta"},[r("span",{staticClass:"user-name"},[t._v(t._s(e.author_name||"匿名用户"))]),t._v(" "),r("span",{staticClass:"post-time"},[t._v(t._s(t.formatTime(e.create_time)))])])]),t._v(" "),r("div",{staticClass:"post-content"},[r("div",{staticClass:"post-title"},[t._v(t._s(e.title))]),t._v(" "),r("div",{staticClass:"post-text"},[t._v(t._s(e.content))])])])})),0)]):t._e(),t._v(" "),t.searchResults.circles.list.length>0?r("div",{staticClass:"result-section"},[r("div",{staticClass:"section-title"},[r("h4",[t._v("圈子")]),t._v(" "),r("nuxt-link",{staticClass:"more-link",attrs:{to:"/search?type=circles&keyword=".concat(t.currentKeyword)}},[t._v("\n                  查看更多 "),r("i",{staticClass:"el-icon-arrow-right"})])],1),t._v(" "),r("div",{staticClass:"circle-list"},t._l(t.searchResults.circles.list.slice(0,4),(function(circle,e){return r("div",{key:"circle-"+e,staticClass:"circle-item",on:{click:function(r){return t.navigateToCircle(circle.circle_id)}}},[r("img",{staticClass:"circle-icon",attrs:{src:circle.icon||"/default-circle.png",alt:circle.name}}),t._v(" "),r("div",{staticClass:"circle-info"},[r("div",{staticClass:"circle-name"},[t._v(t._s(circle.name))]),t._v(" "),r("div",{staticClass:"circle-meta"},[t._v(t._s(circle.member_count||0)+"人 · "+t._s(circle.category_name||"未分类"))]),t._v(" "),r("div",{staticClass:"circle-desc"},[t._v(t._s(circle.description||"暂无描述"))])])])})),0)]):t._e(),t._v(" "),t.searchResults.users.list.length>0?r("div",{staticClass:"result-section"},[r("div",{staticClass:"section-title"},[r("h4",[t._v("用户")]),t._v(" "),r("nuxt-link",{staticClass:"more-link",attrs:{to:"/search?type=users&keyword=".concat(t.currentKeyword)}},[t._v("\n                  查看更多 "),r("i",{staticClass:"el-icon-arrow-right"})])],1),t._v(" "),r("div",{staticClass:"user-list"},t._l(t.searchResults.users.list.slice(0,6),(function(e,n){return r("div",{key:"user-"+n,staticClass:"user-item",on:{click:function(r){return t.navigateToUser(e.user_id)}}},[r("img",{staticClass:"user-avatar",attrs:{src:e.avatar_url||"/default-avatar.png",alt:e.name}}),t._v(" "),r("div",{staticClass:"user-info"},[r("div",{staticClass:"user-name"},[t._v(t._s(e.name||"匿名用户"))]),t._v(" "),r("div",{staticClass:"user-motto"},[t._v(t._s(e.motto||"这个人很懒，还没有设置个性签名"))])])])})),0)]):t._e()]):r("div",{staticClass:"single-results"},["books"===t.searchType?r("div",{staticClass:"book-results"},[r("div",{staticClass:"book-grid"},t._l(t.searchResults.books.list,(function(e,n){return r("div",{key:"book-"+n,staticClass:"book-item",on:{click:function(r){return t.navigateToBook(e.novel_id)}}},[r("img",{staticClass:"book-cover",attrs:{src:e.picUrl+"?thumbnail=1",alt:e.name}}),t._v(" "),r("div",{staticClass:"book-info"},[r("div",{staticClass:"book-title"},[t._v(t._s(e.name))]),t._v(" "),r("div",{staticClass:"book-author"},[t._v(t._s(e.author_name))]),t._v(" "),r("div",{staticClass:"book-desc"},[t._v(t._s(e.content))])])])})),0)]):t._e(),t._v(" "),"posts"===t.searchType?r("div",{staticClass:"post-results"},[r("div",{staticClass:"post-list"},t._l(t.searchResults.posts.list,(function(e,n){return r("div",{key:"post-"+n,staticClass:"post-item",on:{click:function(r){return t.navigateToPost(e.post_id)}}},[r("div",{staticClass:"post-header"},[r("img",{staticClass:"user-avatar",attrs:{src:e.author_avatar||"/default-avatar.png",alt:e.author_name}}),t._v(" "),r("div",{staticClass:"post-meta"},[r("span",{staticClass:"user-name"},[t._v(t._s(e.author_name||"匿名用户"))]),t._v(" "),r("span",{staticClass:"post-time"},[t._v(t._s(t.formatTime(e.create_time)))])])]),t._v(" "),r("div",{staticClass:"post-content"},[r("div",{staticClass:"post-title"},[t._v(t._s(e.title))]),t._v(" "),r("div",{staticClass:"post-text"},[t._v(t._s(e.content))])])])})),0)]):t._e(),t._v(" "),"circles"===t.searchType?r("div",{staticClass:"circle-results"},[r("div",{staticClass:"circle-list"},t._l(t.searchResults.circles.list,(function(circle,e){return r("div",{key:"circle-"+e,staticClass:"circle-item",on:{click:function(r){return t.navigateToCircle(circle.circle_id)}}},[r("img",{staticClass:"circle-icon",attrs:{src:circle.icon||"/default-circle.png",alt:circle.name}}),t._v(" "),r("div",{staticClass:"circle-info"},[r("div",{staticClass:"circle-name"},[t._v(t._s(circle.name))]),t._v(" "),r("div",{staticClass:"circle-meta"},[t._v(t._s(circle.member_count||0)+"人 · "+t._s(circle.category_name||"未分类"))]),t._v(" "),r("div",{staticClass:"circle-desc"},[t._v(t._s(circle.description||"暂无描述"))])])])})),0)]):t._e(),t._v(" "),"users"===t.searchType?r("div",{staticClass:"user-results"},[r("div",{staticClass:"user-list"},t._l(t.searchResults.users.list,(function(e,n){return r("div",{key:"user-"+n,staticClass:"user-item",on:{click:function(r){return t.navigateToUser(e.user_id)}}},[r("img",{staticClass:"user-avatar",attrs:{src:e.avatar_url||"/default-avatar.png",alt:e.name}}),t._v(" "),r("div",{staticClass:"user-info"},[r("div",{staticClass:"user-name"},[t._v(t._s(e.name||"匿名用户"))]),t._v(" "),r("div",{staticClass:"user-motto"},[t._v(t._s(e.motto||"这个人很懒，还没有设置个性签名"))])])])})),0)]):t._e()]),t._v(" "),t.canLoadMore&&"all"!==t.searchType?r("div",{staticClass:"load-more"},[r("button",{staticClass:"load-more-btn",attrs:{disabled:t.isLoadingMore},on:{click:t.loadMore}},[t.isLoadingMore?r("i",{staticClass:"el-icon-loading"}):t._e(),t._v("\n              "+t._s(t.isLoadingMore?"加载中...":"加载更多")+"\n            ")])]):t._e(),t._v(" "),t.noResults?r("div",{staticClass:"no-results"},[t._m(1),t._v(" "),t._m(2)]):t._e()])])]):t._e()])])}),[function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("h3",{staticClass:"section-title"},[this._v("热门搜索")])])},function(){var t=this._self._c;return t("div",{staticClass:"no-results-icon"},[t("i",{staticClass:"el-icon-search"})])},function(){var t=this,r=t._self._c;return r("div",{staticClass:"no-results-text"},[r("h3",[t._v("没有找到相关内容")]),t._v(" "),r("p",[t._v("试试其他关键词或检查拼写")])])}],!1,null,"21909cc9",null);r.default=component.exports}}]);