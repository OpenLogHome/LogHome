(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{532:function(t,e,n){var content=n(593);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(26).default)("54cd6995",content,!0,{sourceMap:!1})},592:function(t,e,n){"use strict";n(532)},593:function(t,e,n){var r=n(25)(!1);r.push([t.i,".settings-page[data-v-43268a78]{width:100%;max-width:800px;margin:0 auto;padding:20px}.settings-page .page-header[data-v-43268a78]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.settings-page .page-header .page-title[data-v-43268a78]{font-size:28px;color:#704c35;margin:0}.settings-page .page-header .back-link[data-v-43268a78]{color:#947358;text-decoration:none;font-size:16px}.settings-page .page-header .back-link[data-v-43268a78]:hover{text-decoration:underline}.settings-page .settings-container[data-v-43268a78]{display:flex;flex-direction:column;gap:20px}.settings-page .settings-card[data-v-43268a78]{background-color:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.settings-page .settings-card.danger-zone[data-v-43268a78]{border-left:4px solid #f56c6c}.settings-page .settings-section-title[data-v-43268a78]{font-size:18px;color:#704c35;margin:0 0 20px 0;padding-bottom:10px;border-bottom:1px solid #eee}.settings-page .settings-item[data-v-43268a78]{display:flex;align-items:center;padding:15px 0;border-bottom:1px solid #f5f5f5;cursor:pointer;transition:background-color .3s}.settings-page .settings-item[data-v-43268a78]:last-child{border-bottom:none}.settings-page .settings-item[data-v-43268a78]:hover{background-color:#f5f5f5}.settings-page .settings-item.delete-item .settings-label[data-v-43268a78]{color:#f56c6c}.settings-page .settings-label[data-v-43268a78]{flex:1;font-size:16px;color:#333}.settings-page .settings-value[data-v-43268a78]{flex:2;font-size:16px;color:#666;text-align:right;padding-right:10px;overflow:hidden;text-overflow:ellipsis}.settings-page .settings-arrow[data-v-43268a78]{font-size:20px;color:#888;margin-left:10px}.settings-page .tags-container[data-v-43268a78]{display:flex;flex-wrap:wrap;justify-content:flex-end;gap:5px}.settings-page .tags-container .tag-item[data-v-43268a78]{background-color:#f0f0f0;color:#666;padding:2px 8px;border-radius:4px;font-size:14px}.settings-page .tags-container .tag-item.activity-tag[data-v-43268a78]{background-color:rgba(251,125,70,.2);color:#fb7d46}.settings-page .loading-state[data-v-43268a78]{background-color:#fff;border-radius:8px;padding:40px;text-align:center;box-shadow:0 2px 4px rgba(0,0,0,.1)}.settings-page .loading-state .loading-spinner[data-v-43268a78]{width:50px;height:50px;border:5px solid #f5f5f5;border-top:5px solid #947358;border-radius:50%;margin:0 auto 20px;animation:spin-43268a78 1s linear infinite}.settings-page .loading-state .loading-text[data-v-43268a78]{color:#666}@keyframes spin-43268a78{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.settings-page .error-state[data-v-43268a78]{background-color:#fff;border-radius:8px;padding:40px;text-align:center;box-shadow:0 2px 4px rgba(0,0,0,.1)}.settings-page .error-state .error-icon[data-v-43268a78]{font-size:50px;margin-bottom:20px;color:#e74c3c}.settings-page .error-state .error-title[data-v-43268a78]{font-size:20px;color:#333;margin-bottom:10px}.settings-page .error-state .error-desc[data-v-43268a78]{color:#666;margin-bottom:25px}.settings-page .error-state .error-button[data-v-43268a78]{background-color:#947358;color:#fff;border:none;border-radius:4px;padding:10px 30px;font-weight:600;cursor:pointer;transition:background-color .3s ease}.settings-page .error-state .error-button[data-v-43268a78]:hover{background-color:#704c35}.settings-page .status-options[data-v-43268a78]{display:flex;flex-direction:column;gap:10px}.settings-page .status-options .status-option[data-v-43268a78]{padding:12px 20px;background-color:#f5f5f5;border-radius:4px;cursor:pointer;transition:background-color .3s}.settings-page .status-options .status-option[data-v-43268a78]:hover{background-color:hsl(0,0%,91.0784313725%)}.settings-page .delete-confirm-content[data-v-43268a78]{text-align:center}.settings-page .delete-confirm-content .delete-warning[data-v-43268a78]{color:#f56c6c;font-weight:bold;margin-top:10px}@media(max-width: 768px){.settings-page[data-v-43268a78]{padding:10px}.settings-page .page-header .page-title[data-v-43268a78]{font-size:24px}.settings-page .settings-label[data-v-43268a78],.settings-page .settings-value[data-v-43268a78]{font-size:14px}}",""]),t.exports=r},634:function(t,e,n){"use strict";n.r(e);var r=n(0),o=(n(6),{head:function(){return{title:"作品设置 - 原木社区"}},data:function(){return{novel:null,tags:[],loading:!0,error:null,dialogVisible:!1,dialogTitle:"",dialogType:"",dialogOptions:[],deleteDialogVisible:!1}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchNovelData();case 2:case"end":return e.stop()}}),e)})))()},methods:{fetchNovelData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.error=null,e.prev=2,n=t.$route.params.id,e.next=6,t.$api.essays.getNovelById(n);case 6:if(!((r=e.sent)&&r.length>0)){e.next=13;break}return t.novel=r[0],e.next=11,t.fetchNovelTags();case 11:e.next=14;break;case 13:t.error="未找到作品信息";case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),console.error("获取作品信息失败:",e.t0),t.error="获取作品信息失败，请稍后重试";case 20:return e.prev=20,t.loading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[2,16,20,23]])})))()},fetchNovelTags:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.$route.params.id,e.next=4,t.$api.library.getNovelTags(n);case 4:(r=e.sent)&&Array.isArray(r)&&(t.tags=r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("获取作品标签失败:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},showStatusDialog:function(t){this.dialogType=t,"personal"===t?(this.dialogTitle="设置作品状态",this.dialogOptions=[{label:"公开",value:0},{label:"私密",value:1}]):"update"===t&&(this.dialogTitle="设置更新状态",this.dialogOptions=[{label:"连载",value:0},{label:"完结",value:1}]),this.dialogVisible=!0},handleDialogClose:function(){this.dialogVisible=!1},selectStatus:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r=e.$route.params.id,"personal"!==e.dialogType){n.next=8;break}return n.next=5,e.$api.essays.setNovelStatus({is_personal:t,novel_id:r});case 5:e.$message.success("作品状态修改成功"),n.next=12;break;case 8:if("update"!==e.dialogType){n.next=12;break}return n.next=11,e.$api.essays.setNovelUpdateStatus({is_complete:t,novel_id:r});case 11:e.$message.success("更新状态修改成功");case 12:return n.next=14,e.fetchNovelData();case 14:n.next=20;break;case 16:n.prev=16,n.t0=n.catch(0),console.error("修改状态失败:",n.t0),e.$message.error("修改状态失败，请稍后重试");case 20:return n.prev=20,e.dialogVisible=!1,n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[0,16,20,23]])})))()},goToInfoEdit:function(){this.$router.push("/write/settings/info/".concat(this.$route.params.id))},goToTagsEdit:function(){this.$router.push("/write/settings/tags/".concat(this.$route.params.id))},confirmDelete:function(){this.deleteDialogVisible=!0},deleteNovel:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.$route.params.id,e.next=4,t.$api.essays.deleteNovel({id:n});case 4:t.$message.success("作品已删除"),t.$router.push("/write"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("删除作品失败:",e.t0),t.$message.error("删除作品失败，请稍后重试");case 12:return e.prev=12,t.deleteDialogVisible=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})))()}}}),l=(n(592),n(12)),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"settings-page"},[e("div",{staticClass:"page-header"},[e("h1",{staticClass:"page-title"},[t._v("作品设置")]),t._v(" "),e("nuxt-link",{staticClass:"back-link",attrs:{to:"/write"}},[t._v("返回创作中心")])],1),t._v(" "),t.novel?e("div",{staticClass:"settings-container"},[e("div",{staticClass:"settings-card"},[e("h2",{staticClass:"settings-section-title"},[t._v("基本设置")]),t._v(" "),e("div",{staticClass:"settings-item",on:{click:function(e){return t.showStatusDialog("personal")}}},[e("div",{staticClass:"settings-label"},[t._v("作品状态")]),t._v(" "),e("div",{staticClass:"settings-value"},[t._v(t._s(0==t.novel.is_personal?"公开":"私密"))]),t._v(" "),e("div",{staticClass:"settings-arrow"},[t._v("›")])]),t._v(" "),e("div",{staticClass:"settings-item",on:{click:function(e){return t.showStatusDialog("update")}}},[e("div",{staticClass:"settings-label"},[t._v("更新状态")]),t._v(" "),e("div",{staticClass:"settings-value"},[t._v(t._s(0==t.novel.is_complete?"连载":"完结"))]),t._v(" "),e("div",{staticClass:"settings-arrow"},[t._v("›")])]),t._v(" "),e("div",{staticClass:"settings-item",on:{click:t.goToTagsEdit}},[e("div",{staticClass:"settings-label"},[t._v("作品标签")]),t._v(" "),e("div",{staticClass:"settings-value tags-container"},[0===t.tags.length?e("span",[t._v("无")]):t._e(),t._v(" "),t._l(t.tags,(function(n){return e("span",{key:n.tag_id,staticClass:"tag-item",class:{"activity-tag":n.is_activity_tag}},[t._v("\n            "+t._s(n.tag_name)+"\n          ")])}))],2),t._v(" "),e("div",{staticClass:"settings-arrow"},[t._v("›")])]),t._v(" "),e("div",{staticClass:"settings-item",on:{click:t.goToInfoEdit}},[e("div",{staticClass:"settings-label"},[t._v("修改作品信息")]),t._v(" "),e("div",{staticClass:"settings-arrow"},[t._v("›")])])]),t._v(" "),e("div",{staticClass:"settings-card danger-zone"},[e("h2",{staticClass:"settings-section-title"},[t._v("危险操作")]),t._v(" "),e("div",{staticClass:"settings-item delete-item",on:{click:t.confirmDelete}},[e("div",{staticClass:"settings-label"},[t._v("删除作品")]),t._v(" "),e("div",{staticClass:"settings-arrow"},[t._v("›")])])])]):t._e(),t._v(" "),t.loading?e("div",{staticClass:"loading-state"},[e("div",{staticClass:"loading-spinner"}),t._v(" "),e("p",{staticClass:"loading-text"},[t._v("正在加载作品信息...")])]):t.error?e("div",{staticClass:"error-state"},[e("div",{staticClass:"error-icon"},[t._v("❌")]),t._v(" "),e("h3",{staticClass:"error-title"},[t._v("加载失败")]),t._v(" "),e("p",{staticClass:"error-desc"},[t._v(t._s(t.error))]),t._v(" "),e("button",{staticClass:"error-button",on:{click:t.fetchNovelData}},[t._v("重试")])]):t._e(),t._v(" "),e("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"30%","before-close":t.handleDialogClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"status-options"},t._l(t.dialogOptions,(function(option){return e("div",{key:option.value,staticClass:"status-option",on:{click:function(e){return t.selectStatus(option.value)}}},[t._v("\n        "+t._s(option.label)+"\n      ")])})),0)]),t._v(" "),e("el-dialog",{attrs:{title:"确认删除",visible:t.deleteDialogVisible,width:"30%"},on:{"update:visible":function(e){t.deleteDialogVisible=e}}},[e("div",{staticClass:"delete-confirm-content"},[e("p",[t._v("删除后将无法找回，确定继续吗？")]),t._v(" "),e("p",{staticClass:"delete-warning"},[t._v("（删除作品将消耗50原木）")])]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.deleteDialogVisible=!1}}},[t._v("取消")]),t._v(" "),e("el-button",{attrs:{type:"danger"},on:{click:t.deleteNovel}},[t._v("确认删除")])],1)])],1)}),[],!1,null,"43268a78",null);e.default=component.exports}}]);