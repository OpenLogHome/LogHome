(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{532:function(t,r,e){var content=e(598);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(26).default)("0ec80fbb",content,!0,{sourceMap:!1})},597:function(t,r,e){"use strict";e(532)},598:function(t,r,e){var n=e(25)(!1);n.push([t.i,".activity-form-page[data-v-30904100]{min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:40px 20px}.form-header[data-v-30904100]{width:100%;max-width:600px;display:flex;align-items:center;margin-bottom:32px;padding:20px;background:#fff;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.08)}.back-button[data-v-30904100]{background:none;border:none;color:#007bff;cursor:pointer;font-size:16px;margin-right:16px;padding:8px 12px;border-radius:6px;transition:all .2s}.back-button[data-v-30904100]:hover{background:#f8f9fa;transform:translateX(-2px)}.form-title[data-v-30904100]{margin:0;font-size:24px;font-weight:600;color:#333;text-align:center;flex:1}.form-container[data-v-30904100]{width:100%;max-width:600px;background:#fff;border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,.1);overflow:hidden}.form-content[data-v-30904100]{padding:40px}.form-content .form-fields .form-field[data-v-30904100]{margin-bottom:24px}.form-content .form-fields .field-label[data-v-30904100]{display:block;margin-bottom:8px;font-weight:500;color:#333;font-size:15px}.form-content .form-fields .required-mark[data-v-30904100]{color:#dc3545;margin-left:2px}.form-content .form-fields .form-input[data-v-30904100]{width:100%;padding:14px 16px;border:2px solid #e9ecef;border-radius:8px;font-size:15px;transition:all .3s ease;background:#fafbfc}.form-content .form-fields .form-input[data-v-30904100]:focus{outline:none;border-color:#007bff;background:#fff;box-shadow:0 0 0 3px rgba(0,123,255,.1);transform:translateY(-1px)}.form-content .form-fields .form-input[data-v-30904100]:hover{border-color:#007bff;background:#fff}.form-actions[data-v-30904100]{display:flex;gap:16px;justify-content:center;margin-top:40px;padding-top:32px;border-top:1px solid #e9ecef}.cancel-button[data-v-30904100],.submit-button[data-v-30904100]{padding:12px 32px;border-radius:8px;font-size:15px;font-weight:500;cursor:pointer;transition:all .3s ease;min-width:120px}.cancel-button[data-v-30904100]{background:#fff;border:2px solid #e9ecef;color:#666}.cancel-button[data-v-30904100]:hover{background:#f8f9fa;border-color:#007bff;color:#007bff;transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.1)}.submit-button[data-v-30904100]{background:linear-gradient(135deg, #007bff 0%, #0056b3 100%);border:2px solid #007bff;color:#fff}.submit-button[data-v-30904100]:hover:not(:disabled){background:linear-gradient(135deg, #0056b3 0%, #004085 100%);transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,123,255,.3)}.submit-button[data-v-30904100]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}.loading-state[data-v-30904100],.error-state[data-v-30904100]{width:100%;max-width:600px;background:#fff;border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,.1);text-align:center;padding:80px 40px}.loading-spinner[data-v-30904100]{width:48px;height:48px;border:4px solid #f3f3f3;border-top:4px solid #007bff;border-radius:50%;animation:spin-30904100 1s linear infinite;margin:0 auto 24px}@keyframes spin-30904100{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.loading-state p[data-v-30904100]{color:#666;font-size:16px;margin:0}.error-icon[data-v-30904100]{font-size:64px;margin-bottom:24px}.error-state h3[data-v-30904100]{margin:0 0 12px 0;color:#333;font-size:20px}.error-state p[data-v-30904100]{margin:0 0 24px 0;color:#666;font-size:16px}.error-state button[data-v-30904100]{padding:12px 24px;background:linear-gradient(135deg, #007bff 0%, #0056b3 100%);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:15px;font-weight:500;transition:all .3s ease}.error-state button[data-v-30904100]:hover{background:linear-gradient(135deg, #0056b3 0%, #004085 100%);transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,123,255,.3)}@media(max-width: 768px){.activity-form-page[data-v-30904100]{padding:20px 16px}.form-header[data-v-30904100]{padding:16px;margin-bottom:24px}.form-title[data-v-30904100]{font-size:20px}.form-content[data-v-30904100]{padding:24px}.form-actions[data-v-30904100]{flex-direction:column;gap:12px}.cancel-button[data-v-30904100],.submit-button[data-v-30904100]{width:100%}.loading-state[data-v-30904100],.error-state[data-v-30904100]{padding:60px 24px}}",""]),t.exports=n},641:function(t,r,e){"use strict";e.r(r);e(27),e(28),e(17),e(41),e(33),e(34);var n=e(0);e(150),e(10),e(53),e(54),e(6);function o(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,a){if(t){if("string"==typeof t)return c(t,a);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,a):void 0}}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,a=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,d=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw d}}}}function c(t,a){(null==a||a>t.length)&&(a=t.length);for(var r=0,e=Array(a);r<a;r++)e[r]=t[r];return e}var d={name:"ActivityForm",data:function(){return{currentActivity:null,activityFormData:{},loading:!0,error:null,submitting:!1}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.loadActivityInfo();case 2:case"end":return r.stop()}}),r)})))()},methods:{loadActivityInfo:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var e,n,o,c,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t.loading=!0,t.error=null,e=t.$route.params.workId,n=t.$route.params.tagId,r.next=7,t.$api.essays.getNovelActivity(e);case 7:if(o=r.sent)if(c=o.activities.find((function(a){return a.tag_id==n})))if(t.currentActivity=c,o.userInfo&&o.userInfo.length>0)if(d=o.userInfo.find((function(t){return t.tag_id==n})))try{t.activityFormData=d.information_data?JSON.parse(d.information_data):{}}catch(r){console.error("解析已填写的表单数据失败:",r),t.activityFormData={}}else t.activityFormData={};else t.activityFormData={};else t.error="未找到对应的活动信息";else t.error="加载活动信息失败";r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),console.error("加载活动信息失败:",r.t0),t.error="网络错误，请重试";case 15:return r.prev=15,t.loading=!1,r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[0,11,15,18]])})))()},submitActivityForm:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var e,n,c,d,f,l,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,null===(e=t.currentActivity)||void 0===e||!e.required_fields){r.next=20;break}n=o(t.currentActivity.required_fields),r.prev=3,n.s();case 5:if((c=n.n()).done){r.next=12;break}if(!(d=c.value).required||t.activityFormData[d.name]&&""!==t.activityFormData[d.name].toString().trim()){r.next=10;break}return t.$message.error("请填写".concat(d.name)),r.abrupt("return");case 10:r.next=5;break;case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(3),n.e(r.t0);case 17:return r.prev=17,n.f(),r.finish(17);case 20:return t.submitting=!0,f=t.$route.params.workId,l=t.$route.params.tagId,r.next=25,t.$api.essays.submitActivityInfo(f,l,t.activityFormData);case 25:!0===(m=r.sent).success?(t.$message.success("提交成功！"),t.goBack()):t.$message.error(m.message||"提交失败，请重试"),r.next=33;break;case 29:r.prev=29,r.t1=r.catch(0),console.error("提交表单失败:",r.t1),t.$message.error("网络错误，请重试");case 33:return r.prev=33,t.submitting=!1,r.finish(33);case 36:case"end":return r.stop()}}),r,null,[[0,29,33,36],[3,14,17,20]])})))()},goBack:function(){this.$router.go(-1)}}},f=(e(597),e(12)),component=Object(f.a)(d,(function(){var t=this,r=t._self._c;return r("div",{staticClass:"activity-form-page"},[r("div",{staticClass:"form-header"},[r("button",{staticClass:"back-button",on:{click:t.goBack}},[t._v("返回")]),t._v(" "),r("h1",{staticClass:"form-title"},[t._v(t._s(t.currentActivity?t.currentActivity.activity_name:"活动信息填写"))])]),t._v(" "),t.currentActivity&&t.currentActivity.required_fields?r("div",{staticClass:"form-container"},[r("div",{staticClass:"form-content"},[r("div",{staticClass:"form-fields"},t._l(t.currentActivity.required_fields,(function(e){return r("div",{key:e.name,staticClass:"form-field"},[r("label",{staticClass:"field-label"},[t._v("\n            "+t._s(e.name)+"\n            "),e.required?r("span",{staticClass:"required-mark"},[t._v("*")]):t._e()]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.activityFormData[e.name],expression:"activityFormData[field.name]"}],staticClass:"form-input",attrs:{placeholder:e.placeholder||"请输入"+e.name,maxlength:e.maxLength},domProps:{value:t.activityFormData[e.name]},on:{input:function(r){r.target.composing||t.$set(t.activityFormData,e.name,r.target.value)}}})])})),0),t._v(" "),r("div",{staticClass:"form-actions"},[r("button",{staticClass:"cancel-button",attrs:{type:"button"},on:{click:t.goBack}},[t._v("取消")]),t._v(" "),r("button",{staticClass:"submit-button",attrs:{type:"button",disabled:t.submitting},on:{click:t.submitActivityForm}},[t._v("\n          "+t._s(t.submitting?"提交中...":"提交")+"\n        ")])])])]):t.loading?r("div",{staticClass:"loading-state"},[r("div",{staticClass:"loading-spinner"}),t._v(" "),r("p",[t._v("正在加载活动信息...")])]):t.error?r("div",{staticClass:"error-state"},[r("div",{staticClass:"error-icon"},[t._v("❌")]),t._v(" "),r("h3",[t._v("加载失败")]),t._v(" "),r("p",[t._v(t._s(t.error))]),t._v(" "),r("button",{on:{click:t.loadActivityInfo}},[t._v("重试")])]):t._e()])}),[],!1,null,"30904100",null);r.default=component.exports}}]);