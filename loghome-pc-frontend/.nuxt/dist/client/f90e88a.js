(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{500:function(t,e,o){"use strict";var r=o(3),n=o(501),l=o(221),d=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(l);r(r.P+r.F*d,"String",{padStart:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},501:function(t,e,o){var r=o(24),n=o(222),l=o(51);t.exports=function(t,e,o,d){var c=String(l(t)),v=c.length,f=void 0===o?" ":String(o),x=r(e);if(x<=v||""==f)return c;var m=x-v,h=n.call(f,Math.ceil(m/f.length));return h.length>m&&(h=h.slice(0,m)),d?h+c:c+h}},524:function(t,e,o){var content=o(577);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(26).default)("62bdf9e8",content,!0,{sourceMap:!1})},576:function(t,e,o){"use strict";o(524)},577:function(t,e,o){var r=o(25)(!1);r.push([t.i,".tag-collections-page[data-v-4d4385e9]{max-width:1200px;margin:0 auto;padding:20px;background-color:#fff;min-height:calc(100vh - 140px)}.page-header[data-v-4d4385e9]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:15px;border-bottom:1px solid #e0e0e0}.page-header .page-title[data-v-4d4385e9]{font-size:24px;font-weight:bold;color:#947358;margin:0}.page-header .back-button[data-v-4d4385e9]{padding:8px 16px;background-color:#947358;color:#fff;border-radius:4px;text-decoration:none;font-size:14px;transition:background-color .3s}.page-header .back-button[data-v-4d4385e9]:hover{background-color:hsl(27,25.4237288136%,36.2745098039%)}.loading-container[data-v-4d4385e9],.error-container[data-v-4d4385e9],.empty-container[data-v-4d4385e9]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px}.loading-container p[data-v-4d4385e9],.error-container p[data-v-4d4385e9],.empty-container p[data-v-4d4385e9]{margin-top:20px;color:#666;font-size:16px}.loading-spinner[data-v-4d4385e9]{width:50px;height:50px;border:5px solid rgba(148,115,88,.2);border-top-color:#947358;border-radius:50%;animation:spin-4d4385e9 1s linear infinite}@keyframes spin-4d4385e9{to{transform:rotate(360deg)}}.retry-button[data-v-4d4385e9]{margin-top:15px;padding:8px 20px;background-color:#947358;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px}.retry-button[data-v-4d4385e9]:hover{background-color:hsl(27,25.4237288136%,36.2745098039%)}.novels-grid[data-v-4d4385e9]{display:grid;grid-template-columns:repeat(auto-fill, minmax(300px, 1fr));gap:25px;margin-top:20px}.novel-card[data-v-4d4385e9]{display:flex;flex-direction:column;border-radius:8px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,.08);transition:transform .3s,box-shadow .3s;background-color:#fff;height:100%}.novel-card[data-v-4d4385e9]:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,.1)}.novel-cover[data-v-4d4385e9]{height:180px;background-size:cover;background-position:center;position:relative}.novel-cover .novel-category[data-v-4d4385e9]{position:absolute;top:10px;right:10px;background-color:rgba(0,0,0,.7);color:#fff;padding:3px 8px;border-radius:4px;font-size:12px}.novel-info[data-v-4d4385e9]{padding:15px;display:flex;flex-direction:column;flex-grow:1}.novel-title[data-v-4d4385e9]{font-size:18px;font-weight:bold;margin:0 0 10px;color:#333;line-height:1.4;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}.novel-author-info[data-v-4d4385e9]{display:flex;align-items:center;margin-bottom:12px}.novel-author-info .author-avatar[data-v-4d4385e9]{width:24px;height:24px;border-radius:50%;margin-right:8px;object-fit:cover}.novel-author-info .author-name[data-v-4d4385e9]{font-size:14px;color:#666}.novel-desc[data-v-4d4385e9]{font-size:14px;color:#666;margin:0 0 15px;line-height:1.5;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;flex-grow:1}.novel-stats[data-v-4d4385e9]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:8px}.novel-stats span[data-v-4d4385e9]{font-size:12px;color:#666}.novel-update-time[data-v-4d4385e9]{font-size:12px;color:#666;margin-bottom:15px}.read-button[data-v-4d4385e9]{padding:8px 0;background-color:#947358;color:#fff;border-radius:4px;text-align:center;text-decoration:none;font-size:14px;transition:background-color .3s}.read-button[data-v-4d4385e9]:hover{background-color:hsl(27,25.4237288136%,36.2745098039%)}@media(max-width: 768px){.novels-grid[data-v-4d4385e9]{grid-template-columns:repeat(auto-fill, minmax(250px, 1fr))}}@media(max-width: 480px){.novels-grid[data-v-4d4385e9]{grid-template-columns:1fr}}",""]),t.exports=r},626:function(t,e,o){"use strict";o.r(e);o(27);var r=o(0),n=(o(10),o(53),o(54),o(500),o(6),{head:function(){return{title:"".concat(this.tagName||"标签集合"," - 原木社区"),meta:[{hid:"description",name:"description",content:"原木社区 - ".concat(this.tagName||"标签集合"," 分类下的热门小说列表")}]}},data:function(){return{tagId:0,tagName:"",novels:[],loading:!0,error:null}},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var o,r,n,l,d,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.query,r=t.$api,t.error,e.prev=1,n=o.tag_id||3,console.log("标签ID:",n),e.next=6,r.novels.getTagInfo(n);case 6:return l=e.sent,d=(null==l?void 0:l.tag_name)||"标签集合",e.next=10,r.novels.getTagCollections(n);case 10:return c=e.sent,console.log("获取到标签小说数据:",(null==c?void 0:c.length)||0,"条记录"),e.abrupt("return",{tagId:n,tagName:d,novels:c||[],loading:!1});case 15:return e.prev=15,e.t0=e.catch(1),console.error("加载标签数据失败:",e.t0),e.abrupt("return",{tagId:o.tag_id||3,tagName:"标签集合",novels:[],loading:!1,error:"加载标签数据失败: ".concat(e.t0.message||"未知错误")});case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))()},methods:{refreshCollections:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.error=null,e.prev=2,e.next=5,t.$api.novels.getTagCollections(t.tagId);case 5:t.novels=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error("刷新标签数据失败:",e.t0),t.error="刷新标签数据失败，请稍后重试";case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,8,12,15]])})))()},truncateText:function(text,t){return text?text.length<=t?text:text.substring(0,t)+"...":""},formatNumber:function(t){return t?t>=1e4?(t/1e4).toFixed(1)+"万":t>=1e3?(t/1e3).toFixed(1)+"k":t.toString():"0"},formatDateTime:function(t){if(!t)return"";var e=new Date(t),o=new Date,r=Math.abs(o-e),n=Math.floor(r/864e5);return n<1?"今天":n<7?"".concat(n,"天前"):"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"))}}}),l=(o(576),o(12)),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"tag-collections-page"},[e("div",{staticClass:"page-header"},[e("h1",{staticClass:"page-title"},[t._v(t._s(t.tagName||"标签集合"))]),t._v(" "),e("nuxt-link",{staticClass:"back-button",attrs:{to:"/read"}},[t._v("返回书库")])],1),t._v(" "),t.loading?e("div",{staticClass:"loading-container"},[e("div",{staticClass:"loading-spinner"}),t._v(" "),e("p",[t._v("正在加载内容...")])]):t.error?e("div",{staticClass:"error-container"},[e("p",[t._v(t._s(t.error))]),t._v(" "),e("button",{staticClass:"retry-button",on:{click:t.refreshCollections}},[t._v("重试")])]):0===t.novels.length?e("div",{staticClass:"empty-container"},[e("p",[t._v("该标签下暂无小说")])]):e("div",{staticClass:"novels-grid"},t._l(t.novels,(function(o){return e("div",{key:o.novel_id,staticClass:"novel-card"},[o.picUrl?e("div",{staticClass:"novel-cover",style:"background-image: url(".concat(o.picUrl,")")},["world"===o.novel_type?e("span",{staticClass:"novel-category"},[t._v("世界设定")]):t._e()]):e("div",{staticClass:"novel-cover",style:"background-color: hsl(".concat(30*o.novel_id%360,", 70%, 80%)")},["world"===o.novel_type?e("span",{staticClass:"novel-category"},[t._v("世界设定")]):t._e()]),t._v(" "),e("div",{staticClass:"novel-info"},[e("h3",{staticClass:"novel-title"},[t._v(t._s(o.name))]),t._v(" "),e("div",{staticClass:"novel-author-info"},[e("img",{staticClass:"author-avatar",attrs:{src:o.avatar_url||"/static/user/defaultAvatar.jpg",alt:"作者头像",onerror:"this.onerror=null;this.src='/static/user/defaultAvatar.jpg'"}}),t._v(" "),e("span",{staticClass:"author-name"},[t._v(t._s(o.user_name||"佚名"))])]),t._v(" "),e("p",{staticClass:"novel-desc"},[t._v(t._s(t.truncateText(o.content,100)))]),t._v(" "),e("div",{staticClass:"novel-stats"},[e("span",{attrs:{title:"阅读量"}},[t._v("👁️ "+t._s(t.formatNumber(o.clicks||0)))]),t._v(" "),e("span",{attrs:{title:"字数"}},[t._v("📃 "+t._s(t.formatNumber(o.text_count||0))+"字")]),t._v(" "),e("span",{attrs:{title:"连载状态"}},[t._v(t._s(1===o.is_complete?"已完结":"连载中"))])]),t._v(" "),e("div",{staticClass:"novel-update-time"},[e("span",{attrs:{title:"更新时间"}},[t._v("🕒 "+t._s(t.formatDateTime(o.update_time)))])]),t._v(" "),e("nuxt-link",{staticClass:"read-button",attrs:{to:"/novel/".concat(o.novel_id)}},[t._v("开始阅读")])],1)])})),0)])}),[],!1,null,"4d4385e9",null);e.default=component.exports}}]);