(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{358:function(n,r,t){"use strict";var e=t(7),o=t(42),c=t(43),d=t(219),l=t(104),v=t(15),m=t(74).f,f=t(75).f,h=t(20).f,x=t(359).trim,w="Number",_=e[w],k=_,j=_.prototype,y=c(t(149)(j))==w,C="trim"in String.prototype,z=function(n){var r=l(n,!1);if("string"==typeof r&&r.length>2){var t,e,o,c=(r=C?r.trim():x(r,3)).charCodeAt(0);if(43===c||45===c){if(88===(t=r.charCodeAt(2))||120===t)return NaN}else if(48===c){switch(r.charCodeAt(1)){case 66:case 98:e=2,o=49;break;case 79:case 111:e=8,o=55;break;default:return+r}for(var code,d=r.slice(2),i=0,v=d.length;i<v;i++)if((code=d.charCodeAt(i))<48||code>o)return NaN;return parseInt(d,e)}}return+r};if(!_(" 0o1")||!_("0b1")||_("+0x1")){_=function(n){var r=arguments.length<1?0:n,t=this;return t instanceof _&&(y?v((function(){j.valueOf.call(t)})):c(t)!=w)?d(new k(z(r)),t,_):z(r)};for(var S,I=t(13)?m(k):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;I.length>T;T++)o(k,S=I[T])&&!o(_,S)&&h(_,S,f(k,S));_.prototype=j,j.constructor=_,t(23)(e,w,_)}},359:function(n,r,t){var e=t(3),o=t(51),c=t(15),d=t(360),l="["+d+"]",v=RegExp("^"+l+l+"*"),m=RegExp(l+l+"*$"),f=function(n,r,t){var o={},l=c((function(){return!!d[n]()||"​"!="​"[n]()})),v=o[n]=l?r(h):d[n];t&&(o[t]=v),e(e.P+e.F*l,"String",o)},h=f.trim=function(n,r){return n=String(o(n)),1&r&&(n=n.replace(v,"")),2&r&&(n=n.replace(m,"")),n};n.exports=f},360:function(n,r){n.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},501:function(n,r,t){var content=t(504);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[n.i,content,""]]),content.locals&&(n.exports=content.locals);(0,t(26).default)("26961ba2",content,!0,{sourceMap:!1})},502:function(n,r,t){var map={"./af":361,"./af.js":361,"./ar":362,"./ar-dz":363,"./ar-dz.js":363,"./ar-kw":364,"./ar-kw.js":364,"./ar-ly":365,"./ar-ly.js":365,"./ar-ma":366,"./ar-ma.js":366,"./ar-ps":367,"./ar-ps.js":367,"./ar-sa":368,"./ar-sa.js":368,"./ar-tn":369,"./ar-tn.js":369,"./ar.js":362,"./az":370,"./az.js":370,"./be":371,"./be.js":371,"./bg":372,"./bg.js":372,"./bm":373,"./bm.js":373,"./bn":374,"./bn-bd":375,"./bn-bd.js":375,"./bn.js":374,"./bo":376,"./bo.js":376,"./br":377,"./br.js":377,"./bs":378,"./bs.js":378,"./ca":379,"./ca.js":379,"./cs":380,"./cs.js":380,"./cv":381,"./cv.js":381,"./cy":382,"./cy.js":382,"./da":383,"./da.js":383,"./de":384,"./de-at":385,"./de-at.js":385,"./de-ch":386,"./de-ch.js":386,"./de.js":384,"./dv":387,"./dv.js":387,"./el":388,"./el.js":388,"./en-au":389,"./en-au.js":389,"./en-ca":390,"./en-ca.js":390,"./en-gb":391,"./en-gb.js":391,"./en-ie":392,"./en-ie.js":392,"./en-il":393,"./en-il.js":393,"./en-in":394,"./en-in.js":394,"./en-nz":395,"./en-nz.js":395,"./en-sg":396,"./en-sg.js":396,"./eo":397,"./eo.js":397,"./es":398,"./es-do":399,"./es-do.js":399,"./es-mx":400,"./es-mx.js":400,"./es-us":401,"./es-us.js":401,"./es.js":398,"./et":402,"./et.js":402,"./eu":403,"./eu.js":403,"./fa":404,"./fa.js":404,"./fi":405,"./fi.js":405,"./fil":406,"./fil.js":406,"./fo":407,"./fo.js":407,"./fr":408,"./fr-ca":409,"./fr-ca.js":409,"./fr-ch":410,"./fr-ch.js":410,"./fr.js":408,"./fy":411,"./fy.js":411,"./ga":412,"./ga.js":412,"./gd":413,"./gd.js":413,"./gl":414,"./gl.js":414,"./gom-deva":415,"./gom-deva.js":415,"./gom-latn":416,"./gom-latn.js":416,"./gu":417,"./gu.js":417,"./he":418,"./he.js":418,"./hi":419,"./hi.js":419,"./hr":420,"./hr.js":420,"./hu":421,"./hu.js":421,"./hy-am":422,"./hy-am.js":422,"./id":423,"./id.js":423,"./is":424,"./is.js":424,"./it":425,"./it-ch":426,"./it-ch.js":426,"./it.js":425,"./ja":427,"./ja.js":427,"./jv":428,"./jv.js":428,"./ka":429,"./ka.js":429,"./kk":430,"./kk.js":430,"./km":431,"./km.js":431,"./kn":432,"./kn.js":432,"./ko":433,"./ko.js":433,"./ku":434,"./ku-kmr":435,"./ku-kmr.js":435,"./ku.js":434,"./ky":436,"./ky.js":436,"./lb":437,"./lb.js":437,"./lo":438,"./lo.js":438,"./lt":439,"./lt.js":439,"./lv":440,"./lv.js":440,"./me":441,"./me.js":441,"./mi":442,"./mi.js":442,"./mk":443,"./mk.js":443,"./ml":444,"./ml.js":444,"./mn":445,"./mn.js":445,"./mr":446,"./mr.js":446,"./ms":447,"./ms-my":448,"./ms-my.js":448,"./ms.js":447,"./mt":449,"./mt.js":449,"./my":450,"./my.js":450,"./nb":451,"./nb.js":451,"./ne":452,"./ne.js":452,"./nl":453,"./nl-be":454,"./nl-be.js":454,"./nl.js":453,"./nn":455,"./nn.js":455,"./oc-lnc":456,"./oc-lnc.js":456,"./pa-in":457,"./pa-in.js":457,"./pl":458,"./pl.js":458,"./pt":459,"./pt-br":460,"./pt-br.js":460,"./pt.js":459,"./ro":461,"./ro.js":461,"./ru":462,"./ru.js":462,"./sd":463,"./sd.js":463,"./se":464,"./se.js":464,"./si":465,"./si.js":465,"./sk":466,"./sk.js":466,"./sl":467,"./sl.js":467,"./sq":468,"./sq.js":468,"./sr":469,"./sr-cyrl":470,"./sr-cyrl.js":470,"./sr.js":469,"./ss":471,"./ss.js":471,"./sv":472,"./sv.js":472,"./sw":473,"./sw.js":473,"./ta":474,"./ta.js":474,"./te":475,"./te.js":475,"./tet":476,"./tet.js":476,"./tg":477,"./tg.js":477,"./th":478,"./th.js":478,"./tk":479,"./tk.js":479,"./tl-ph":480,"./tl-ph.js":480,"./tlh":481,"./tlh.js":481,"./tr":482,"./tr.js":482,"./tzl":483,"./tzl.js":483,"./tzm":484,"./tzm-latn":485,"./tzm-latn.js":485,"./tzm.js":484,"./ug-cn":486,"./ug-cn.js":486,"./uk":487,"./uk.js":487,"./ur":488,"./ur.js":488,"./uz":489,"./uz-latn":490,"./uz-latn.js":490,"./uz.js":489,"./vi":491,"./vi.js":491,"./x-pseudo":492,"./x-pseudo.js":492,"./yo":493,"./yo.js":493,"./zh-cn":494,"./zh-cn.js":494,"./zh-hk":495,"./zh-hk.js":495,"./zh-mo":496,"./zh-mo.js":496,"./zh-tw":497,"./zh-tw.js":497};function e(n){var r=o(n);return t(r)}function o(n){if(!t.o(map,n)){var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}return map[n]}e.keys=function(){return Object.keys(map)},e.resolve=o,n.exports=e,e.id=502},503:function(n,r,t){"use strict";t(501)},504:function(n,r,t){var e=t(25)(!1);e.push([n.i,".banner-container[data-v-299ab842]{width:100%;margin:10px 0}.banner-container .banner-swiper[data-v-299ab842]{position:relative;width:100%;height:200px;overflow:hidden;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1)}@media(max-width: 768px){.banner-container .banner-swiper[data-v-299ab842]{height:150px}}.banner-container .banner-wrapper[data-v-299ab842]{display:flex;width:100%;height:100%;transition:transform .5s ease}.banner-container .banner-item[data-v-299ab842]{flex:0 0 100%;position:relative;cursor:pointer;overflow:hidden}.banner-container .banner-item .banner-image[data-v-299ab842]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.banner-container .banner-item:hover .banner-image[data-v-299ab842]{transform:scale(1.05)}.banner-container .banner-item .banner-mask[data-v-299ab842]{position:absolute;bottom:0;left:0;width:100%;padding:15px 20px;background:linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent)}.banner-container .banner-item .banner-mask .banner-title[data-v-299ab842]{color:#fff;font-size:16px;font-weight:bold;margin:0}.banner-container .banner-pagination[data-v-299ab842]{position:absolute;bottom:15px;left:50%;transform:translateX(-50%);display:flex;gap:8px;z-index:10}.banner-container .banner-pagination .pagination-dot[data-v-299ab842]{width:8px;height:8px;border-radius:50%;background-color:hsla(0,0%,100%,.5);cursor:pointer;transition:all .3s ease}.banner-container .banner-pagination .pagination-dot.active[data-v-299ab842]{background-color:#fff;transform:scale(1.2)}.banner-container .banner-pagination .pagination-dot[data-v-299ab842]:hover{background-color:hsla(0,0%,100%,.8)}.banner-container .banner-button-prev[data-v-299ab842],.banner-container .banner-button-next[data-v-299ab842]{position:absolute;top:50%;transform:translateY(-50%);width:36px;height:36px;background-color:rgba(0,0,0,.5);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:0;transition:all .3s ease;z-index:10}.banner-container .banner-button-prev .arrow[data-v-299ab842],.banner-container .banner-button-next .arrow[data-v-299ab842]{color:#fff;font-size:18px;font-weight:bold}.banner-container .banner-button-prev[data-v-299ab842]:hover,.banner-container .banner-button-next[data-v-299ab842]:hover{background-color:rgba(0,0,0,.7)}.banner-container .banner-button-prev[data-v-299ab842]{left:10px}.banner-container .banner-button-next[data-v-299ab842]{right:10px}.banner-container .banner-swiper:hover .banner-button-prev[data-v-299ab842],.banner-container .banner-swiper:hover .banner-button-next[data-v-299ab842]{opacity:1}",""]),n.exports=e},506:function(n,r,t){"use strict";var e=t(0),o=(t(6),t(358),{name:"Banner",props:{page:{type:String,default:"library"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:8e3},duration:{type:Number,default:500},showDots:{type:Boolean,default:!0}},data:function(){return{banners:[],currentSlide:0,autoPlayInterval:null}},created:function(){var n=this;return Object(e.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getBanners();case 2:case"end":return r.stop()}}),r)})))()},methods:{getBanners:function(){var n=this;return Object(e.a)(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.$api.novels.getBanners(n.page);case 3:t=r.sent,n.banners=t||[],r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),console.error("获取Banner数据失败:",r.t0),n.banners=[];case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))()},navigateToBanner:function(n){n.link_url_pc&&"None"!==n.link_url_pc&&this.$router.push(n.link_url_pc)},setSlide:function(n){this.currentSlide=n},prevSlide:function(){this.currentSlide>0?this.currentSlide--:this.currentSlide=this.banners.length-1},nextSlide:function(){this.currentSlide<this.banners.length-1?this.currentSlide++:this.currentSlide=0},startAutoPlay:function(){var n=this;this.banners.length<=1||!this.autoplay||(this.stopAutoPlay(),this.autoPlayInterval=setInterval((function(){n.nextSlide()}),this.interval))},stopAutoPlay:function(){this.autoPlayInterval&&(clearInterval(this.autoPlayInterval),this.autoPlayInterval=null)}},mounted:function(){this.startAutoPlay()},beforeDestroy:function(){this.stopAutoPlay()}}),c=(t(503),t(12)),component=Object(c.a)(o,(function(){var n=this,r=n._self._c;return n.banners.length>0?r("div",{staticClass:"banner-container"},[r("div",{staticClass:"banner-swiper",on:{mouseenter:n.stopAutoPlay,mouseleave:n.startAutoPlay}},[r("div",{staticClass:"banner-wrapper",style:{transform:"translateX(-".concat(100*n.currentSlide,"%)")}},n._l(n.banners,(function(t,e){return r("div",{key:"banner-"+e,staticClass:"banner-item",on:{click:function(r){return n.navigateToBanner(t)}}},[r("img",{staticClass:"banner-image",attrs:{src:t.image_url,alt:t.title||"banner"}}),n._v(" "),t.title?r("div",{staticClass:"banner-mask"},[r("div",{staticClass:"banner-title"},[n._v(n._s(t.title))])]):n._e()])})),0),n._v(" "),n.banners.length>1?r("div",{staticClass:"banner-pagination"},n._l(n.banners,(function(t,e){return r("span",{key:e,class:["pagination-dot",{active:n.currentSlide===e}],on:{click:function(r){return r.stopPropagation(),n.setSlide(e)}}})})),0):n._e(),n._v(" "),n.banners.length>1?r("div",{staticClass:"banner-button-prev",on:{click:function(r){return r.stopPropagation(),n.prevSlide.apply(null,arguments)}}},[r("span",{staticClass:"arrow"},[n._v("‹")])]):n._e(),n._v(" "),n.banners.length>1?r("div",{staticClass:"banner-button-next",on:{click:function(r){return r.stopPropagation(),n.nextSlide.apply(null,arguments)}}},[r("span",{staticClass:"arrow"},[n._v("›")])]):n._e()])]):n._e()}),[],!1,null,"299ab842",null);r.a=component.exports},507:function(n,r,t){var content=t(543);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[n.i,content,""]]),content.locals&&(n.exports=content.locals);(0,t(26).default)("5ec6d1c4",content,!0,{sourceMap:!1})},542:function(n,r,t){"use strict";t(507)},543:function(n,r,t){var e=t(25)(!1);e.push([n.i,"\n.community-page[data-v-1c51992d] {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  min-height: 100vh;\n}\r\n\r\n/* 搜索栏样式 */\n.search-bar[data-v-1c51992d] {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 30px;\n}\n.search-input-wrapper[data-v-1c51992d] {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  background: white;\r\n  border-radius: 25px;\r\n  padding: 12px 20px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.06);\r\n  border: 1px solid #e9ecef;\r\n  margin-right: 20px;\n}\n.search-input-wrapper[data-v-1c51992d]:hover {\r\n  border-color: #947358;\r\n  box-shadow: 0 4px 16px rgba(148, 115, 88, 0.15);\n}\n.search-input-wrapper i[data-v-1c51992d] {\r\n  margin-right: 12px;\r\n  color: #6c757d;\r\n  font-size: 18px;\n}\n.search-placeholder[data-v-1c51992d] {\r\n  color: #6c757d;\r\n  font-size: 16px;\n}\n.message-icon[data-v-1c51992d] {\r\n  position: relative;\r\n  width: 48px;\r\n  height: 48px;\r\n  background: white;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n  transition: all 0.3s ease;\n}\n.message-icon[data-v-1c51992d]:hover {\r\n  background: #947358;\r\n  color: white;\r\n  transform: scale(1.05);\n}\n.message-icon i[data-v-1c51992d] {\r\n  font-size: 20px;\n}\n.unread-badge[data-v-1c51992d] {\r\n  position: absolute;\r\n  top: -5px;\r\n  right: -5px;\r\n  background: #dc3545;\r\n  color: white;\r\n  border-radius: 50%;\r\n  width: 20px;\r\n  height: 20px;\r\n  font-size: 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: 600;\n}\r\n\r\n/* 轮播图样式 */\n.swiper-section[data-v-1c51992d] {\r\n  margin-bottom: 30px;\r\n  border-radius: 12px;\r\n  overflow: hidden;\n}\n.banner-section[data-v-1c51992d] {\r\n  margin-bottom: 30px;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  box-shadow: 0 4px 20px rgba(0,0,0,0.08);\n}\r\n\r\n/* 通用section样式 */\n.section[data-v-1c51992d] {\r\n  margin-bottom: 30px;\n}\n.circles-section[data-v-1c51992d],\r\n.posts-section[data-v-1c51992d] {\r\n  margin-bottom: 30px;\n}\n.section-header[data-v-1c51992d] {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\n}\n.section-title[data-v-1c51992d] {\r\n  font-size: 22px;\r\n  font-weight: 700;\r\n  color: #2c3e50;\r\n  position: relative;\n}\n.section-title[data-v-1c51992d]::after {\r\n  content: '';\r\n  position: absolute;\r\n  bottom: -4px;\r\n  left: 0;\r\n  width: 40px;\r\n  height: 3px;\r\n  background: linear-gradient(90deg, #947358, #704C35);\r\n  border-radius: 2px;\n}\n.section-more[data-v-1c51992d] {\r\n  color: #947358;\r\n  text-decoration: none;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  padding: 6px 12px;\r\n  border-radius: 20px;\r\n  transition: all 0.3s ease;\r\n  cursor: pointer;\n}\n.section-more[data-v-1c51992d]:hover {\r\n  background: rgba(148, 115, 88, 0.1);\r\n  text-decoration: none;\n}\n.more-link[data-v-1c51992d] {\r\n  color: #947358;\r\n  text-decoration: none;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  padding: 6px 12px;\r\n  border-radius: 20px;\r\n  transition: all 0.3s ease;\n}\n.more-link[data-v-1c51992d]:hover {\r\n  background: rgba(148, 115, 88, 0.1);\r\n  text-decoration: none;\n}\n.sort-tabs[data-v-1c51992d] {\r\n  display: flex;\r\n  margin-bottom: 24px;\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 6px;\r\n  box-shadow: 0 2px 12px rgba(0,0,0,0.06);\n}\n.sort-tab[data-v-1c51992d] {\r\n  flex: 1;\r\n  padding: 12px 24px;\r\n  background: none;\r\n  border: none;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  color: #6c757d;\r\n  cursor: pointer;\r\n  border-radius: 8px;\r\n  transition: all 0.3s ease;\r\n  text-align: center;\n}\n.sort-tab.active[data-v-1c51992d] {\r\n  color: white;\r\n  background: linear-gradient(135deg, #947358, #704C35);\r\n  box-shadow: 0 2px 8px rgba(148, 115, 88, 0.3);\n}\n.sort-tab[data-v-1c51992d]:hover:not(.active) {\r\n  color: #947358;\r\n  background: rgba(148, 115, 88, 0.1);\n}\r\n\r\n/* 排序按钮样式 */\n.header-actions[data-v-1c51992d] {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\n}\n.sort-buttons[data-v-1c51992d] {\r\n  display: flex;\r\n  gap: 8px;\n}\n.sort-btn[data-v-1c51992d] {\r\n  padding: 8px 16px;\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #6c757d;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\n}\n.sort-btn.active[data-v-1c51992d] {\r\n  background: #947358;\r\n  color: white;\r\n  border-color: #947358;\n}\n.sort-btn[data-v-1c51992d]:hover:not(.active) {\r\n  border-color: #947358;\r\n  color: #947358;\n}\r\n\r\n/* 圈子网格样式 */\n.circles-grid[data-v-1c51992d] {\r\n  display: grid;\r\n  grid-template-columns: 2fr 1fr;\r\n  gap: 20px;\r\n  align-items: start;\n}\r\n\r\n/* 主圈子卡片 */\n.circle-main[data-v-1c51992d] {\r\n  background: white;\r\n  border-radius: 16px;\r\n  overflow: hidden;\r\n  box-shadow: 0 4px 20px rgba(0,0,0,0.08);\r\n  transition: all 0.3s ease;\r\n  cursor: pointer;\r\n  border: 1px solid rgba(0,0,0,0.05);\r\n  position: relative;\n}\n.circle-main[data-v-1c51992d]:hover {\r\n  transform: translateY(-4px);\r\n  box-shadow: 0 8px 30px rgba(0,0,0,0.15);\n}\n.circle-bg[data-v-1c51992d] {\r\n  width: 100%;\r\n  height: 160px;\r\n  object-fit: cover;\r\n  display: block;\n}\n.circle-info[data-v-1c51992d] {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background: linear-gradient(transparent, rgba(0,0,0,0.7));\r\n  padding: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  color: white;\n}\n.circle-icon[data-v-1c51992d] {\r\n  width: 48px;\r\n  height: 48px;\r\n  border-radius: 50%;\r\n  margin-right: 12px;\r\n  border: 2px solid white;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n}\n.circle-details h4[data-v-1c51992d] {\r\n  margin: 0 0 4px 0;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: white;\n}\n.circle-details span[data-v-1c51992d] {\r\n  font-size: 13px;\r\n  color: rgba(255,255,255,0.9);\r\n  font-weight: 500;\n}\r\n\r\n/* 侧边圈子列表 */\n.circles-side[data-v-1c51992d] {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\n}\n.side-circle[data-v-1c51992d] {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.06);\r\n  border: 1px solid rgba(0,0,0,0.05);\n}\n.side-circle[data-v-1c51992d]:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 16px rgba(0,0,0,0.12);\n}\n.side-circle img[data-v-1c51992d] {\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 50%;\r\n  margin-right: 12px;\r\n  border: 1px solid #e9ecef;\n}\n.side-circle h5[data-v-1c51992d] {\r\n  margin: 0 0 2px 0;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #2c3e50;\n}\n.side-circle span[data-v-1c51992d] {\r\n  font-size: 12px;\r\n  color: #6c757d;\n}\n.all-circles[data-v-1c51992d] {\r\n  background: linear-gradient(135deg, #947358, #704C35);\r\n  color: white;\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  box-shadow: 0 2px 8px rgba(148, 115, 88, 0.3);\n}\n.all-circles[data-v-1c51992d]:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 16px rgba(148, 115, 88, 0.4);\n}\n.all-circles span[data-v-1c51992d] {\r\n  font-size: 14px;\r\n  font-weight: 600;\n}\n.all-circles i[data-v-1c51992d] {\r\n  font-size: 16px;\n}\r\n\r\n/* 兼容旧样式 */\n.circle-card[data-v-1c51992d] {\r\n  background: white;\r\n  border-radius: 16px;\r\n  overflow: hidden;\r\n  box-shadow: 0 4px 20px rgba(0,0,0,0.08);\r\n  transition: all 0.3s ease;\r\n  cursor: pointer;\r\n  border: 1px solid rgba(0,0,0,0.05);\n}\n.circle-card[data-v-1c51992d]:hover {\r\n  transform: translateY(-4px);\r\n  box-shadow: 0 8px 30px rgba(0,0,0,0.15);\n}\n.circle-avatar[data-v-1c51992d] {\r\n  width: 52px;\r\n  height: 52px;\r\n  border-radius: 50%;\r\n  margin-right: 16px;\r\n  border: 3px solid white;\r\n  box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n}\n.circle-details h3[data-v-1c51992d] {\r\n  margin: 0 0 6px 0;\r\n  font-size: 17px;\r\n  font-weight: 600;\r\n  color: #2c3e50;\n}\n.circle-members[data-v-1c51992d] {\r\n  font-size: 14px;\r\n  color: #6c757d;\r\n  font-weight: 500;\n}\r\n\r\n/* 帖子列表样式 - 瀑布流布局 */\n.posts-list[data-v-1c51992d] {\r\n  column-count: 2;\r\n  column-gap: 20px;\r\n  column-fill: balance;\n}\n.post-card[data-v-1c51992d] {\r\n  background: white;\r\n  border-radius: 16px;\r\n  padding: 24px;\r\n  box-shadow: 0 4px 20px rgba(0,0,0,0.08);\r\n  transition: all 0.3s ease;\r\n  border: 1px solid rgba(0,0,0,0.05);\r\n  cursor: pointer;\r\n  break-inside: avoid;\r\n  margin-bottom: 20px;\r\n  display: inline-block;\r\n  width: 100%;\n}\n.post-card[data-v-1c51992d]:hover {\r\n  box-shadow: 0 8px 30px rgba(0,0,0,0.12);\r\n  transform: translateY(-2px);\n}\n.post-header[data-v-1c51992d] {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 16px;\n}\n.user-avatar[data-v-1c51992d] {\r\n  width: 44px;\r\n  height: 44px;\r\n  border-radius: 50%;\r\n  margin-right: 12px;\r\n  cursor: pointer;\r\n  border: 2px solid #f8f9fa;\r\n  transition: all 0.3s ease;\n}\n.user-avatar[data-v-1c51992d]:hover {\r\n  border-color: #947358;\n}\n.user-info[data-v-1c51992d] {\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\n}\n.user-meta[data-v-1c51992d] {\r\n  display: flex;\r\n  flex-direction: column;\n}\n.user-name[data-v-1c51992d] {\r\n  font-weight: 600;\r\n  color: #2c3e50;\r\n  margin-bottom: 2px;\r\n  font-size: 15px;\r\n  transition: color 0.3s ease;\r\n  display: block;\n}\n.user-name[data-v-1c51992d]:hover {\r\n  color: #947358;\n}\n.post-time[data-v-1c51992d] {\r\n  font-size: 13px;\r\n  color: #8e9aaf;\r\n  font-weight: 500;\n}\n.post-circle[data-v-1c51992d] {\r\n  background: #f8f9fa;\r\n  color: #6c757d;\r\n  padding: 4px 12px;\r\n  border-radius: 12px;\r\n  font-size: 12px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\n}\n.post-circle[data-v-1c51992d]:hover {\r\n  background: #e9ecef;\r\n  color: #495057;\n}\n.post-content[data-v-1c51992d] {\r\n  margin: 0 0 16px 0;\n}\n.post-title[data-v-1c51992d] {\r\n  font-size: 19px;\r\n  font-weight: 700;\r\n  color: #2c3e50;\r\n  margin-bottom: 12px;\r\n  line-height: 1.4;\n}\n.post-text[data-v-1c51992d] {\r\n  color: #6c757d;\r\n  line-height: 1.6;\r\n  font-size: 15px;\r\n  display: -webkit-box;\r\n  -webkit-line-clamp: 3;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  max-height: 4.8em;\n}\n.post-images[data-v-1c51992d] {\r\n  margin: 16px 0;\n}\n.image-grid[data-v-1c51992d] {\r\n  display: grid;\r\n  gap: 8px;\r\n  border-radius: 12px;\r\n  overflow: hidden;\n}\n.grid-1[data-v-1c51992d] {\r\n  grid-template-columns: 1fr;\r\n  max-width: 300px;\n}\n.grid-2[data-v-1c51992d] {\r\n  grid-template-columns: repeat(2, 1fr);\r\n  max-width: 400px;\n}\n.grid-3[data-v-1c51992d] {\r\n  grid-template-columns: repeat(3, 1fr);\r\n  max-width: 450px;\n}\n.grid-multi[data-v-1c51992d] {\r\n  grid-template-columns: repeat(3, 1fr);\r\n  max-width: 450px;\n}\n.post-image[data-v-1c51992d] {\r\n  width: 100%;\r\n  height: 120px;\r\n  object-fit: cover;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\n}\n.post-image[data-v-1c51992d]:hover {\r\n  transform: scale(1.05);\n}\n.image-count[data-v-1c51992d] {\r\n  position: absolute;\r\n  bottom: 8px;\r\n  right: 8px;\r\n  background: rgba(0,0,0,0.7);\r\n  color: white;\r\n  padding: 4px 8px;\r\n  border-radius: 12px;\r\n  font-size: 12px;\n}\n.post-footer[data-v-1c51992d] {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 24px;\r\n  margin-top: 16px;\r\n  padding-top: 16px;\r\n  border-top: 1px solid #f1f3f4;\n}\n.post-title[data-v-1c51992d]:hover {\r\n  color: #947358;\n}\n.post-text[data-v-1c51992d] {\r\n  color: #495057;\r\n  line-height: 1.7;\r\n  margin-bottom: 16px;\r\n  font-size: 15px;\n}\n.post-images[data-v-1c51992d] {\r\n  display: grid;\r\n  gap: 12px;\r\n  margin-bottom: 16px;\n}\n.post-images.single[data-v-1c51992d] {\r\n  grid-template-columns: 1fr;\r\n  max-width: 500px;\n}\n.post-images.double[data-v-1c51992d] {\r\n  grid-template-columns: 1fr 1fr;\n}\n.post-images.multiple[data-v-1c51992d] {\r\n  grid-template-columns: repeat(3, 1fr);\n}\n.post-image[data-v-1c51992d] {\r\n  width: 100%;\r\n  border-radius: 12px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  box-shadow: 0 2px 12px rgba(0,0,0,0.1);\n}\n.post-image[data-v-1c51992d]:hover {\r\n  transform: scale(1.03);\r\n  box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n}\n.post-actions[data-v-1c51992d] {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 24px;\r\n  padding-top: 16px;\r\n  border-top: 1px solid #f1f3f4;\n}\n.action-btn[data-v-1c51992d] {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  background: none;\r\n  border: none;\r\n  color: #6c757d;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  padding: 8px 12px;\r\n  border-radius: 20px;\r\n  transition: all 0.3s ease;\n}\n.action-btn[data-v-1c51992d]:hover {\r\n  color: #947358;\r\n  background: rgba(148, 115, 88, 0.1);\n}\n.action-btn.liked[data-v-1c51992d] {\r\n  color: #dc3545;\n}\n.action-btn.liked[data-v-1c51992d]:hover {\r\n  background: rgba(220,53,69,0.1);\n}\r\n\r\n/* 加载更多样式 */\n.load-more[data-v-1c51992d] {\r\n  text-align: center;\r\n  padding: 30px;\n}\n.no-more[data-v-1c51992d] {\r\n  text-align: center;\r\n  padding: 20px;\r\n  color: #8e9aaf;\r\n  font-size: 14px;\n}\r\n\r\n/* 发布按钮样式 */\n.create-post-btn[data-v-1c51992d] {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  background: linear-gradient(135deg, #947358, #704C35);\r\n  border: none;\r\n  border-radius: 20px;\r\n  color: white;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  padding: 8px 16px;\r\n  cursor: pointer;\r\n  box-shadow: 0 2px 10px rgba(148, 115, 88, 0.3);\r\n  transition: all 0.3s ease;\n}\n.create-post-btn[data-v-1c51992d]:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 15px rgba(148, 115, 88, 0.4);\n}\n.message-badge[data-v-1c51992d] {\r\n  position: absolute;\r\n  top: -5px;\r\n  right: -5px;\r\n  background: #dc3545;\r\n  color: white;\r\n  border-radius: 50%;\r\n  width: 24px;\r\n  height: 24px;\r\n  font-size: 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: 600;\n}\r\n\r\n/* 响应式设计 */\n@media (max-width: 768px) {\n.community-page[data-v-1c51992d] {\r\n    padding: 15px;\n}\n.circles-grid[data-v-1c51992d] {\r\n    grid-template-columns: 1fr;\r\n    gap: 16px;\n}\n.circle-main[data-v-1c51992d] {\r\n    margin-bottom: 16px;\n}\n.circles-side[data-v-1c51992d] {\r\n    display: grid;\r\n    grid-template-columns: repeat(2, 1fr);\r\n    gap: 12px;\n}\n.all-circles[data-v-1c51992d] {\r\n    grid-column: 1 / -1;\n}\n.sort-buttons[data-v-1c51992d] {\r\n    display: flex;\r\n    gap: 8px;\n}\n.sort-btn[data-v-1c51992d] {\r\n    flex: 1;\r\n    padding: 8px 16px;\r\n    font-size: 14px;\n}\n.post-images.multiple[data-v-1c51992d] {\r\n    grid-template-columns: repeat(2, 1fr);\n}\n.post-card[data-v-1c51992d] {\r\n    padding: 20px;\n}\n.message-btn[data-v-1c51992d] {\r\n    width: 50px;\r\n    height: 50px;\r\n    bottom: 20px;\r\n    right: 20px;\r\n    font-size: 20px;\n}\r\n  \r\n  /* 瀑布流响应式 */\n.posts-list[data-v-1c51992d] {\r\n      column-count: 1;\r\n      column-gap: 15px;\n}\n}\n@media (max-width: 480px) {\n.search-input-wrapper[data-v-1c51992d] {\r\n    margin-right: 10px;\n}\n.search-placeholder[data-v-1c51992d] {\r\n    font-size: 14px;\n}\n.section-title[data-v-1c51992d] {\r\n    font-size: 18px;\n}\n.sort-btn[data-v-1c51992d] {\r\n    padding: 5px 10px;\r\n    font-size: 13px;\n}\n.post-title[data-v-1c51992d] {\r\n    font-size: 17px;\n}\n.post-card[data-v-1c51992d] {\r\n    padding: 16px;\n}\n.post-actions[data-v-1c51992d] {\r\n    gap: 16px;\n}\n.action-btn[data-v-1c51992d] {\r\n    padding: 6px 10px;\r\n    font-size: 13px;\n}\r\n  \r\n  /* 小屏幕瀑布流 */\n.posts-list[data-v-1c51992d] {\r\n    column-count: 1;\r\n    column-gap: 0;\n}\n}\r\n\r\n/* 加载动画 */\n@keyframes fadeInUp-1c51992d {\nfrom {\r\n    opacity: 0;\r\n    transform: translateY(20px);\n}\nto {\r\n    opacity: 1;\r\n    transform: translateY(0);\n}\n}\n.post-card[data-v-1c51992d] {\r\n  animation: fadeInUp-1c51992d 0.5s ease-out;\n}\r\n\r\n/* 骨架屏样式 */\n.skeleton[data-v-1c51992d] {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200% 100%;\r\n  animation: loading-1c51992d 1.5s infinite;\n}\n@keyframes loading-1c51992d {\n0% {\r\n    background-position: 200% 0;\n}\n100% {\r\n    background-position: -200% 0;\n}\n}\r\n",""]),n.exports=e},622:function(n,r,t){"use strict";t.r(r);t(28),t(17),t(41);var e=t(500),o=t(5),c=t(0),d=(t(6),t(33),t(10),t(34),t(52),t(18),t(27),t(506)),l=t(357),v=t.n(l);function m(n,r){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(n,a){if(n){if("string"==typeof n)return f(n,a);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(n,a):void 0}}(n))||r&&n&&"number"==typeof n.length){t&&(n=t);var e=0,o=function(){};return{s:o,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return a=n.done,n},e:function(n){u=!0,c=n},f:function(){try{a||null==t.return||t.return()}finally{if(u)throw c}}}}function f(n,a){(null==a||a>n.length)&&(a=n.length);for(var r=0,t=Array(a);r<a;r++)t[r]=n[r];return t}var h={components:{Banner:d.a},head:function(){return{title:"社区 - LogHome",meta:[{hid:"description",name:"description",content:"LogHome社区 - 分享阅读心得，发现优质书籍，与书友交流互动的知识社区平台"},{hid:"keywords",name:"keywords",content:"读书社区,书评,阅读分享,书友交流,读书笔记,好书推荐"},{property:"og:title",content:"LogHome社区 - 书友交流分享平台"},{property:"og:description",content:"在LogHome社区发现好书，分享阅读心得，与志同道合的书友一起探讨文学世界"},{property:"og:type",content:"website"}],link:[{rel:"canonical",href:"https://loghome.cn/community"}]}},data:function(){return{sortType:"new",loadingStatus:"more",page:1,pageSize:10,posts:[],recommendCircles:[],unreadCount:0,hasMore:!0,swiperItems:[]}},asyncData:function(n){return Object(c.a)(regeneratorRuntime.mark((function r(){var t,e,c,d,l,v;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=n.$api,r.prev=1,r.next=4,Promise.all([t.community.getRecommendCircles({page:1,pageSize:4,sort:"random"}),t.community.getRecommendPosts({page:1,pageSize:10,sort:"new"}),t.novels.getLibraryRoulousChart()]);case 4:return e=r.sent,c=Object(o.a)(e,3),d=c[0],l=c[1],v=c[2],r.abrupt("return",{recommendCircles:(null==d?void 0:d.list)||[],posts:((null==l?void 0:l.list)||[]).map((function(n){if(n.media_urls&&"string"==typeof n.media_urls)try{n.media_urls=JSON.parse(n.media_urls)}catch(r){n.media_urls=[]}return n.is_liked=!1,n.is_liked_checked=!1,n})),swiperItems:(v||[]).filter((function(n){return 1===n.isValid})).map((function(n){return{image_url:n.image,title:n.title,link_url:"None"===n.navigate_to?null:n.navigate_to}})),hasMore:(null==l?void 0:l.total)>(null==l?void 0:l.pageSize)});case 12:return r.prev=12,r.t0=r.catch(1),console.error("获取社区数据失败:",r.t0),r.abrupt("return",{recommendCircles:[],posts:[],swiperItems:[],hasMore:!1});case 16:case"end":return r.stop()}}),r,null,[[1,12]])})))()},mounted:function(){var n=this;this.posts.length>0&&this.getPostsLikeStatus(),this.$nextTick((function(){n.initWaterfall()}))},beforeDestroy:function(){"undefined"!=typeof window&&window.removeEventListener("resize",this.handleResize),this.resizeTimer&&clearTimeout(this.resizeTimer)},methods:{loadRecommendCircles:function(){var n=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.$api.community.getRecommendCircles({page:1,pageSize:4,sort:"random"});case 3:t=r.sent,n.recommendCircles=(null==t?void 0:t.list)||[],r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),console.error("加载推荐圈子失败",r.t0),n.recommendCircles=[];case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))()},loadPosts:function(){var n=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var t,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.hasMore&&"loading"!==n.loadingStatus){r.next=2;break}return r.abrupt("return");case 2:return n.loadingStatus="loading",r.prev=3,r.next=6,n.$api.community.getRecommendPosts({page:n.page,pageSize:n.pageSize,sort:n.sortType});case 6:null!=(t=r.sent)&&t.list&&(o=t.list.map((function(n){if(n.media_urls&&"string"==typeof n.media_urls)try{n.media_urls=JSON.parse(n.media_urls)}catch(r){n.media_urls=[]}return n.is_liked=!1,n.is_liked_checked=!1,n})),1===n.page?n.posts=o:n.posts=[].concat(Object(e.a)(n.posts),Object(e.a)(o)),n.page++,n.hasMore=n.posts.length<t.total,n.loadingStatus=n.hasMore?"more":"noMore",setTimeout((function(){n.getPostsLikeStatus()}),100),n.$nextTick((function(){n.initWaterfall()}))),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(3),console.error("加载帖子失败",r.t0),n.loadingStatus="more";case 14:case"end":return r.stop()}}),r,null,[[3,10]])})))()},getPostsLikeStatus:function(){var n=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var t,e,o,c,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,localStorage.getItem("token")){r.next=3;break}return r.abrupt("return");case 3:if(t=n.posts.filter((function(n){return!n.is_liked_checked})),0!==t.length){r.next=6;break}return r.abrupt("return");case 6:e=m(t),r.prev=7,e.s();case 9:if((o=e.n()).done){r.next=24;break}return c=o.value,r.prev=11,r.next=14,n.$api.community.getLikeStatus({target_id:c.post_id,target_type:1});case 14:d=r.sent,c.is_liked=d.liked,c.is_liked_checked=!0,r.next=22;break;case 19:r.prev=19,r.t0=r.catch(11),console.error("获取帖子 ".concat(c.post_id," 点赞状态失败:"),r.t0);case 22:r.next=9;break;case 24:r.next=29;break;case 26:r.prev=26,r.t1=r.catch(7),e.e(r.t1);case 29:return r.prev=29,e.f(),r.finish(29);case 32:r.next=37;break;case 34:r.prev=34,r.t2=r.catch(0),console.error("获取点赞状态失败:",r.t2);case 37:case"end":return r.stop()}}),r,null,[[0,34],[7,26,29,32],[11,19]])})))()},changeSort:function(n){this.sortType!==n&&(this.sortType=n,this.page=1,this.posts=[],this.hasMore=!0,this.loadPosts())},formatTime:function(time){var n=v()(),r=v()(time),t=n.diff(r,"minutes");if(t<1)return"刚刚";if(t<60)return"".concat(t,"分钟前");var e=n.diff(r,"hours");if(e<24)return"".concat(e,"小时前");var o=n.diff(r,"days");return o<30?"".concat(o,"天前"):r.format("YYYY-MM-DD")},navigateToSearch:function(){this.$router.push("/community/search?origin=community")},navigateToCircles:function(){this.$router.push("/community/circles")},navigateToCircle:function(n){n&&0!==n?this.$router.push("/community/circle/".concat(n)):this.$message.warning("圈子不存在")},navigateToPost:function(n){this.$router.push("/community/post/".concat(n))},navigateToUser:function(n){this.$router.push("/users/".concat(n))},navigateToCreatePost:function(){this.$router.push("/community/post/edit")},loadMore:function(){this.hasMore&&this.loadPosts()},previewImage:function(n,r){console.log("预览图片:",n,r)},likePost:function(n){var r=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r.$auth.getToken()){t.next=5;break}return r.$message.warning("请先登录"),t.abrupt("return");case 5:return t.next=7,r.$api.community.likePost({target_id:n.post_id,target_type:1});case 7:void 0!==(null==(e=t.sent)?void 0:e.liked)?(n.is_liked=e.liked,n.like_count+=n.is_liked?1:-1):(n.is_liked=!n.is_liked,n.like_count+=n.is_liked?1:-1),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.error("点赞失败",t.t0),r.$message.error("操作失败");case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},sharePost:function(n){var r=this,t="".concat(window.location.origin,"/community/post/").concat(n.post_id);navigator.clipboard.writeText(t).then((function(){r.$message.success("链接已复制到剪贴板")})).catch((function(){r.$message.error("复制失败")}))},gotoMessage:function(){this.$router.push("/community/message")},getCircleId:function(n){var r;return(null===(r=this.recommendCircles)||void 0===r||null===(r=r[n])||void 0===r?void 0:r.circle_id)||0},getCircleImage:function(n){var r,circle=null===(r=this.recommendCircles)||void 0===r?void 0:r[n];return(null==circle?void 0:circle.bg_url)||(null==circle?void 0:circle.icon)||"/static/default-circle.png"},getCircleIcon:function(n){var r;return(null===(r=this.recommendCircles)||void 0===r||null===(r=r[n])||void 0===r?void 0:r.icon)||"/static/default-circle.png"},getCircleName:function(n){var r;return(null===(r=this.recommendCircles)||void 0===r||null===(r=r[n])||void 0===r?void 0:r.name)||"未知圈子"},getCircleMemberCount:function(n){var r;return(null===(r=this.recommendCircles)||void 0===r||null===(r=r[n])||void 0===r?void 0:r.member_count)||0},hasCircle:function(n){var r,circle=null===(r=this.recommendCircles)||void 0===r?void 0:r[n];return circle&&circle.circle_id&&0!==circle.circle_id},initWaterfall:function(){var n=this;this.$nextTick((function(){n.adjustWaterfallLayout()}))},adjustWaterfallLayout:function(){"undefined"!=typeof window&&window.addEventListener("resize",this.handleResize)},handleResize:function(){var n=this;clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((function(){n.initWaterfall()}),300)}}},x=(t(542),t(12)),component=Object(x.a)(h,(function(){var n=this,r=n._self._c;return r("div",{staticClass:"community-page"},[n.swiperItems&&n.swiperItems.length>0?r("div",{staticClass:"swiper-section"},[r("Banner",{attrs:{banners:n.swiperItems,page:"community_index"}})],1):n._e(),n._v(" "),n.recommendCircles&&n.recommendCircles.length>0?r("div",{staticClass:"section"},[r("div",{staticClass:"section-header"},[r("h3",{staticClass:"section-title"},[n._v("推荐圈子")]),n._v(" "),r("span",{staticClass:"section-more",on:{click:n.navigateToCircles}},[n._v("更多")])]),n._v(" "),r("div",{staticClass:"circles-grid"},[n.hasCircle(0)?r("div",{staticClass:"circle-main",on:{click:function(r){n.navigateToCircle(n.getCircleId(0))}}},[r("img",{staticClass:"circle-bg",attrs:{src:n.getCircleImage(0),alt:"圈子背景"}}),n._v(" "),r("div",{staticClass:"circle-info"},[r("img",{staticClass:"circle-icon",attrs:{src:n.getCircleIcon(0),alt:"圈子图标"}}),n._v(" "),r("div",{staticClass:"circle-details"},[r("h4",[n._v(n._s(n.getCircleName(0)))]),n._v(" "),r("span",[n._v(n._s(n.getCircleMemberCount(0))+"人")])])])]):n._e(),n._v(" "),r("div",{staticClass:"circles-side"},[n.hasCircle(1)?r("div",{staticClass:"side-circle",on:{click:function(r){n.navigateToCircle(n.getCircleId(1))}}},[r("img",{attrs:{src:n.getCircleIcon(1),alt:"圈子图标"}}),n._v(" "),r("div",[r("h5",[n._v(n._s(n.getCircleName(1)))]),n._v(" "),r("span",[n._v(n._s(n.getCircleMemberCount(1))+"人")])])]):n._e(),n._v(" "),n.hasCircle(2)?r("div",{staticClass:"side-circle",on:{click:function(r){n.navigateToCircle(n.getCircleId(2))}}},[r("img",{attrs:{src:n.getCircleIcon(2),alt:"圈子图标"}}),n._v(" "),r("div",[r("h5",[n._v(n._s(n.getCircleName(2)))]),n._v(" "),r("span",[n._v(n._s(n.getCircleMemberCount(2))+"人")])])]):n._e(),n._v(" "),r("div",{staticClass:"all-circles",on:{click:n.navigateToCircles}},[r("span",[n._v("全部圈子")]),n._v(" "),r("i",{staticClass:"el-icon-arrow-right"})])])])]):n._e(),n._v(" "),r("div",{staticClass:"section"},[r("div",{staticClass:"section-header"},[r("h3",{staticClass:"section-title"},[n._v("帖子")]),n._v(" "),r("div",{staticClass:"header-actions"},[r("div",{staticClass:"sort-buttons"},[r("button",{class:["sort-btn",{active:"hot"===n.sortType}],on:{click:function(r){return n.changeSort("hot")}}},[n._v("热门")]),n._v(" "),r("button",{class:["sort-btn",{active:"new"===n.sortType}],on:{click:function(r){return n.changeSort("new")}}},[n._v("最新")])]),n._v(" "),r("div",{staticClass:"create-post-btn",on:{click:n.navigateToCreatePost}},[r("i",{staticClass:"el-icon-plus"}),n._v(" "),r("span",[n._v("发布")])])])]),n._v(" "),r("div",{staticClass:"posts-list"},n._l(n.posts||[],(function(t,e){return r("div",{key:e,staticClass:"post-card",on:{click:function(r){return n.navigateToPost(t.post_id)}}},[r("div",{staticClass:"post-header"},[r("div",{staticClass:"user-info",on:{click:function(r){return r.stopPropagation(),n.navigateToUser(t.user_id)}}},[r("img",{staticClass:"user-avatar",attrs:{src:t.author_avatar,alt:"用户头像"}}),n._v(" "),r("div",{staticClass:"user-meta"},[r("span",{staticClass:"user-name"},[n._v(n._s(t.author_name))]),n._v(" "),r("span",{staticClass:"post-time"},[n._v(n._s(n.formatTime(t.create_time)))])])]),n._v(" "),r("div",{staticClass:"post-circle",on:{click:function(r){return r.stopPropagation(),n.navigateToCircle(t.circle_id)}}},[n._v("\n            "+n._s(t.circle_name)+"\n          ")])]),n._v(" "),r("div",{staticClass:"post-content"},[r("h4",{staticClass:"post-title"},[n._v(n._s(t.title))]),n._v(" "),r("p",{staticClass:"post-text"},[n._v(n._s(t.content))])]),n._v(" "),t.media_urls&&t.media_urls.length>0?r("div",{staticClass:"post-images"},[r("div",{class:["image-grid","grid-"+(t.media_urls.length>3?"multi":t.media_urls.length)]},[n._l(t.media_urls.slice(0,9),(function(img,e){return r("img",{key:e,staticClass:"post-image",attrs:{src:img,alt:"帖子图片"},on:{click:function(r){return r.stopPropagation(),n.previewImage(t.media_urls,e)}}})})),n._v(" "),t.media_urls.length>9?r("div",{staticClass:"image-count"},[n._v("+"+n._s(t.media_urls.length-9))]):n._e()],2)]):n._e(),n._v(" "),r("div",{staticClass:"post-footer"},[r("div",{staticClass:"action-btn"},[r("i",{staticClass:"el-icon-chat-dot-round"}),n._v(" "),r("span",[n._v(n._s(t.comment_count||0))])]),n._v(" "),r("div",{staticClass:"action-btn",class:{liked:t.is_liked},on:{click:function(r){return r.stopPropagation(),n.likePost(t)}}},[r("i",{class:t.is_liked?"el-icon-star-on":"el-icon-star-off",style:{color:t.is_liked?"#EA7034":"#666"}}),n._v(" "),r("span",{class:{liked:t.is_liked}},[n._v(n._s(t.like_count||0))])]),n._v(" "),r("div",{staticClass:"action-btn",on:{click:function(r){return r.stopPropagation(),n.sharePost(t)}}},[r("i",{staticClass:"el-icon-share"}),n._v(" "),r("span",[n._v("分享")])])])])})),0),n._v(" "),n.hasMore?r("div",{staticClass:"load-more"},[r("el-button",{attrs:{loading:"loading"===n.loadingStatus},on:{click:n.loadMore}},[n._v("加载更多")])],1):n.posts&&n.posts.length>0?r("div",{staticClass:"no-more"},[r("span",[n._v("没有更多内容了")])]):n._e()])])}),[],!1,null,"1c51992d",null);r.default=component.exports}}]);