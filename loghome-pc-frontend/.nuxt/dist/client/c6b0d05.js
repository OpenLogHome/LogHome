(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{504:function(e,t,n){var map={"./af":363,"./af.js":363,"./ar":364,"./ar-dz":365,"./ar-dz.js":365,"./ar-kw":366,"./ar-kw.js":366,"./ar-ly":367,"./ar-ly.js":367,"./ar-ma":368,"./ar-ma.js":368,"./ar-ps":369,"./ar-ps.js":369,"./ar-sa":370,"./ar-sa.js":370,"./ar-tn":371,"./ar-tn.js":371,"./ar.js":364,"./az":372,"./az.js":372,"./be":373,"./be.js":373,"./bg":374,"./bg.js":374,"./bm":375,"./bm.js":375,"./bn":376,"./bn-bd":377,"./bn-bd.js":377,"./bn.js":376,"./bo":378,"./bo.js":378,"./br":379,"./br.js":379,"./bs":380,"./bs.js":380,"./ca":381,"./ca.js":381,"./cs":382,"./cs.js":382,"./cv":383,"./cv.js":383,"./cy":384,"./cy.js":384,"./da":385,"./da.js":385,"./de":386,"./de-at":387,"./de-at.js":387,"./de-ch":388,"./de-ch.js":388,"./de.js":386,"./dv":389,"./dv.js":389,"./el":390,"./el.js":390,"./en-au":391,"./en-au.js":391,"./en-ca":392,"./en-ca.js":392,"./en-gb":393,"./en-gb.js":393,"./en-ie":394,"./en-ie.js":394,"./en-il":395,"./en-il.js":395,"./en-in":396,"./en-in.js":396,"./en-nz":397,"./en-nz.js":397,"./en-sg":398,"./en-sg.js":398,"./eo":399,"./eo.js":399,"./es":400,"./es-do":401,"./es-do.js":401,"./es-mx":402,"./es-mx.js":402,"./es-us":403,"./es-us.js":403,"./es.js":400,"./et":404,"./et.js":404,"./eu":405,"./eu.js":405,"./fa":406,"./fa.js":406,"./fi":407,"./fi.js":407,"./fil":408,"./fil.js":408,"./fo":409,"./fo.js":409,"./fr":410,"./fr-ca":411,"./fr-ca.js":411,"./fr-ch":412,"./fr-ch.js":412,"./fr.js":410,"./fy":413,"./fy.js":413,"./ga":414,"./ga.js":414,"./gd":415,"./gd.js":415,"./gl":416,"./gl.js":416,"./gom-deva":417,"./gom-deva.js":417,"./gom-latn":418,"./gom-latn.js":418,"./gu":419,"./gu.js":419,"./he":420,"./he.js":420,"./hi":421,"./hi.js":421,"./hr":422,"./hr.js":422,"./hu":423,"./hu.js":423,"./hy-am":424,"./hy-am.js":424,"./id":425,"./id.js":425,"./is":426,"./is.js":426,"./it":427,"./it-ch":428,"./it-ch.js":428,"./it.js":427,"./ja":429,"./ja.js":429,"./jv":430,"./jv.js":430,"./ka":431,"./ka.js":431,"./kk":432,"./kk.js":432,"./km":433,"./km.js":433,"./kn":434,"./kn.js":434,"./ko":435,"./ko.js":435,"./ku":436,"./ku-kmr":437,"./ku-kmr.js":437,"./ku.js":436,"./ky":438,"./ky.js":438,"./lb":439,"./lb.js":439,"./lo":440,"./lo.js":440,"./lt":441,"./lt.js":441,"./lv":442,"./lv.js":442,"./me":443,"./me.js":443,"./mi":444,"./mi.js":444,"./mk":445,"./mk.js":445,"./ml":446,"./ml.js":446,"./mn":447,"./mn.js":447,"./mr":448,"./mr.js":448,"./ms":449,"./ms-my":450,"./ms-my.js":450,"./ms.js":449,"./mt":451,"./mt.js":451,"./my":452,"./my.js":452,"./nb":453,"./nb.js":453,"./ne":454,"./ne.js":454,"./nl":455,"./nl-be":456,"./nl-be.js":456,"./nl.js":455,"./nn":457,"./nn.js":457,"./oc-lnc":458,"./oc-lnc.js":458,"./pa-in":459,"./pa-in.js":459,"./pl":460,"./pl.js":460,"./pt":461,"./pt-br":462,"./pt-br.js":462,"./pt.js":461,"./ro":463,"./ro.js":463,"./ru":464,"./ru.js":464,"./sd":465,"./sd.js":465,"./se":466,"./se.js":466,"./si":467,"./si.js":467,"./sk":468,"./sk.js":468,"./sl":469,"./sl.js":469,"./sq":470,"./sq.js":470,"./sr":471,"./sr-cyrl":472,"./sr-cyrl.js":472,"./sr.js":471,"./ss":473,"./ss.js":473,"./sv":474,"./sv.js":474,"./sw":475,"./sw.js":475,"./ta":476,"./ta.js":476,"./te":477,"./te.js":477,"./tet":478,"./tet.js":478,"./tg":479,"./tg.js":479,"./th":480,"./th.js":480,"./tk":481,"./tk.js":481,"./tl-ph":482,"./tl-ph.js":482,"./tlh":483,"./tlh.js":483,"./tr":484,"./tr.js":484,"./tzl":485,"./tzl.js":485,"./tzm":486,"./tzm-latn":487,"./tzm-latn.js":487,"./tzm.js":486,"./ug-cn":488,"./ug-cn.js":488,"./uk":489,"./uk.js":489,"./ur":490,"./ur.js":490,"./uz":491,"./uz-latn":492,"./uz-latn.js":492,"./uz.js":491,"./vi":493,"./vi.js":493,"./x-pseudo":494,"./x-pseudo.js":494,"./yo":495,"./yo.js":495,"./zh-cn":496,"./zh-cn.js":496,"./zh-hk":497,"./zh-hk.js":497,"./zh-mo":498,"./zh-mo.js":498,"./zh-tw":499,"./zh-tw.js":499};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}r.keys=function(){return Object.keys(map)},r.resolve=o,e.exports=r,r.id=504},530:function(e,t,n){var content=n(589);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(26).default)("f164b5b2",content,!0,{sourceMap:!1})},588:function(e,t,n){"use strict";n(530)},589:function(e,t,n){var r=n(25)(!1);r.push([e.i,"\n.post-detail-page[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 20px;\r\n  background-color: #f5f5f5;\n}\n.post-detail-container[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  width: 100%;\r\n  max-width: 1200px;\r\n  gap: 20px;\n}\n.post-detail-main[data-v-fd7f0c4e] {\r\n  flex: 1;\r\n  min-width: 0;\n}\n.comments-section-sidebar[data-v-fd7f0c4e] {\r\n  width: 400px;\r\n  flex-shrink: 0;\n}\n.post-detail[data-v-fd7f0c4e] {\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  padding: 24px;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n}\n.comments-section[data-v-fd7f0c4e] {\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  padding: 24px;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n}\r\n\r\n/* 帖子头部 */\n.post-header[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\n}\n.user-info[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\n}\n.user-avatar[data-v-fd7f0c4e] {\r\n  width: 48px;\r\n  height: 48px;\r\n  border-radius: 50%;\r\n  margin-right: 12px;\r\n  object-fit: cover;\n}\n.user-meta[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  flex-direction: column;\n}\n.user-name[data-v-fd7f0c4e] {\r\n  font-weight: bold;\r\n  color: #333;\n}\n.post-time[data-v-fd7f0c4e] {\r\n  font-size: 12px;\r\n  color: #999;\n}\n.post-circle[data-v-fd7f0c4e] {\r\n  background-color: #f0f2f5;\r\n  color: #666;\r\n  padding: 6px 12px;\r\n  border-radius: 16px;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\n}\n.post-circle[data-v-fd7f0c4e]:hover {\r\n  background-color: #e4e6e9;\n}\r\n\r\n/* 帖子内容 */\n.post-content[data-v-fd7f0c4e] {\r\n  margin-bottom: 24px;\n}\n.post-title[data-v-fd7f0c4e] {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  margin-bottom: 16px;\r\n  color: #333;\n}\n.post-text[data-v-fd7f0c4e] {\r\n  font-size: 16px;\r\n  line-height: 1.8;\r\n  color: #555;\r\n  white-space: pre-wrap;\n}\r\n\r\n/* 帖子图片 */\n.post-images[data-v-fd7f0c4e] {\r\n  margin-bottom: 24px;\n}\n.image-grid[data-v-fd7f0c4e] {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\r\n  gap: 10px;\n}\n.post-image[data-v-fd7f0c4e] {\r\n  width: 100%;\r\n  height: auto;\r\n  aspect-ratio: 1 / 1;\r\n  object-fit: cover;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: transform 0.3s;\n}\n.post-image[data-v-fd7f0c4e]:hover {\r\n  transform: scale(1.05);\n}\r\n\r\n/* 绑定作品 */\n.linked-book[data-v-fd7f0c4e] {\r\n  margin-bottom: 24px;\n}\n.book-card[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  background-color: #f9f9f9;\r\n  border: 1px solid #eee;\r\n  border-radius: 8px;\r\n  padding: 16px;\r\n  cursor: pointer;\r\n  transition: box-shadow 0.3s;\n}\n.book-card[data-v-fd7f0c4e]:hover {\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.05);\n}\n.book-cover[data-v-fd7f0c4e] {\r\n  width: 80px;\r\n  height: 112px;\r\n  object-fit: cover;\r\n  border-radius: 4px;\r\n  margin-right: 16px;\n}\n.book-info[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\n}\n.book-name[data-v-fd7f0c4e] {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin: 0 0 8px;\n}\n.book-author[data-v-fd7f0c4e] {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin: 0 0 8px;\n}\n.book-desc[data-v-fd7f0c4e] {\r\n  font-size: 14px;\r\n  color: #999;\r\n  margin: 0;\r\n  line-height: 1.5;\n}\r\n\r\n/* 帖子操作 */\n.post-actions[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 24px;\r\n  border-top: 1px solid #f0f0f0;\r\n  padding-top: 16px;\n}\n.action-btn[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  color: #666;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  transition: color 0.3s;\n}\n.action-btn[data-v-fd7f0c4e]:hover,\r\n.action-btn.liked[data-v-fd7f0c4e] {\r\n  color: #EA7034;\n}\n.action-btn i[data-v-fd7f0c4e] {\r\n  font-size: 20px;\n}\n.post-owner-actions[data-v-fd7f0c4e] {\r\n  margin-left: auto;\n}\r\n\r\n/* 评论区 */\n.comments-title[data-v-fd7f0c4e] {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  margin-bottom: 20px;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  padding-bottom: 10px;\n}\n.comment-input-container[data-v-fd7f0c4e] {\r\n  margin-bottom: 24px;\n}\n.comment-actions[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 10px;\n}\n.comments-list[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\n}\n.comment-item[data-v-fd7f0c4e] {\r\n  padding-bottom: 16px;\r\n  border-bottom: 1px solid #f0f0f0;\n}\n.comment-item[data-v-fd7f0c4e]:last-child {\r\n  border-bottom: none;\n}\n.comment-header[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 12px;\n}\n.user-avatar-small[data-v-fd7f0c4e] {\r\n  width: 24px;\r\n  height: 24px;\r\n  border-radius: 50%;\r\n  margin-right: 8px;\n}\n.comment-time[data-v-fd7f0c4e], .reply-time[data-v-fd7f0c4e] {\r\n  font-size: 12px;\r\n  color: #999;\n}\n.comment-content[data-v-fd7f0c4e], .reply-content[data-v-fd7f0c4e] {\r\n  font-size: 15px;\r\n  color: #555;\r\n  line-height: 1.7;\r\n  margin-left: 56px; /* 48px avatar + 8px margin */\r\n  white-space: pre-wrap;\n}\n.reply-content[data-v-fd7f0c4e] {\r\n  margin-left: 32px; /* 24px avatar + 8px margin */\n}\n.reply-to[data-v-fd7f0c4e] {\r\n  color: #007bff;\r\n  margin-right: 4px;\n}\n.comment-footer[data-v-fd7f0c4e], .reply-footer[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n  margin-top: 12px;\r\n  margin-left: 56px;\n}\n.reply-footer[data-v-fd7f0c4e] {\r\n  margin-left: 32px;\n}\n.replies-list[data-v-fd7f0c4e] {\r\n  margin-top: 16px;\r\n  margin-left: 56px;\r\n  padding-left: 16px;\r\n  border-left: 2px solid #f0f0f0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\n}\n.reply-item[data-v-fd7f0c4e] {\r\n  /* No extra styling needed now */\n}\n.load-more-replies[data-v-fd7f0c4e] {\r\n  font-size: 14px;\r\n  color: #007bff;\r\n  cursor: pointer;\r\n  margin-top: 10px;\n}\n.reply-input-container[data-v-fd7f0c4e] {\r\n  margin-top: 16px;\r\n  margin-left: 56px;\n}\n.reply-actions[data-v-fd7f0c4e] {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 8px;\r\n  gap: 8px;\n}\n.no-comments[data-v-fd7f0c4e] {\r\n  text-align: center;\r\n  color: #999;\r\n  padding: 40px 0;\n}\n.no-comments i[data-v-fd7f0c4e] {\r\n  font-size: 48px;\r\n  margin-bottom: 16px;\n}\n.load-more[data-v-fd7f0c4e] {\r\n  text-align: center;\r\n  margin-top: 24px;\n}\r\n\r\n/* 分享对话框 */\n.share-dialog-content[data-v-fd7f0c4e] {\r\n  text-align: center;\n}\n.share-text[data-v-fd7f0c4e] {\r\n  margin-bottom: 16px;\r\n  white-space: pre-wrap;\r\n  word-break: break-all;\r\n  text-align: left;\r\n  background-color: #f5f5f5;\r\n  padding: 10px;\r\n  border-radius: 4px;\n}\n.share-actions[data-v-fd7f0c4e] {\r\n  margin-top: 16px;\n}\r\n",""]),e.exports=r},632:function(e,t,n){"use strict";n.r(t);n(27),n(28),n(10),n(17),n(41),n(34),n(35),n(20),n(18),n(36),n(37);var r=n(502),o=n(9),c=n(0),l=(n(150),n(227),n(6),n(359)),m=n.n(l);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,a){if(e){if("string"==typeof e)return _(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,a):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw c}}}}function _(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=Array(a);t<a;t++)n[t]=e[t];return n}var h={head:function(){return{title:this.post?"".concat(this.post.title," - LogHome社区"):"LogHome社区",meta:[{hid:"description",name:"description",content:this.post?"".concat(this.post.content.substring(0,100),"..."):"LogHome社区帖子详情"}]}},asyncData:function(e){return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l,m,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.params,r=e.$api,o=e.error,t.prev=1,c=n.id,t.next=5,r.community.getPostDetail({post_id:c});case 5:return l=t.sent,t.next=8,r.community.getComments({post_id:c,page:1,pageSize:10});case 8:return m=t.sent,(d=m.list||[]).forEach((function(e){e.replies||(e.replies=[]),e.image_url?e.media_urls=[e.image_url]:e.media_urls=[],e.replies&&e.replies.length>0&&e.replies.forEach((function(e){e.image_url?e.media_urls=[e.image_url]:e.media_urls=[]}))})),t.abrupt("return",{post:l,comments:d,commentPage:1,hasMoreComments:m.has_more||!1,totalComments:m.total||0});case 14:return t.prev=14,t.t0=t.catch(1),console.error("获取帖子详情失败:",t.t0),o({statusCode:404,message:"帖子不存在或已被删除"}),t.abrupt("return",{});case 19:case"end":return t.stop()}}),t,null,[[1,14]])})))()},data:function(){return{commentContent:"",replyContent:"",replyingTo:null,isSubmitting:!1,loadingComments:!1,shareDialogVisible:!1,shareText:"",currentUserId:null,isLogin:!1,userInfo:null,userRole:-1}},computed:{isPostOwner:function(){return this.currentUserId&&this.post&&this.currentUserId===this.post.user_id},canDeletePost:function(){return!(!this.userInfo||!this.post)&&(1==this.userInfo.is_admin||this.userInfo.user_id==this.post.user_id||1==this.userRole||2==this.userRole)},canEditPost:function(){return!(!this.userInfo||!this.post)&&(console.log(this.userInfo),this.userInfo.user_id==this.post.user_id)}},mounted:function(){this.checkLoginStatus(),this.getPostLikeStatus(),this.getCommentsLikeStatus(),this.loadInitialReplies(),this.getUserRole()},methods:Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({checkLoginStatus:function(){try{var e=localStorage.getItem("token");this.isLogin=!!e,this.isLogin&&this.getUserInfo()}catch(e){console.error("检查登录状态失败:",e),this.isLogin=!1}},getUserInfo:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.users.getUserProfile();case 3:n=t.sent,e.userInfo=n,e.currentUserId=n.user_id,localStorage.setItem("userInfo",JSON.stringify(n)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("获取用户信息失败:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},formatTime:function(time){var e=m()(),t=m()(time),n=e.diff(t,"minutes");if(n<1)return"刚刚";if(n<60)return"".concat(n,"分钟前");var r=e.diff(t,"hours");if(r<24)return"".concat(r,"小时前");var o=e.diff(t,"days");return o<30?"".concat(o,"天前"):t.format("YYYY-MM-DD")},navigateToUser:function(e){this.$router.push("/users/".concat(e))},navigateToCircle:function(e){this.$router.push("/community/circle/".concat(e))},navigateToNovel:function(e){this.$router.push("/novel/".concat(e))},previewImage:function(e,t){this.$createElement;this.$imagePreview({images:e,index:t})},getPostLikeStatus:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.isLogin&&e.post){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$api.community.getLikeStatus({target_id:e.post.post_id,target_type:1});case 5:n=t.sent,e.$set(e.post,"is_liked",n.liked),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("获取帖子点赞状态失败:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getCommentsLikeStatus:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l,m,d,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.isLogin&&e.comments.length){t.next=3;break}return t.abrupt("return");case 3:n=v(e.comments),t.prev=4,n.s();case 6:if((r=n.n()).done){t.next=46;break}return o=r.value,t.prev=8,t.next=11,e.$api.community.getLikeStatus({target_id:o.comment_id,target_type:2});case 11:if(c=t.sent,e.$set(o,"is_liked",c.liked),!o.replies||!o.replies.length){t.next=39;break}l=v(o.replies),t.prev=15,l.s();case 17:if((m=l.n()).done){t.next=31;break}return d=m.value,t.prev=19,t.next=22,e.$api.community.getLikeStatus({target_id:d.comment_id,target_type:2});case 22:f=t.sent,e.$set(d,"is_liked",f.liked),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(19),console.error("获取回复 ".concat(d.comment_id," 点赞状态失败:"),t.t0);case 29:t.next=17;break;case 31:t.next=36;break;case 33:t.prev=33,t.t1=t.catch(15),l.e(t.t1);case 36:return t.prev=36,l.f(),t.finish(36);case 39:t.next=44;break;case 41:t.prev=41,t.t2=t.catch(8),console.error("获取评论 ".concat(o.comment_id," 点赞状态失败:"),t.t2);case 44:t.next=6;break;case 46:t.next=51;break;case 48:t.prev=48,t.t3=t.catch(4),n.e(t.t3);case 51:return t.prev=51,n.f(),t.finish(51);case 54:t.next=59;break;case 56:t.prev=56,t.t4=t.catch(0),console.error("获取评论点赞状态失败:",t.t4);case 59:case"end":return t.stop()}}),t,null,[[0,56],[4,48,51,54],[8,41],[15,33,36,39],[19,26]])})))()},likePost:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.isLogin){t.next=4;break}return e.$message.warning("请先登录"),t.abrupt("return");case 4:return n=e.post.is_liked?"unlike":"like",t.next=7,e.$api.community.likeTarget({target_id:e.post.post_id,target_type:1,action:n});case 7:e.$set(e.post,"is_liked",!e.post.is_liked),e.$set(e.post,"like_count",e.post.is_liked?(e.post.like_count||0)+1:Math.max((e.post.like_count||0)-1,0)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.error("点赞操作失败:",t.t0),e.$message.error("操作失败，请稍后重试");case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},likeComment:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t.isLogin){n.next=4;break}return t.$message.warning("请先登录"),n.abrupt("return");case 4:return r=e.is_liked?"unlike":"like",n.next=7,t.$api.community.likeTarget({target_id:e.comment_id,target_type:2,action:r});case 7:t.$set(e,"is_liked",!e.is_liked),t.$set(e,"like_count",e.is_liked?(e.like_count||0)+1:Math.max((e.like_count||0)-1,0)),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.error("点赞评论失败:",n.t0),t.$message.error("操作失败，请稍后重试");case 15:case"end":return n.stop()}}),n,null,[[0,11]])})))()},sharePost:function(){var e="".concat(window.location.origin,"/community/post/").concat(this.post.post_id);this.shareText="来自LogHome社区的分享：".concat(this.post.title,"\n").concat(this.post.content.substring(0,50)).concat(this.post.content.length>50?"...":"","\n点击链接查看详情：").concat(e),this.shareDialogVisible=!0},editPost:function(){this.$router.push({path:"/community/post/edit",query:{post_id:this.post.post_id}})},getUserRole:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,circle;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.isLogin&&e.post&&e.post.circle_id){t.next=4;break}return e.userRole=0,t.abrupt("return");case 4:return t.next=6,e.$api.community.getMyCircles();case 6:(n=t.sent)&&n.length>0?(circle=n.find((function(t){return t.circle_id==e.post.circle_id})),e.userRole=circle?circle.role:0):e.userRole=0,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.error("获取用户角色失败:",t.t0),e.userRole=0;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},confirmDeletePost:function(){var e=this;this.$confirm("确定要删除该帖子吗？","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e.post),t.next=4,e.$api.community.deletePost(e.post.post_id);case 4:e.$message.success("删除成功"),setTimeout((function(){e.$router.go(-1)}),1200),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("删除帖子失败:",t.t0),e.$message.error("删除失败，请稍后重试");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))).catch((function(){}))},copyShareText:function(){var textarea=document.createElement("textarea");textarea.value=this.shareText,document.body.appendChild(textarea),textarea.select(),document.execCommand("copy"),document.body.removeChild(textarea),this.$message.success("已复制到剪贴板"),this.shareDialogVisible=!1},toggleCommentInput:function(){var e=this;this.$refs.commentInput&&(this.$refs.commentInput.scrollIntoView({behavior:"smooth"}),setTimeout((function(){var textarea=e.$refs.commentInput.querySelector("textarea");textarea&&textarea.focus()}),300))},submitComment:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.isLogin){t.next=4;break}return e.$message.warning("请先登录"),t.abrupt("return");case 4:if(e.commentContent.trim()){t.next=7;break}return e.$message.warning("评论内容不能为空"),t.abrupt("return");case 7:return e.isSubmitting=!0,t.next=10,e.$api.community.createComment({post_id:e.post.post_id,content:e.commentContent.trim()});case 10:n=t.sent,r=f(f({},n.comment),{},{user_name:n.comment.user_name||e.userInfo.nickname,user_avatar:n.comment.user_avatar||e.userInfo.avatar_url,create_time:n.comment.create_time||(new Date).toISOString(),like_count:n.comment.like_count||0,is_liked:!1,replies:[]}),e.comments.unshift(r),e.$set(e.post,"comment_count",(e.post.comment_count||0)+1),e.commentContent="",e.$message.success("评论成功"),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),console.error("发表评论失败:",t.t0),e.$message.error("评论失败，请稍后重试");case 22:return t.prev=22,e.isSubmitting=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[0,18,22,25]])})))()},replyToComment:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isLogin){var r=n||e;this.replyingTo={comment_id:r.comment_id,parent_id:r.comment_id,reply_to_comment_id:e.comment_id,reply_to_user_id:e.user_id,reply_user_name:e.user_name},this.$nextTick((function(){var e=t.$el.querySelector('.comment-item[data-comment-id="'.concat(r.comment_id,'"] .reply-input-container'));e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((function(){var textarea=e.querySelector("textarea");textarea&&textarea.focus()}),300))}))}else this.$message.warning("请先登录")},cancelReply:function(){this.replyingTo=null,this.replyContent=""},submitReply:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.isLogin){t.next=4;break}return e.$message.warning("请先登录"),t.abrupt("return");case 4:if(e.replyContent.trim()){t.next=7;break}return e.$message.warning("回复内容不能为空"),t.abrupt("return");case 7:return e.isSubmitting=!0,t.next=10,e.$api.community.createComment({post_id:e.post.post_id,content:e.replyContent.trim(),parent_id:e.replyingTo.parent_id,reply_to_comment_id:e.replyingTo.reply_to_comment_id});case 10:n=t.sent,(r=e.comments.find((function(t){return t.comment_id===e.replyingTo.parent_id})))&&(o=f(f({},n.comment),{},{user_name:n.comment.user_name||e.userInfo.nickname,user_avatar:n.comment.user_avatar||e.userInfo.avatar_url,create_time:n.comment.create_time||(new Date).toISOString(),like_count:n.comment.like_count||0,is_liked:!1,reply_user_name:e.replyingTo.reply_user_name}),r.replies||e.$set(r,"replies",[]),r.replies.push(o)),e.$set(e.post,"comment_count",(e.post.comment_count||0)+1),e.cancelReply(),e.$message.success("回复成功"),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),console.error("发表回复失败:",t.t0),e.$message.error("回复失败，请稍后重试");case 22:return t.prev=22,e.isSubmitting=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[0,18,22,25]])})))()},loadMoreComments:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loadingComments){t.next=2;break}return t.abrupt("return");case 2:return e.loadingComments=!0,t.prev=3,o=e.commentPage+1,t.next=7,e.$api.community.getComments({post_id:e.post.post_id,page:o,pageSize:10});case 7:c=t.sent,(l=c.list||[]).forEach((function(e){e.replies||(e.replies=[])})),(n=e.comments).push.apply(n,Object(r.a)(l)),e.commentPage=o,e.hasMoreComments=c.has_more||!1,e.getCommentsLikeStatus(),e.loadInitialReplies(l),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(3),console.error("加载更多评论失败:",t.t0),e.$message.error("加载失败，请稍后重试");case 21:return t.prev=21,e.loadingComments=!1,t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[3,17,21,24]])})))()},loadInitialReplies:function(){var e=arguments,t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.length>0&&void 0!==e[0]?e[0]:t.comments,o=v(r),n.prev=2,o.s();case 4:if((c=o.n()).done){n.next=11;break}if(!((l=c.value).reply_count>0)||l.replies&&0!==l.replies.length){n.next=9;break}return n.next=9,t.loadMoreReplies(l,!0);case 9:n.next=4;break;case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(2),o.e(n.t0);case 16:return n.prev=16,o.f(),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[2,13,16,19]])})))()},loadMoreReplies:function(e){var t=arguments,n=this;return Object(c.a)(regeneratorRuntime.mark((function o(){var c,l,m,d,f,v;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=t.length>1&&void 0!==t[1]&&t[1],o.prev=1,l=c?1:(e.reply_page||1)+1,m=c?2:5,o.next=6,n.$api.community.getReplies({comment_id:e.comment_id,page:l,pageSize:m});case 6:d=o.sent,f=d.list||[],c?n.$set(e,"replies",f):(v=e.replies).push.apply(v,Object(r.a)(f)),n.$set(e,"reply_page",l),n.$set(e,"has_more_replies",d.has_more||!1),n.getCommentsLikeStatus(),o.next=17;break;case 14:o.prev=14,o.t0=o.catch(1),console.error("加载更多回复失败 (评论ID: ".concat(e.comment_id,"):"),o.t0);case 17:case"end":return o.stop()}}),o,null,[[1,14]])})))()},isCommentOwner:function(e){return this.currentUserId&&e&&this.currentUserId===e.user_id}},"editPost",(function(){this.$router.push("/community/post/edit?post_id=".concat(this.post.post_id))})),"deletePost",(function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.community.deletePost(e.post.post_id);case 3:e.$message.success("帖子删除成功"),e.$router.push("/community"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("删除帖子失败:",t.t0),e.$message.error("删除失败，请稍后重试");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()})),"confirmDeleteComment",(function(e){var t=this;this.$confirm("确定要删除这条评论吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteComment(e)})).catch((function(){}))})),"deleteComment",(function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$api.community.deleteComment({comment_id:e.comment_id});case 3:e.parent_id?(r=t.comments.find((function(t){return t.comment_id===e.parent_id})))&&r.replies&&(o=r.replies.findIndex((function(t){return t.comment_id===e.comment_id})))>-1&&r.replies.splice(o,1):(c=t.comments.findIndex((function(t){return t.comment_id===e.comment_id})))>-1&&t.comments.splice(c,1),t.$set(t.post,"comment_count",Math.max((t.post.comment_count||0)-1,0)),t.$message.success("评论删除成功"),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.error("删除评论失败:",n.t0),t.$message.error("删除失败，请稍后重试");case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()}))},x=h,k=(n(588),n(12)),component=Object(k.a)(x,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"post-detail-page"},[t("div",{staticClass:"post-detail-container"},[t("div",{staticClass:"post-detail-main"},[e.post?t("div",{staticClass:"post-detail"},[t("div",{staticClass:"post-header"},[t("div",{staticClass:"user-info",on:{click:function(t){return e.navigateToUser(e.post.user_id)}}},[t("img",{staticClass:"user-avatar",attrs:{src:e.post.author_avatar,alt:"用户头像"}}),e._v(" "),t("div",{staticClass:"user-meta"},[t("span",{staticClass:"user-name"},[e._v(e._s(e.post.author_name))]),e._v(" "),t("span",{staticClass:"post-time"},[e._v(e._s(e.formatTime(e.post.create_time)))])])]),e._v(" "),t("div",{staticClass:"post-circle",on:{click:function(t){return e.navigateToCircle(e.post.circle_id)}}},[e._v("\n            "+e._s(e.post.circle_name)+"\n          ")])]),e._v(" "),t("div",{staticClass:"post-content"},[t("h1",{staticClass:"post-title"},[e._v(e._s(e.post.title))]),e._v(" "),t("p",{staticClass:"post-text"},[e._v(e._s(e.post.content))])]),e._v(" "),e.post.media_urls&&e.post.media_urls.length>0?t("div",{staticClass:"post-images"},[t("div",{staticClass:"image-grid"},e._l(e.post.media_urls,(function(img,n){return t("img",{key:n,staticClass:"post-image",attrs:{src:img,alt:"帖子图片"},on:{click:function(t){return e.previewImage(e.post.media_urls,n)}}})})),0)]):e._e(),e._v(" "),e.post.novel_id&&e.post.novel?t("div",{staticClass:"linked-book"},[t("div",{staticClass:"book-card",on:{click:function(t){return e.navigateToNovel(e.post.novel_id)}}},[t("img",{staticClass:"book-cover",attrs:{src:e.post.novel.picUrl,alt:"作品封面"},on:{error:function(e){e.target.src="/static/default-book-cover.png"}}}),e._v(" "),t("div",{staticClass:"book-info"},[t("h4",{staticClass:"book-name"},[e._v(e._s(e.post.novel.name))]),e._v(" "),t("p",{staticClass:"book-author"},[e._v(e._s(e.post.novel.author_name))]),e._v(" "),t("p",{staticClass:"book-desc"},[e._v(e._s(e.post.novel.content&&e.post.novel.content.length>50?e.post.novel.content.substr(0,50)+"...":e.post.novel.content))])])])]):e._e(),e._v(" "),t("div",{staticClass:"post-actions"},[t("div",{staticClass:"action-btn",on:{click:e.toggleCommentInput}},[t("i",{staticClass:"el-icon-chat-dot-round"}),e._v(" "),t("span",[e._v(e._s(e.post.comment_count||0))])]),e._v(" "),t("div",{staticClass:"action-btn",class:{liked:e.post.is_liked},on:{click:e.likePost}},[t("i",{class:e.post.is_liked?"el-icon-star-on":"el-icon-star-off",style:{color:e.post.is_liked?"#EA7034":"#666"}}),e._v(" "),t("span",{class:{liked:e.post.is_liked}},[e._v(e._s(e.post.like_count||0))])]),e._v(" "),t("div",{staticClass:"action-btn",on:{click:e.sharePost}},[t("i",{staticClass:"el-icon-share"}),e._v(" "),t("span",[e._v("分享")])]),e._v(" "),e.canEditPost||e.canDeletePost?t("div",{staticClass:"post-owner-actions"},[e.canEditPost?t("el-button",{attrs:{size:"small",type:"text"},on:{click:e.editPost}},[e._v("编辑")]):e._e(),e._v(" "),e.canDeletePost?t("el-button",{attrs:{size:"small",type:"text"},on:{click:e.confirmDeletePost}},[e._v("删除")]):e._e()],1):e._e()])]):e._e()]),e._v(" "),t("div",{staticClass:"comments-section-sidebar"},[t("div",{staticClass:"comments-section"},[t("h3",{staticClass:"comments-title"},[e._v("评论 ("+e._s(e.post&&e.post.comment_count||0)+")")]),e._v(" "),t("div",{ref:"commentInput",staticClass:"comment-input-container"},[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"写下你的评论...",maxlength:500,"show-word-limit":""},model:{value:e.commentContent,callback:function(t){e.commentContent=t},expression:"commentContent"}}),e._v(" "),t("div",{staticClass:"comment-actions"},[t("el-button",{attrs:{type:"primary",disabled:!e.commentContent.trim()||e.isSubmitting},on:{click:e.submitComment}},[e._v("发布评论")])],1)],1),e._v(" "),e.comments.length>0?t("div",{staticClass:"comments-list"},e._l(e.comments,(function(n){return t("div",{key:n.comment_id,staticClass:"comment-item"},[t("div",{staticClass:"comment-header"},[t("div",{staticClass:"user-info",on:{click:function(t){return e.navigateToUser(n.user_id)}}},[t("img",{staticClass:"user-avatar",attrs:{src:n.user_avatar,alt:"用户头像"}}),e._v(" "),t("div",{staticClass:"user-meta"},[t("span",{staticClass:"user-name"},[e._v(e._s(n.user_name))]),e._v(" "),t("span",{staticClass:"comment-time"},[e._v(e._s(e.formatTime(n.create_time)))])])]),e._v(" "),t("div",{staticClass:"comment-actions"},[e.isCommentOwner(n)||e.isPostOwner?t("el-dropdown",{attrs:{trigger:"click"}},[t("span",{staticClass:"el-dropdown-link"},[t("i",{staticClass:"el-icon-more"})]),e._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.isCommentOwner(n)||e.isPostOwner?t("el-dropdown-item",{nativeOn:{click:function(t){return e.confirmDeleteComment(n)}}},[e._v("删除")]):e._e()],1)],1):e._e()],1)]),e._v(" "),t("div",{staticClass:"comment-content"},[e._v(e._s(n.content))]),e._v(" "),t("div",{staticClass:"comment-footer"},[t("div",{staticClass:"action-btn",class:{liked:n.is_liked},on:{click:function(t){return e.likeComment(n)}}},[t("i",{class:n.is_liked?"el-icon-star-on":"el-icon-star-off",style:{color:n.is_liked?"#EA7034":"#666"}}),e._v(" "),t("span",{class:{liked:n.is_liked}},[e._v(e._s(n.like_count||0))])]),e._v(" "),t("div",{staticClass:"action-btn",on:{click:function(t){return e.replyToComment(n)}}},[t("i",{staticClass:"el-icon-chat-dot-round"}),e._v(" "),t("span",[e._v("回复")])])]),e._v(" "),n.replies&&n.replies.length>0?t("div",{staticClass:"replies-list"},[e._l(n.replies,(function(r){return t("div",{key:r.comment_id,staticClass:"reply-item"},[t("div",{staticClass:"reply-header"},[t("div",{staticClass:"user-info",on:{click:function(t){return e.navigateToUser(r.user_id)}}},[t("img",{staticClass:"user-avatar-small",attrs:{src:r.user_avatar,alt:"用户头像"}}),e._v(" "),t("div",{staticClass:"user-meta"},[t("span",{staticClass:"user-name"},[e._v(e._s(r.user_name))]),e._v(" "),t("span",{staticClass:"reply-time"},[e._v(e._s(e.formatTime(r.create_time)))])])]),e._v(" "),t("div",{staticClass:"reply-actions"},[e.isCommentOwner(r)||e.isPostOwner?t("el-dropdown",{attrs:{trigger:"click"}},[t("span",{staticClass:"el-dropdown-link"},[t("i",{staticClass:"el-icon-more"})]),e._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.isCommentOwner(r)||e.isPostOwner?t("el-dropdown-item",{nativeOn:{click:function(t){return e.confirmDeleteComment(r)}}},[e._v("删除")]):e._e()],1)],1):e._e()],1)]),e._v(" "),t("div",{staticClass:"reply-content"},[r.reply_to_user_id&&r.reply_to_user_id!==n.user_id?t("span",{staticClass:"reply-to"},[e._v("回复 "+e._s(r.reply_user_name)+"：")]):e._e(),e._v("\n                  "+e._s(r.content)+"\n                ")]),e._v(" "),t("div",{staticClass:"reply-footer"},[t("div",{staticClass:"action-btn",class:{liked:r.is_liked},on:{click:function(t){return e.likeComment(r)}}},[t("i",{class:r.is_liked?"el-icon-star-on":"el-icon-star-off",style:{color:r.is_liked?"#EA7034":"#666"}}),e._v(" "),t("span",{class:{liked:r.is_liked}},[e._v(e._s(r.like_count||0))])]),e._v(" "),t("div",{staticClass:"action-btn",on:{click:function(t){return e.replyToComment(r,n)}}},[t("i",{staticClass:"el-icon-chat-dot-round"}),e._v(" "),t("span",[e._v("回复")])])])])})),e._v(" "),n.has_more_replies?t("div",{staticClass:"load-more-replies",on:{click:function(t){return e.loadMoreReplies(n)}}},[t("span",[e._v("加载更多回复")])]):e._e()],2):e._e(),e._v(" "),e.replyingTo&&e.replyingTo.comment_id===n.comment_id?t("div",{staticClass:"reply-input-container"},[t("el-input",{attrs:{type:"textarea",rows:1,placeholder:e.replyingTo.reply_user_name?"回复 ".concat(e.replyingTo.reply_user_name,"..."):"写下你的回复...",maxlength:500,"show-word-limit":""},model:{value:e.replyContent,callback:function(t){e.replyContent=t},expression:"replyContent"}}),e._v(" "),t("div",{staticClass:"reply-actions"},[t("el-button",{attrs:{size:"small"},on:{click:e.cancelReply}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{size:"small",type:"primary",disabled:!e.replyContent.trim()||e.isSubmitting},on:{click:e.submitReply}},[e._v("回复")])],1)],1):e._e()])})),0):t("div",{staticClass:"no-comments"},[t("i",{staticClass:"el-icon-chat-dot-round"}),e._v(" "),t("p",[e._v("暂无评论，快来发表第一条评论吧")])]),e._v(" "),e.hasMoreComments?t("div",{staticClass:"load-more"},[t("el-button",{attrs:{loading:e.loadingComments},on:{click:e.loadMoreComments}},[e._v("加载更多评论")])],1):e._e()])])]),e._v(" "),t("el-dialog",{attrs:{title:"分享帖子",visible:e.shareDialogVisible,width:"400px",center:""},on:{"update:visible":function(t){e.shareDialogVisible=t}}},[t("div",{staticClass:"share-dialog-content"},[t("p",{staticClass:"share-text"},[e._v(e._s(e.shareText))]),e._v(" "),t("el-input",{attrs:{type:"textarea",rows:4,readonly:""},model:{value:e.shareText,callback:function(t){e.shareText=t},expression:"shareText"}}),e._v(" "),t("div",{staticClass:"share-actions"},[t("el-button",{attrs:{type:"primary"},on:{click:e.copyShareText}},[e._v("复制链接")])],1)],1)])],1)}),[],!1,null,"fd7f0c4e",null);t.default=component.exports}}]);