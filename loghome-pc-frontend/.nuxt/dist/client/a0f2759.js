(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{502:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(106);var c=n(152),o=n(77);function l(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||Object(c.a)(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},517:function(t,e,n){var content=n(563);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(26).default)("072fb772",content,!0,{sourceMap:!1})},562:function(t,e,n){"use strict";n(517)},563:function(t,e,n){var r=n(25)(!1);r.push([t.i,"\n/* 变量定义 - 深棕色系 */\n[data-v-21909cc9]:root {\n  --primary-color: #947358;\n  --secondary-color: #704C35;\n  --text-color: #333;\n  --text-light: #666;\n  --text-lighter: #888;\n  --border-color: #eee;\n  --border-light: #f5f5f5;\n  --background-color: #fff;\n  --orange-color: #FB7D46;\n  --orange-dark: #fa6c2e;\n}\n.search-page[data-v-21909cc9] {\n  min-height: 100vh;\n  background: #f8f9fa;\n}\n\n/* 搜索头部 */\n.search-header[data-v-21909cc9] {\n  background: white;\n  border-bottom: 1px solid #e0e0e0;\n  padding: 20px 0;\n  position: sticky;\n  top: 60px;\n  z-index: 100;\n}\n.search-container[data-v-21909cc9] {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n  display: flex;\n  align-items: center;\n  gap: 15px;\n}\n.search-box[data-v-21909cc9] {\n  flex: 1;\n  max-width: 600px;\n  position: relative;\n  display: flex;\n  align-items: center;\n  background: #f5f5f5;\n  border-radius: 25px;\n  padding: 0 20px;\n  transition: all 0.3s;\n}\n.search-box[data-v-21909cc9]:focus-within {\n  background: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid #947358;\n}\n.search-icon[data-v-21909cc9] {\n  color: #999;\n  font-size: 18px;\n  margin-right: 10px;\n}\n.search-input[data-v-21909cc9] {\n  flex: 1;\n  border: none;\n  background: transparent;\n  outline: none;\n  padding: 12px 0;\n  font-size: 16px;\n  color: #333;\n}\n.search-input[data-v-21909cc9]::placeholder {\n  color: #999;\n}\n.search-clear[data-v-21909cc9] {\n  color: #999;\n  cursor: pointer;\n  font-size: 16px;\n  margin-left: 10px;\n  transition: color 0.3s;\n}\n.search-clear[data-v-21909cc9]:hover {\n  color: #666;\n}\n.search-btn[data-v-21909cc9] {\n  background: #947358;\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 20px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.3s;\n}\n.search-btn[data-v-21909cc9]:hover:not(:disabled) {\n  background: #704C35;\n}\n.search-btn[data-v-21909cc9]:disabled {\n  background: #c0c4cc;\n  cursor: not-allowed;\n}\n\n/* 搜索内容区域 */\n.search-content[data-v-21909cc9] {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 30px 20px;\n}\n\n/* 搜索前状态 */\n.search-before[data-v-21909cc9] {\n  max-width: 800px;\n  margin: 0 auto;\n}\n.search-section[data-v-21909cc9] {\n  margin-bottom: 40px;\n}\n.section-header[data-v-21909cc9] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n.section-title[data-v-21909cc9] {\n  font-size: 18px;\n  font-weight: 600;\n  color: #333;\n  margin: 0;\n}\n.clear-btn[data-v-21909cc9] {\n  background: none;\n  border: none;\n  color: #999;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-size: 14px;\n  transition: color 0.3s;\n}\n.clear-btn[data-v-21909cc9]:hover {\n  color: #666;\n}\n.tag-list[data-v-21909cc9] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n}\n.tag-item[data-v-21909cc9] {\n  background: white;\n  color: #666;\n  padding: 8px 16px;\n  border-radius: 20px;\n  font-size: 14px;\n  cursor: pointer;\n  border: 1px solid #e0e0e0;\n  transition: all 0.3s;\n}\n.tag-item[data-v-21909cc9]:hover {\n  background: #947358;\n  color: white;\n  border-color: #947358;\n}\n.hot-tag[data-v-21909cc9] {\n  background: linear-gradient(45deg, #704C35, #947358);\n  color: white;\n  border: none;\n}\n.hot-tag[data-v-21909cc9]:hover {\n  background: linear-gradient(45deg, #5D3C29, #A68B76);\n  transform: translateY(-2px);\n}\n\n/* 搜索后状态 */\n.search-stats[data-v-21909cc9] {\n  margin-bottom: 20px;\n  padding: 20px;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n.search-keyword[data-v-21909cc9] {\n  font-size: 18px;\n  font-weight: 600;\n  color: #947358;\n  margin-right: 15px;\n}\n.search-count[data-v-21909cc9] {\n  color: #666;\n  font-size: 14px;\n}\n\n/* 搜索类型切换 */\n.search-tabs[data-v-21909cc9] {\n  display: flex;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n  margin-bottom: 30px;\n  overflow: hidden;\n}\n.tab-item[data-v-21909cc9] {\n  flex: 1;\n  padding: 15px 20px;\n  cursor: pointer;\n  text-align: center;\n  border-bottom: 3px solid transparent;\n  transition: all 0.3s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 5px;\n}\n.tab-item[data-v-21909cc9]:hover {\n  background: #f8f9fa;\n}\n.tab-item.active[data-v-21909cc9] {\n  color: #947358;\n  border-bottom-color: #947358;\n  background: #f5f2ef;\n}\n.tab-name[data-v-21909cc9] {\n  font-weight: 500;\n}\n.tab-count[data-v-21909cc9] {\n  font-size: 12px;\n  color: #999;\n}\n.tab-item.active .tab-count[data-v-21909cc9] {\n  color: #947358;\n}\n\n/* 结果容器 */\n.results-container[data-v-21909cc9] {\n  min-height: 400px;\n}\n.loading[data-v-21909cc9] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  color: #666;\n  font-size: 16px;\n  gap: 10px;\n}\n.loading i[data-v-21909cc9] {\n  font-size: 20px;\n}\n\n/* 全部结果 */\n.result-section[data-v-21909cc9] {\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n  margin-bottom: 30px;\n  overflow: hidden;\n}\n.result-section .section-title[data-v-21909cc9] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #f0f0f0;\n  background: #f8f9fa;\n}\n.result-section .section-title h4[data-v-21909cc9] {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: #333;\n}\n.more-link[data-v-21909cc9] {\n  color: #947358;\n  text-decoration: none;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  transition: color 0.3s;\n}\n.more-link[data-v-21909cc9]:hover {\n  color: #704C35;\n}\n\n/* 书籍结果 */\n.book-grid[data-v-21909cc9] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n  padding: 20px;\n}\n.book-item[data-v-21909cc9] {\n  display: flex;\n  cursor: pointer;\n  transition: all 0.3s;\n  padding: 15px;\n  border-radius: 8px;\n}\n.book-item[data-v-21909cc9]:hover {\n  background: #f5f2ef;\n  transform: translateY(-2px);\n}\n.book-cover[data-v-21909cc9] {\n  width: 60px;\n  height: 84px;\n  border-radius: 6px;\n  object-fit: cover;\n  margin-right: 15px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.book-info[data-v-21909cc9] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n.book-title[data-v-21909cc9] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #333;\n  margin-bottom: 8px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.book-author[data-v-21909cc9] {\n  font-size: 14px;\n  color: #666;\n  margin-bottom: 8px;\n}\n.book-desc[data-v-21909cc9] {\n  font-size: 13px;\n  color: #999;\n  line-height: 1.4;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n/* 帖子结果 */\n.post-list[data-v-21909cc9] {\n  padding: 0;\n}\n.post-item[data-v-21909cc9] {\n  padding: 20px;\n  cursor: pointer;\n  border-bottom: 1px solid #f0f0f0;\n  transition: background-color 0.3s;\n}\n.post-item[data-v-21909cc9]:last-child {\n  border-bottom: none;\n}\n.post-item[data-v-21909cc9]:hover {\n  background: #f5f2ef;\n}\n.post-header[data-v-21909cc9] {\n  display: flex;\n  align-items: center;\n  margin-bottom: 12px;\n}\n.post-header .user-avatar[data-v-21909cc9] {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  margin-right: 12px;\n}\n.post-meta[data-v-21909cc9] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.user-name[data-v-21909cc9] {\n  font-size: 14px;\n  color: #666;\n  font-weight: 500;\n}\n.post-time[data-v-21909cc9] {\n  font-size: 12px;\n  color: #999;\n}\n.post-content[data-v-21909cc9] {\n  margin-left: 44px;\n}\n.post-title[data-v-21909cc9] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #333;\n  margin-bottom: 8px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.post-text[data-v-21909cc9] {\n  font-size: 14px;\n  color: #666;\n  line-height: 1.5;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n/* 圈子结果 */\n.circle-list[data-v-21909cc9] {\n  padding: 20px;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 20px;\n}\n.circle-item[data-v-21909cc9] {\n  display: flex;\n  cursor: pointer;\n  padding: 15px;\n  border-radius: 8px;\n  transition: all 0.3s;\n}\n.circle-item[data-v-21909cc9]:hover {\n  background: #f5f2ef;\n  transform: translateY(-2px);\n}\n.circle-icon[data-v-21909cc9] {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-right: 15px;\n}\n.circle-info[data-v-21909cc9] {\n  flex: 1;\n}\n.circle-name[data-v-21909cc9] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #333;\n  margin-bottom: 6px;\n}\n.circle-meta[data-v-21909cc9] {\n  font-size: 12px;\n  color: #666;\n  margin-bottom: 6px;\n}\n.circle-desc[data-v-21909cc9] {\n  font-size: 13px;\n  color: #999;\n  line-height: 1.4;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n/* 用户结果 */\n.user-list[data-v-21909cc9] {\n  padding: 20px;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n  gap: 20px;\n}\n.user-item[data-v-21909cc9] {\n  display: flex;\n  cursor: pointer;\n  padding: 15px;\n  border-radius: 8px;\n  transition: all 0.3s;\n}\n.user-item[data-v-21909cc9]:hover {\n  background: #f5f2ef;\n  transform: translateY(-2px);\n}\n.user-item .user-avatar[data-v-21909cc9] {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-right: 15px;\n}\n.user-info[data-v-21909cc9] {\n  flex: 1;\n}\n.user-name[data-v-21909cc9] {\n  font-size: 16px;\n  font-weight: 600;\n  color: #333;\n  margin-bottom: 6px;\n}\n.user-motto[data-v-21909cc9] {\n  font-size: 13px;\n  color: #666;\n  line-height: 1.4;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n/* 加载更多 */\n.load-more[data-v-21909cc9] {\n  text-align: center;\n  padding: 30px 20px;\n}\n.load-more-btn[data-v-21909cc9] {\n  background: white;\n  color: #947358;\n  border: 1px solid #947358;\n  padding: 12px 30px;\n  border-radius: 20px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.3s;\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n}\n.load-more-btn[data-v-21909cc9]:hover:not(:disabled) {\n  background: #947358;\n  color: white;\n}\n.load-more-btn[data-v-21909cc9]:disabled {\n  background: #f5f5f5;\n  color: #c0c4cc;\n  border-color: #e0e0e0;\n  cursor: not-allowed;\n}\n\n/* 无结果 */\n.no-results[data-v-21909cc9] {\n  text-align: center;\n  padding: 80px 20px;\n  color: #999;\n}\n.no-results-icon[data-v-21909cc9] {\n  font-size: 64px;\n  margin-bottom: 20px;\n  opacity: 0.5;\n}\n.no-results-text h3[data-v-21909cc9] {\n  font-size: 18px;\n  margin: 0 0 10px 0;\n  color: #666;\n}\n.no-results-text p[data-v-21909cc9] {\n  font-size: 14px;\n  margin: 0;\n  color: #999;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n.search-container[data-v-21909cc9] {\n    padding: 0 15px;\n    flex-direction: column;\n    gap: 15px;\n}\n.search-box[data-v-21909cc9] {\n    max-width: none;\n}\n.search-content[data-v-21909cc9] {\n    padding: 20px 15px;\n}\n.search-tabs[data-v-21909cc9] {\n    flex-direction: column;\n}\n.tab-item[data-v-21909cc9] {\n    border-bottom: 1px solid #f0f0f0;\n    border-right: none;\n}\n.book-grid[data-v-21909cc9] {\n    grid-template-columns: 1fr;\n    gap: 15px;\n    padding: 15px;\n}\n.circle-list[data-v-21909cc9],\n  .user-list[data-v-21909cc9] {\n    grid-template-columns: 1fr;\n    gap: 15px;\n    padding: 15px;\n}\n.post-content[data-v-21909cc9] {\n    margin-left: 0;\n}\n.tag-list[data-v-21909cc9] {\n    gap: 8px;\n}\n.tag-item[data-v-21909cc9] {\n    font-size: 13px;\n    padding: 6px 12px;\n}\n}\n",""]),t.exports=r},619:function(t,e,n){"use strict";n.r(e);n(28),n(27);var r=n(502),c=n(0),o=(n(6),n(105),n(34),n(10),n(35),n(18),{name:"SearchPage",head:function(){return{title:this.hasSearched?"".concat(this.currentKeyword," - 搜索结果"):"搜索 - LogHome",meta:[{hid:"description",name:"description",content:this.hasSearched?'搜索"'.concat(this.currentKeyword,'"的结果'):"LogHome搜索页面"}]}},data:function(){return{searchKeyword:"",currentKeyword:"",hasSearched:!1,searchType:"all",searchHistory:[],hotSearches:[],searchResults:{circles:{list:[],total:0},posts:{list:[],total:0},users:{list:[],total:0},books:{list:[],total:0}},isSearching:!1,isLoadingMore:!1,searchTimer:null,currentPage:{circles:1,posts:1,users:1,books:1}}},computed:{totalResults:function(){var t=this.searchResults,e=t.circles,n=t.posts,r=t.users,c=t.books;return(e.total||0)+(n.total||0)+(r.total||0)+(c.total||0)},noResults:function(){return!!this.hasSearched&&0===this.totalResults},canLoadMore:function(){if("all"===this.searchType)return!1;var t=this.searchResults[this.searchType];return t.list.length<t.total}},mounted:function(){var t=this;this.loadSearchHistory(),this.getHotSearches();var e=this.$route.query,n=e.keyword,r=e.type;n&&(this.searchKeyword=n,this.currentKeyword=n,this.searchType=r||"all",this.search()),this.$nextTick((function(){t.$refs.searchInput&&t.$refs.searchInput.focus()}))},watch:{"$route.query":{handler:function(t){var e=t.keyword,n=t.type;e&&e!==this.currentKeyword&&(this.searchKeyword=e,this.currentKeyword=e,this.searchType=n||"all",this.search())},deep:!0}},methods:{onSearchInput:function(){this.searchTimer&&clearTimeout(this.searchTimer)},clearSearch:function(){this.searchKeyword="",this.hasSearched=!1,this.currentKeyword="",this.$router.push("/search")},handleSearch:function(){this.searchKeyword.trim()&&(this.currentKeyword=this.searchKeyword.trim(),this.search(),this.saveSearchHistory(this.currentKeyword),this.$router.push({path:"/search",query:{keyword:this.currentKeyword,type:this.searchType}}))},searchWithKeyword:function(t){this.searchKeyword=t,this.currentKeyword=t,this.search(),this.saveSearchHistory(t),this.$router.push({path:"/search",query:{keyword:t,type:this.searchType}})},switchSearchType:function(t){this.searchType=t,this.hasSearched&&(this.resetPagination(),this.search(),this.$router.push({path:"/search",query:{keyword:this.currentKeyword,type:t}}))},resetPagination:function(){this.currentPage={circles:1,posts:1,users:1,books:1}},search:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isSearching&&t.currentKeyword.trim()){e.next=2;break}return e.abrupt("return");case 2:if(t.isSearching=!0,t.hasSearched=!0,e.prev=4,"all"!==t.searchType){e.next=10;break}return e.next=8,Promise.all([t.searchBooks(),t.searchPosts(),t.searchCircles(),t.searchUsers()]);case 8:e.next=25;break;case 10:e.t0=t.searchType,e.next="books"===e.t0?13:"posts"===e.t0?16:"circles"===e.t0?19:"users"===e.t0?22:25;break;case 13:return e.next=15,t.searchBooks();case 15:return e.abrupt("break",25);case 16:return e.next=18,t.searchPosts();case 18:return e.abrupt("break",25);case 19:return e.next=21,t.searchCircles();case 21:return e.abrupt("break",25);case 22:return e.next=24,t.searchUsers();case 24:return e.abrupt("break",25);case 25:e.next=31;break;case 27:e.prev=27,e.t1=e.catch(4),console.error("搜索失败:",e.t1),t.$message.error("搜索失败，请稍后重试");case 31:return e.prev=31,t.isSearching=!1,e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[4,27,31,34]])})))()},loadMore:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isLoadingMore&&t.canLoadMore){e.next=2;break}return e.abrupt("return");case 2:t.isLoadingMore=!0,t.currentPage[t.searchType]++,e.prev=4,e.t0=t.searchType,e.next="books"===e.t0?8:"posts"===e.t0?11:"circles"===e.t0?14:"users"===e.t0?17:20;break;case 8:return e.next=10,t.searchBooks(!0);case 10:return e.abrupt("break",20);case 11:return e.next=13,t.searchPosts(!0);case 13:return e.abrupt("break",20);case 14:return e.next=16,t.searchCircles(!0);case 16:return e.abrupt("break",20);case 17:return e.next=19,t.searchUsers(!0);case 19:return e.abrupt("break",20);case 20:e.next=27;break;case 22:e.prev=22,e.t1=e.catch(4),console.error("加载更多失败:",e.t1),t.$message.error("加载失败，请稍后重试"),t.currentPage[t.searchType]--;case 27:return e.prev=27,t.isLoadingMore=!1,e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[4,22,27,30]])})))()},searchBooks:function(){var t=arguments,e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var c,o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=t.length>0&&void 0!==t[0]&&t[0],n.prev=1,n.next=4,e.$api.search.searchNovels({keyword:e.currentKeyword,page:e.currentPage.books,limit:"all"===e.searchType?6:12});case 4:o=n.sent,c?(l=e.searchResults.books.list).push.apply(l,Object(r.a)(o.list)):e.searchResults.books=o,n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),console.error("搜索书籍失败:",n.t0),e.searchResults.books={list:[],total:0};case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},searchPosts:function(){var t=arguments,e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var c,o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=t.length>0&&void 0!==t[0]&&t[0],n.prev=1,n.next=4,e.$api.search.searchPosts({keyword:e.currentKeyword,page:e.currentPage.posts,limit:"all"===e.searchType?5:10});case 4:o=n.sent,c?(l=e.searchResults.posts.list).push.apply(l,Object(r.a)(o.list)):e.searchResults.posts=o,n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),console.error("搜索帖子失败:",n.t0),e.searchResults.posts={list:[],total:0};case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},searchCircles:function(){var t=arguments,e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var c,o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=t.length>0&&void 0!==t[0]&&t[0],n.prev=1,n.next=4,e.$api.search.searchCircles({keyword:e.currentKeyword,page:e.currentPage.circles,limit:"all"===e.searchType?4:8});case 4:o=n.sent,c?(l=e.searchResults.circles.list).push.apply(l,Object(r.a)(o.list)):e.searchResults.circles=o,n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),console.error("搜索圈子失败:",n.t0),e.searchResults.circles={list:[],total:0};case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},searchUsers:function(){var t=arguments,e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var c,o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=t.length>0&&void 0!==t[0]&&t[0],n.prev=1,n.next=4,e.$api.search.searchUsers({keyword:e.currentKeyword,page:e.currentPage.users,limit:"all"===e.searchType?6:12});case 4:o=n.sent,c?(l=e.searchResults.users.list).push.apply(l,Object(r.a)(o.list)):e.searchResults.users=o,n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),console.error("搜索用户失败:",n.t0),e.searchResults.users={list:[],total:0};case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},saveSearchHistory:function(t){if(t&&""!==t.trim()){var e=JSON.parse(localStorage.getItem("searchHistory")||"[]");(e=e.filter((function(e){return e!==t}))).unshift(t),e=e.slice(0,10),localStorage.setItem("searchHistory",JSON.stringify(e)),this.searchHistory=e}},loadSearchHistory:function(){this.searchHistory=JSON.parse(localStorage.getItem("searchHistory")||"[]")},clearSearchHistory:function(){localStorage.removeItem("searchHistory"),this.searchHistory=[],this.$message.success("搜索历史已清空")},getHotSearches:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.search.getHotSearches();case 3:t.hotSearches=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("获取热门搜索失败:",e.t0),t.hotSearches=[{keyword:"修仙"},{keyword:"都市"},{keyword:"玄幻"},{keyword:"言情"},{keyword:"历史"},{keyword:"科幻"},{keyword:"悬疑"},{keyword:"武侠"}];case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))()},formatTime:function(t){if(!t)return"";var e=new Date(t),n=new Date-e;return n<6e4?"刚刚":n<36e5?Math.floor(n/6e4)+"分钟前":n<864e5?Math.floor(n/36e5)+"小时前":Math.floor(n/864e5)+"天前"},navigateToBook:function(t,e){"world"===e?this.$router.push("/world/".concat(t)):this.$router.push("/novel/".concat(t))},navigateToPost:function(t){this.$router.push("/community/post/".concat(t))},navigateToCircle:function(t){this.$router.push("/community/circle/".concat(t))},navigateToUser:function(t){this.$router.push("/users/".concat(t))}}}),l=o,d=(n(562),n(12)),component=Object(d.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-page"},[e("div",{staticClass:"search-header"},[e("div",{staticClass:"search-container"},[e("div",{staticClass:"search-box"},[e("i",{staticClass:"el-icon-search search-icon"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKeyword,expression:"searchKeyword"}],ref:"searchInput",staticClass:"search-input",attrs:{type:"text",placeholder:"搜索小说、作者、帖子、用户..."},domProps:{value:t.searchKeyword},on:{input:[function(e){e.target.composing||(t.searchKeyword=e.target.value)},t.onSearchInput],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}}}),t._v(" "),t.searchKeyword?e("i",{staticClass:"el-icon-close search-clear",on:{click:t.clearSearch}}):t._e()]),t._v(" "),e("button",{staticClass:"search-btn",attrs:{disabled:!t.searchKeyword.trim()},on:{click:t.handleSearch}},[t._v("\n        搜索\n      ")])])]),t._v(" "),e("div",{staticClass:"search-content"},[t.hasSearched?t._e():e("div",{staticClass:"search-before"},[t.searchHistory.length>0?e("div",{staticClass:"search-section"},[e("div",{staticClass:"section-header"},[e("h3",{staticClass:"section-title"},[t._v("搜索历史")]),t._v(" "),e("button",{staticClass:"clear-btn",on:{click:t.clearSearchHistory}},[e("i",{staticClass:"el-icon-delete"}),t._v("\n            清空\n          ")])]),t._v(" "),e("div",{staticClass:"tag-list"},t._l(t.searchHistory,(function(n,r){return e("span",{key:"history-"+r,staticClass:"tag-item",on:{click:function(e){return t.searchWithKeyword(n)}}},[t._v("\n            "+t._s(n)+"\n          ")])})),0)]):t._e(),t._v(" "),e("div",{staticClass:"search-section"},[t._m(0),t._v(" "),e("div",{staticClass:"tag-list"},t._l(t.hotSearches,(function(n,r){return e("span",{key:"hot-"+r,staticClass:"tag-item hot-tag",on:{click:function(e){return t.searchWithKeyword(n.keyword)}}},[t._v("\n            "+t._s(n.keyword)+"\n          ")])})),0)])]),t._v(" "),t.hasSearched?e("div",{staticClass:"search-after"},[e("div",{staticClass:"search-stats"},[e("span",{staticClass:"search-keyword"},[t._v('"'+t._s(t.currentKeyword)+'"')]),t._v(" "),e("span",{staticClass:"search-count"},[t._v("找到 "+t._s(t.totalResults)+" 个结果")])]),t._v(" "),e("div",{staticClass:"search-tabs"},[e("div",{staticClass:"tab-item",class:{active:"all"===t.searchType},on:{click:function(e){return t.switchSearchType("all")}}},[e("span",{staticClass:"tab-name"},[t._v("全部")]),t._v(" "),t.totalResults>0?e("span",{staticClass:"tab-count"},[t._v("("+t._s(t.totalResults)+")")]):t._e()]),t._v(" "),e("div",{staticClass:"tab-item",class:{active:"books"===t.searchType},on:{click:function(e){return t.switchSearchType("books")}}},[e("span",{staticClass:"tab-name"},[t._v("书籍")]),t._v(" "),t.searchResults.books.total>0?e("span",{staticClass:"tab-count"},[t._v("("+t._s(t.searchResults.books.total)+")")]):t._e()]),t._v(" "),e("div",{staticClass:"tab-item",class:{active:"posts"===t.searchType},on:{click:function(e){return t.switchSearchType("posts")}}},[e("span",{staticClass:"tab-name"},[t._v("帖子")]),t._v(" "),t.searchResults.posts.total>0?e("span",{staticClass:"tab-count"},[t._v("("+t._s(t.searchResults.posts.total)+")")]):t._e()]),t._v(" "),e("div",{staticClass:"tab-item",class:{active:"circles"===t.searchType},on:{click:function(e){return t.switchSearchType("circles")}}},[e("span",{staticClass:"tab-name"},[t._v("圈子")]),t._v(" "),t.searchResults.circles.total>0?e("span",{staticClass:"tab-count"},[t._v("("+t._s(t.searchResults.circles.total)+")")]):t._e()]),t._v(" "),e("div",{staticClass:"tab-item",class:{active:"users"===t.searchType},on:{click:function(e){return t.switchSearchType("users")}}},[e("span",{staticClass:"tab-name"},[t._v("用户")]),t._v(" "),t.searchResults.users.total>0?e("span",{staticClass:"tab-count"},[t._v("("+t._s(t.searchResults.users.total)+")")]):t._e()])]),t._v(" "),e("div",{staticClass:"results-container"},[t.isSearching?e("div",{staticClass:"loading"},[e("i",{staticClass:"el-icon-loading"}),t._v(" "),e("span",[t._v("搜索中...")])]):e("div",{staticClass:"results-content"},["all"===t.searchType?e("div",{staticClass:"all-results"},[t.searchResults.books.list.length>0?e("div",{staticClass:"result-section"},[e("div",{staticClass:"section-title"},[e("h4",[t._v("书籍")]),t._v(" "),e("nuxt-link",{staticClass:"more-link",attrs:{to:"/search?type=books&keyword=".concat(t.currentKeyword)}},[t._v("\n                  查看更多 "),e("i",{staticClass:"el-icon-arrow-right"})])],1),t._v(" "),e("div",{staticClass:"book-grid"},t._l(t.searchResults.books.list.slice(0,6),(function(n,r){return e("div",{key:"book-"+r,staticClass:"book-item",on:{click:function(e){return t.navigateToBook(n.novel_id)}}},[e("img",{staticClass:"book-cover",attrs:{src:n.picUrl+"?thumbnail=1",alt:n.name}}),t._v(" "),e("div",{staticClass:"book-info"},[e("div",{staticClass:"book-title"},[t._v(t._s(n.name))]),t._v(" "),e("div",{staticClass:"book-author"},[t._v(t._s(n.author_name))]),t._v(" "),e("div",{staticClass:"book-desc"},[t._v(t._s(n.content))])])])})),0)]):t._e(),t._v(" "),t.searchResults.posts.list.length>0?e("div",{staticClass:"result-section"},[e("div",{staticClass:"section-title"},[e("h4",[t._v("帖子")]),t._v(" "),e("nuxt-link",{staticClass:"more-link",attrs:{to:"/search?type=posts&keyword=".concat(t.currentKeyword)}},[t._v("\n                  查看更多 "),e("i",{staticClass:"el-icon-arrow-right"})])],1),t._v(" "),e("div",{staticClass:"post-list"},t._l(t.searchResults.posts.list.slice(0,5),(function(n,r){return e("div",{key:"post-"+r,staticClass:"post-item",on:{click:function(e){return t.navigateToPost(n.post_id)}}},[e("div",{staticClass:"post-header"},[e("img",{staticClass:"user-avatar",attrs:{src:n.author_avatar||"/default-avatar.png",alt:n.author_name}}),t._v(" "),e("div",{staticClass:"post-meta"},[e("span",{staticClass:"user-name"},[t._v(t._s(n.author_name||"匿名用户"))]),t._v(" "),e("span",{staticClass:"post-time"},[t._v(t._s(t.formatTime(n.create_time)))])])]),t._v(" "),e("div",{staticClass:"post-content"},[e("div",{staticClass:"post-title"},[t._v(t._s(n.title))]),t._v(" "),e("div",{staticClass:"post-text"},[t._v(t._s(n.content))])])])})),0)]):t._e(),t._v(" "),t.searchResults.circles.list.length>0?e("div",{staticClass:"result-section"},[e("div",{staticClass:"section-title"},[e("h4",[t._v("圈子")]),t._v(" "),e("nuxt-link",{staticClass:"more-link",attrs:{to:"/search?type=circles&keyword=".concat(t.currentKeyword)}},[t._v("\n                  查看更多 "),e("i",{staticClass:"el-icon-arrow-right"})])],1),t._v(" "),e("div",{staticClass:"circle-list"},t._l(t.searchResults.circles.list.slice(0,4),(function(circle,n){return e("div",{key:"circle-"+n,staticClass:"circle-item",on:{click:function(e){return t.navigateToCircle(circle.circle_id)}}},[e("img",{staticClass:"circle-icon",attrs:{src:circle.icon||"/default-circle.png",alt:circle.name}}),t._v(" "),e("div",{staticClass:"circle-info"},[e("div",{staticClass:"circle-name"},[t._v(t._s(circle.name))]),t._v(" "),e("div",{staticClass:"circle-meta"},[t._v(t._s(circle.member_count||0)+"人 · "+t._s(circle.category_name||"未分类"))]),t._v(" "),e("div",{staticClass:"circle-desc"},[t._v(t._s(circle.description||"暂无描述"))])])])})),0)]):t._e(),t._v(" "),t.searchResults.users.list.length>0?e("div",{staticClass:"result-section"},[e("div",{staticClass:"section-title"},[e("h4",[t._v("用户")]),t._v(" "),e("nuxt-link",{staticClass:"more-link",attrs:{to:"/search?type=users&keyword=".concat(t.currentKeyword)}},[t._v("\n                  查看更多 "),e("i",{staticClass:"el-icon-arrow-right"})])],1),t._v(" "),e("div",{staticClass:"user-list"},t._l(t.searchResults.users.list.slice(0,6),(function(n,r){return e("div",{key:"user-"+r,staticClass:"user-item",on:{click:function(e){return t.navigateToUser(n.user_id)}}},[e("img",{staticClass:"user-avatar",attrs:{src:n.avatar_url||"/default-avatar.png",alt:n.name}}),t._v(" "),e("div",{staticClass:"user-info"},[e("div",{staticClass:"user-name"},[t._v(t._s(n.name||"匿名用户"))]),t._v(" "),e("div",{staticClass:"user-motto"},[t._v(t._s(n.motto||"这个人很懒，还没有设置个性签名"))])])])})),0)]):t._e()]):e("div",{staticClass:"single-results"},["books"===t.searchType?e("div",{staticClass:"book-results"},[e("div",{staticClass:"book-grid"},t._l(t.searchResults.books.list,(function(n,r){return e("div",{key:"book-"+r,staticClass:"book-item",on:{click:function(e){return t.navigateToBook(n.novel_id)}}},[e("img",{staticClass:"book-cover",attrs:{src:n.picUrl+"?thumbnail=1",alt:n.name}}),t._v(" "),e("div",{staticClass:"book-info"},[e("div",{staticClass:"book-title"},[t._v(t._s(n.name))]),t._v(" "),e("div",{staticClass:"book-author"},[t._v(t._s(n.author_name))]),t._v(" "),e("div",{staticClass:"book-desc"},[t._v(t._s(n.content))])])])})),0)]):t._e(),t._v(" "),"posts"===t.searchType?e("div",{staticClass:"post-results"},[e("div",{staticClass:"post-list"},t._l(t.searchResults.posts.list,(function(n,r){return e("div",{key:"post-"+r,staticClass:"post-item",on:{click:function(e){return t.navigateToPost(n.post_id)}}},[e("div",{staticClass:"post-header"},[e("img",{staticClass:"user-avatar",attrs:{src:n.author_avatar||"/default-avatar.png",alt:n.author_name}}),t._v(" "),e("div",{staticClass:"post-meta"},[e("span",{staticClass:"user-name"},[t._v(t._s(n.author_name||"匿名用户"))]),t._v(" "),e("span",{staticClass:"post-time"},[t._v(t._s(t.formatTime(n.create_time)))])])]),t._v(" "),e("div",{staticClass:"post-content"},[e("div",{staticClass:"post-title"},[t._v(t._s(n.title))]),t._v(" "),e("div",{staticClass:"post-text"},[t._v(t._s(n.content))])])])})),0)]):t._e(),t._v(" "),"circles"===t.searchType?e("div",{staticClass:"circle-results"},[e("div",{staticClass:"circle-list"},t._l(t.searchResults.circles.list,(function(circle,n){return e("div",{key:"circle-"+n,staticClass:"circle-item",on:{click:function(e){return t.navigateToCircle(circle.circle_id)}}},[e("img",{staticClass:"circle-icon",attrs:{src:circle.icon||"/default-circle.png",alt:circle.name}}),t._v(" "),e("div",{staticClass:"circle-info"},[e("div",{staticClass:"circle-name"},[t._v(t._s(circle.name))]),t._v(" "),e("div",{staticClass:"circle-meta"},[t._v(t._s(circle.member_count||0)+"人 · "+t._s(circle.category_name||"未分类"))]),t._v(" "),e("div",{staticClass:"circle-desc"},[t._v(t._s(circle.description||"暂无描述"))])])])})),0)]):t._e(),t._v(" "),"users"===t.searchType?e("div",{staticClass:"user-results"},[e("div",{staticClass:"user-list"},t._l(t.searchResults.users.list,(function(n,r){return e("div",{key:"user-"+r,staticClass:"user-item",on:{click:function(e){return t.navigateToUser(n.user_id)}}},[e("img",{staticClass:"user-avatar",attrs:{src:n.avatar_url||"/default-avatar.png",alt:n.name}}),t._v(" "),e("div",{staticClass:"user-info"},[e("div",{staticClass:"user-name"},[t._v(t._s(n.name||"匿名用户"))]),t._v(" "),e("div",{staticClass:"user-motto"},[t._v(t._s(n.motto||"这个人很懒，还没有设置个性签名"))])])])})),0)]):t._e()]),t._v(" "),t.canLoadMore&&"all"!==t.searchType?e("div",{staticClass:"load-more"},[e("button",{staticClass:"load-more-btn",attrs:{disabled:t.isLoadingMore},on:{click:t.loadMore}},[t.isLoadingMore?e("i",{staticClass:"el-icon-loading"}):t._e(),t._v("\n              "+t._s(t.isLoadingMore?"加载中...":"加载更多")+"\n            ")])]):t._e(),t._v(" "),t.noResults?e("div",{staticClass:"no-results"},[t._m(1),t._v(" "),t._m(2)]):t._e()])])]):t._e()])])}),[function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("h3",{staticClass:"section-title"},[this._v("热门搜索")])])},function(){var t=this._self._c;return t("div",{staticClass:"no-results-icon"},[t("i",{staticClass:"el-icon-search"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"no-results-text"},[e("h3",[t._v("没有找到相关内容")]),t._v(" "),e("p",[t._v("试试其他关键词或检查拼写")])])}],!1,null,"21909cc9",null);e.default=component.exports}}]);