(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{357:function(t,e,o){"use strict";var r=o(3),n=o(358),l=o(218),d=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(l);r(r.P+r.F*d,"String",{padStart:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},358:function(t,e,o){var r=o(19),n=o(219),l=o(45);t.exports=function(t,e,o,d){var c=String(l(t)),v=c.length,f=void 0===o?" ":String(o),x=r(e);if(x<=v||""==f)return c;var h=x-v,m=n.call(f,Math.ceil(h/f.length));return m.length>h&&(m=m.slice(0,h)),d?m+c:c+m}},373:function(t,e,o){var content=o(406);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(33).default)("d5017de0",content,!0,{sourceMap:!1})},405:function(t,e,o){"use strict";o(373)},406:function(t,e,o){var r=o(32)(!1);r.push([t.i,".collections-page[data-v-506dad66]{max-width:1200px;margin:0 auto;padding:20px;background-color:#fff;min-height:calc(100vh - 140px)}.page-header[data-v-506dad66]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:15px;border-bottom:1px solid #e0e0e0}.page-header .page-title[data-v-506dad66]{font-size:24px;font-weight:bold;color:#947358;margin:0}.page-header .back-button[data-v-506dad66]{padding:8px 16px;background-color:#947358;color:#fff;border-radius:4px;text-decoration:none;font-size:14px;transition:background-color .3s}.page-header .back-button[data-v-506dad66]:hover{background-color:hsl(27,25.4237288136%,36.2745098039%)}.loading-container[data-v-506dad66],.error-container[data-v-506dad66],.empty-container[data-v-506dad66]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px}.loading-container p[data-v-506dad66],.error-container p[data-v-506dad66],.empty-container p[data-v-506dad66]{margin-top:20px;color:#666;font-size:16px}.loading-spinner[data-v-506dad66]{width:50px;height:50px;border:5px solid rgba(148,115,88,.2);border-top-color:#947358;border-radius:50%;animation:spin-506dad66 1s linear infinite}@keyframes spin-506dad66{to{transform:rotate(360deg)}}.retry-button[data-v-506dad66]{margin-top:15px;padding:8px 20px;background-color:#947358;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px}.retry-button[data-v-506dad66]:hover{background-color:hsl(27,25.4237288136%,36.2745098039%)}.novels-grid[data-v-506dad66]{display:grid;grid-template-columns:repeat(auto-fill, minmax(300px, 1fr));gap:25px;margin-top:20px}.novel-card[data-v-506dad66]{display:flex;flex-direction:column;border-radius:8px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,.08);transition:transform .3s,box-shadow .3s;background-color:#fff;height:100%}.novel-card[data-v-506dad66]:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,.1)}.novel-cover[data-v-506dad66]{height:180px;background-size:cover;background-position:center;position:relative}.novel-cover .novel-category[data-v-506dad66]{position:absolute;top:10px;right:10px;background-color:rgba(0,0,0,.7);color:#fff;padding:3px 8px;border-radius:4px;font-size:12px}.novel-info[data-v-506dad66]{padding:15px;display:flex;flex-direction:column;flex-grow:1}.novel-title[data-v-506dad66]{font-size:18px;font-weight:bold;margin:0 0 10px;color:#333;line-height:1.4;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}.novel-author-info[data-v-506dad66]{display:flex;align-items:center;margin-bottom:12px}.novel-author-info .author-avatar[data-v-506dad66]{width:24px;height:24px;border-radius:50%;margin-right:8px;object-fit:cover}.novel-author-info .author-name[data-v-506dad66]{font-size:14px;color:#666}.novel-desc[data-v-506dad66]{font-size:14px;color:#666;margin:0 0 15px;line-height:1.5;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;flex-grow:1}.novel-stats[data-v-506dad66]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:8px}.novel-stats span[data-v-506dad66]{font-size:12px;color:#666}.novel-update-time[data-v-506dad66]{font-size:12px;color:#666;margin-bottom:15px}.read-button[data-v-506dad66]{padding:8px 0;background-color:#947358;color:#fff;border-radius:4px;text-align:center;text-decoration:none;font-size:14px;transition:background-color .3s}.read-button[data-v-506dad66]:hover{background-color:hsl(27,25.4237288136%,36.2745098039%)}@media(max-width: 768px){.novels-grid[data-v-506dad66]{grid-template-columns:repeat(auto-fill, minmax(250px, 1fr))}}@media(max-width: 480px){.novels-grid[data-v-506dad66]{grid-template-columns:1fr}}",""]),t.exports=r},430:function(t,e,o){"use strict";o.r(e);o(27);var r=o(0),n=(o(15),o(73),o(74),o(357),o(155),o(34),{head:function(){return{title:"".concat(this.title||"小说集合"," - 原木社区"),meta:[{hid:"description",name:"description",content:"原木社区 - ".concat(this.title||"小说集合"," 分类下的热门小说列表")}]}},data:function(){return{title:"",novels:[],loading:!0,error:null}},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var o,r,title,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.query,r=t.$api,t.error,e.prev=1,title=o.title||"人气最佳",e.next=5,r.novels.getCollectionNovels(title,1,100);case 5:return n=e.sent,e.abrupt("return",{title:title,novels:n||[],loading:!1});case 9:return e.prev=9,e.t0=e.catch(1),console.error("加载集合数据失败:",e.t0),e.abrupt("return",{title:o.title||"人气最佳",novels:[],loading:!1,error:"加载集合数据失败: ".concat(e.t0.message||"未知错误")});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},watch:{"$route.query.title":{handler:function(t){t&&t!==this.title&&(this.title=t,this.refreshCollections())},immediate:!0}},mounted:function(){console.log("Collections页面挂载, 当前title:",this.title),this.checkPageData()},methods:{refreshCollections:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.error=null,e.prev=2,e.next=5,t.$api.novels.getCollectionNovels(t.title,1,100);case 5:t.novels=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error("刷新集合数据失败:",e.t0),t.error="刷新集合数据失败，请稍后重试";case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,8,12,15]])})))()},truncateText:function(text,t){return text?text.length<=t?text:text.substring(0,t)+"...":""},formatNumber:function(t){return t?t>=1e4?(t/1e4).toFixed(1)+"万":t>=1e3?(t/1e3).toFixed(1)+"k":t.toString():"0"},formatDateTime:function(t){if(!t)return"";var e=new Date(t),o=new Date,r=Math.abs(o-e),n=Math.floor(r/864e5);return n<1?"今天":n<7?"".concat(n,"天前"):"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"))},checkPageData:function(){var t=new URLSearchParams(window.location.search).get("title");console.log("URL参数检查 - title:",t),!t||0!==this.novels.length||this.loading||this.error||(console.log("URL有title参数但没有加载数据，尝试重新加载"),this.title=decodeURIComponent(t),this.refreshCollections())}}}),l=(o(405),o(10)),component=Object(l.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"collections-page"},[e("div",{staticClass:"page-header"},[e("h1",{staticClass:"page-title"},[t._v(t._s(t.title))]),t._v(" "),e("nuxt-link",{staticClass:"back-button",attrs:{to:"/read"}},[t._v("返回书库")])],1),t._v(" "),t.loading?e("div",{staticClass:"loading-container"},[e("div",{staticClass:"loading-spinner"}),t._v(" "),e("p",[t._v("正在加载内容...")])]):t.error?e("div",{staticClass:"error-container"},[e("p",[t._v(t._s(t.error))]),t._v(" "),e("button",{staticClass:"retry-button",on:{click:t.refreshCollections}},[t._v("重试")])]):0===t.novels.length?e("div",{staticClass:"empty-container"},[e("p",[t._v("该集合下暂无小说")])]):e("div",{staticClass:"novels-grid"},t._l(t.novels,(function(o){return e("div",{key:o.novel_id,staticClass:"novel-card"},[o.picUrl?e("div",{staticClass:"novel-cover",style:"background-image: url(".concat(o.picUrl,")")},["world"===o.novel_type?e("span",{staticClass:"novel-category"},[t._v("世界设定")]):t._e()]):e("div",{staticClass:"novel-cover",style:"background-color: hsl(".concat(30*o.novel_id%360,", 70%, 80%)")},["world"===o.novel_type?e("span",{staticClass:"novel-category"},[t._v("世界设定")]):t._e()]),t._v(" "),e("div",{staticClass:"novel-info"},[e("h3",{staticClass:"novel-title"},[t._v(t._s(o.name))]),t._v(" "),e("div",{staticClass:"novel-author-info"},[e("img",{staticClass:"author-avatar",attrs:{src:o.avatar_url||"/static/user/defaultAvatar.jpg",alt:"作者头像",onerror:"this.onerror=null;this.src='/static/user/defaultAvatar.jpg'"}}),t._v(" "),e("span",{staticClass:"author-name"},[t._v(t._s(o.user_name||"佚名"))])]),t._v(" "),e("p",{staticClass:"novel-desc"},[t._v(t._s(t.truncateText(o.content,100)))]),t._v(" "),e("div",{staticClass:"novel-stats"},[e("span",{attrs:{title:"阅读量"}},[t._v("👁️ "+t._s(t.formatNumber(o.clicks||0)))]),t._v(" "),e("span",{attrs:{title:"字数"}},[t._v("📃 "+t._s(t.formatNumber(o.text_count||0))+"字")]),t._v(" "),e("span",{attrs:{title:"连载状态"}},[t._v(t._s(1===o.is_complete?"已完结":"连载中"))])]),t._v(" "),e("div",{staticClass:"novel-update-time"},[e("span",{attrs:{title:"更新时间"}},[t._v("🕒 "+t._s(t.formatDateTime(o.update_time)))])]),t._v(" "),e("nuxt-link",{staticClass:"read-button",attrs:{to:"/novel/".concat(o.novel_id)}},[t._v("开始阅读")])],1)])})),0)])}),[],!1,null,"506dad66",null);e.default=component.exports}}]);