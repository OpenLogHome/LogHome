(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{357:function(e,t,n){"use strict";var o=n(3),r=n(358),l=n(218),c=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(l);o(o.P+o.F*c,"String",{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},358:function(e,t,n){var o=n(19),r=n(219),l=n(45);e.exports=function(e,t,n,c){var v=String(l(e)),d=v.length,f=void 0===n?" ":String(n),m=o(t);if(m<=d||""==f)return v;var h=m-d,x=r.call(f,Math.ceil(h/f.length));return x.length>h&&(x=x.slice(0,h)),c?x+v:v+x}},359:function(e,t,n){"use strict";var o=n(5),r=n(35),l=n(36),c=n(220),v=n(106),d=n(11),f=n(75).f,m=n(76).f,h=n(16).f,x=n(360).trim,w="Number",k=o[w],_=k,y=k.prototype,C=l(n(151)(y))==w,I="trim"in String.prototype,R=function(e){var t=v(e,!1);if("string"==typeof t&&t.length>2){var n,o,r,l=(t=I?t.trim():x(t,3)).charCodeAt(0);if(43===l||45===l){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===l){switch(t.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+t}for(var code,c=t.slice(2),i=0,d=c.length;i<d;i++)if((code=c.charCodeAt(i))<48||code>r)return NaN;return parseInt(c,o)}}return+t};if(!k(" 0o1")||!k("0b1")||k("+0x1")){k=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof k&&(C?d((function(){y.valueOf.call(n)})):l(n)!=w)?c(new _(R(t)),n,k):R(t)};for(var N,S=n(8)?f(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;S.length>j;j++)r(_,N=S[j])&&!r(k,N)&&h(k,N,m(_,N));k.prototype=y,y.constructor=k,n(20)(o,w,k)}},360:function(e,t,n){var o=n(3),r=n(45),l=n(11),c=n(361),v="["+c+"]",d=RegExp("^"+v+v+"*"),f=RegExp(v+v+"*$"),m=function(e,t,n){var r={},v=l((function(){return!!c[e]()||"​"!="​"[e]()})),d=r[e]=v?t(h):c[e];n&&(r[n]=d),o(o.P+o.F*v,"String",r)},h=m.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(d,"")),2&t&&(e=e.replace(f,"")),e};e.exports=m},361:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},376:function(e,t,n){var content=n(413);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(33).default)("4b0c4d35",content,!0,{sourceMap:!1})},377:function(e,t,n){var content=n(415);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(33).default)("7578dd95",content,!0,{sourceMap:!1})},411:function(e,t,n){e.exports=n.p+"img/bg.a726195.png"},412:function(e,t,n){"use strict";n(376)},413:function(e,t,n){var o=n(32)(!1);o.push([e.i,'@keyframes spin-438a0409{to{transform:rotate(360deg)}}.fans-ranking[data-v-438a0409]{width:100%;position:relative;margin-bottom:20px}.fans-ranking .loading-wrapper[data-v-438a0409]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:200px}.fans-ranking .loading-wrapper .loading-spinner[data-v-438a0409]{width:30px;height:30px;border:3px solid rgba(148,115,88,.2);border-top-color:#947358;border-radius:50%;animation:spin-438a0409 1s linear infinite;margin-bottom:10px}.fans-ranking .loading-wrapper p[data-v-438a0409]{color:#888;font-size:14px}.fans-ranking .fans-list-wrapper[data-v-438a0409]{width:100%;position:relative}.fans-ranking .fans-list-wrapper .fans-list[data-v-438a0409]{width:100%}.fans-ranking .fans-list-wrapper .fans-list .fan-item[data-v-438a0409]{display:flex;align-items:center;padding:15px 10px;border-bottom:1px solid #f5f5f5}.fans-ranking .fans-list-wrapper .fans-list .fan-item[data-v-438a0409]:last-child{border-bottom:none}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-rank[data-v-438a0409]{width:40px;display:flex;justify-content:center;align-items:center}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-rank .rank-number[data-v-438a0409]{font-size:16px;font-weight:bold;color:#666}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-rank .rank-first[data-v-438a0409],.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-rank .rank-second[data-v-438a0409],.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-rank .rank-third[data-v-438a0409]{width:24px;height:24px;display:flex;justify-content:center;align-items:center;color:#fff;font-weight:bold;font-size:14px;border-radius:50%}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-rank .rank-first[data-v-438a0409]{background-color:#ff6b6b}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-rank .rank-second[data-v-438a0409]{background-color:#ffb347}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-rank .rank-third[data-v-438a0409]{background-color:#59c2a7}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-avatar[data-v-438a0409]{margin:0 15px}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-avatar img[data-v-438a0409]{width:50px;height:50px;border-radius:50%;object-fit:cover;cursor:pointer;transition:transform .2s}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-avatar img[data-v-438a0409]:hover{transform:scale(1.05)}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-details[data-v-438a0409]{flex:1}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-details .fan-info[data-v-438a0409]{display:flex;justify-content:space-between;margin-bottom:8px}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-details .fan-info .fan-name[data-v-438a0409]{font-weight:bold;color:#ea7034;cursor:pointer}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-details .fan-info .fan-name[data-v-438a0409]:hover{text-decoration:underline}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-details .fan-info .fan-value[data-v-438a0409]{font-weight:bold;color:#ea7034}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-details .fan-message[data-v-438a0409]{padding:8px 12px;background-color:rgba(234,112,52,.1);border-radius:8px;font-size:14px;color:#666;position:relative}.fans-ranking .fans-list-wrapper .fans-list .fan-item .fan-details .fan-message[data-v-438a0409]:before{content:"";position:absolute;top:-8px;left:15px;border-width:0 8px 8px;border-style:solid;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(234,112,52,.1)}.fans-ranking .fans-list-wrapper .my-info-wrapper[data-v-438a0409]{position:sticky;bottom:0;left:0;width:100%;z-index:10}.fans-ranking .fans-list-wrapper .my-info-wrapper .my-info-rank[data-v-438a0409]{background-color:rgba(0,0,0,.8);color:#fff;padding:6px 15px;border-top-right-radius:20px;font-size:14px;display:inline-block}.fans-ranking .fans-list-wrapper .my-info-wrapper .my-info[data-v-438a0409]{display:flex;align-items:center;background-color:rgba(0,0,0,.8);padding:10px 15px}.fans-ranking .fans-list-wrapper .my-info-wrapper .my-info .my-avatar[data-v-438a0409]{margin-right:15px}.fans-ranking .fans-list-wrapper .my-info-wrapper .my-info .my-avatar img[data-v-438a0409]{width:40px;height:40px;border-radius:50%;object-fit:cover}.fans-ranking .fans-list-wrapper .my-info-wrapper .my-info .my-details[data-v-438a0409]{display:flex;flex:1;justify-content:space-between;align-items:center}.fans-ranking .fans-list-wrapper .my-info-wrapper .my-info .my-details .my-name[data-v-438a0409]{color:#fff;font-weight:bold}.fans-ranking .fans-list-wrapper .my-info-wrapper .my-info .my-details .my-value[data-v-438a0409]{color:#ea7034;font-weight:bold}.fans-ranking .view-more-wrapper[data-v-438a0409]{text-align:right;margin-top:15px}.fans-ranking .view-more-wrapper .view-more-link[data-v-438a0409]{color:#666;text-decoration:none;font-size:14px;padding:5px}.fans-ranking .view-more-wrapper .view-more-link[data-v-438a0409]:hover{color:#ea7034}',""]),e.exports=o},414:function(e,t,n){"use strict";n(377)},415:function(e,t,n){var o=n(32)(!1);o.push([e.i,"@keyframes spin{to{transform:rotate(360deg)}}@keyframes niubi{0%{transform:scale(0);opacity:1}50%{transform:scale(1)}90%{transform:scale(1);opacity:1}99%{transform:scale(1);opacity:0}100%{transform:scale(0);opacity:0}}.novel-page{max-width:1000px;margin:0 auto;padding:0 20px}.novel-page .loading-container,.novel-page .error-container{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:50px;text-align:center}.novel-page .back-button{padding:8px 16px;border-radius:4px;cursor:pointer;transition:all .3s ease;font-size:14px;background-color:#947358;color:#fff;text-decoration:none;margin-top:20px;border:none}.novel-page .novel-container{background-color:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.1);padding:20px;position:relative}.novel-page .novel-container .novel-header{display:flex;margin-bottom:30px}@media(max-width: 768px){.novel-page .novel-container .novel-header{flex-direction:column;align-items:center;text-align:center}}.novel-page .novel-container .novel-header .novel-cover{width:200px;height:280px;background-size:cover;background-position:center;border-radius:8px;margin-right:30px;flex-shrink:0;box-shadow:0 4px 8px rgba(0,0,0,.15);position:relative}@media(max-width: 768px){.novel-page .novel-container .novel-header .novel-cover{margin-right:0;margin-bottom:20px}}.novel-page .novel-container .novel-header .book-id-tag{position:absolute;right:0;bottom:0;background-color:rgba(0,0,0,.6);color:#fff;font-size:12px;padding:2px 6px}.novel-page .novel-container .novel-header .novel-info{flex:1}.novel-page .novel-container .novel-header .novel-info .novel-title{font-size:22px;font-weight:bold;color:#333;margin-bottom:12px}.novel-page .novel-container .novel-header .novel-info .novel-meta{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.novel-page .novel-container .novel-header .novel-info .novel-meta .author-info{display:flex;align-items:center;justify-content:center;cursor:pointer}.novel-page .novel-container .novel-header .novel-info .novel-meta .author-info .author-avatar,.novel-page .novel-container .novel-header .novel-info .novel-meta .author-info .author-avatar-placeholder{width:30px;height:30px;border-radius:50%;margin-right:10px}.novel-page .novel-container .novel-header .novel-info .novel-meta .author-info .author-avatar{object-fit:cover}.novel-page .novel-container .novel-header .novel-info .novel-meta .author-info .author-avatar-placeholder{display:flex;align-items:center;justify-content:center;background-color:#947358;color:#fff;font-weight:bold}.novel-page .novel-container .novel-header .novel-info .novel-meta .author-info .author-name{font-size:16px;color:#666}.novel-page .novel-container .novel-header .novel-info .novel-meta .author-info .author-name:hover{color:#947358}.novel-page .novel-container .novel-header .novel-info .novel-meta .novel-type{font-size:14px;padding:4px 10px;background-color:rgba(148,115,88,.1);color:#947358;border-radius:20px}.novel-page .novel-container .novel-header .novel-info .novel-stats{display:flex;margin-bottom:14px;flex-wrap:wrap}.novel-page .novel-container .novel-header .novel-info .novel-stats .stat-item{display:flex;flex-direction:column;align-items:center;margin-right:30px;margin-bottom:10px}.novel-page .novel-container .novel-header .novel-info .novel-stats .stat-item:last-child{margin-right:0}.novel-page .novel-container .novel-header .novel-info .novel-stats .stat-item .stat-icon{font-size:20px;margin-bottom:4px}.novel-page .novel-container .novel-header .novel-info .novel-stats .stat-item .stat-value{font-size:16px;font-weight:bold;color:#333;margin-bottom:2px}.novel-page .novel-container .novel-header .novel-info .novel-stats .stat-item .stat-label{font-size:12px;color:#666}.novel-page .novel-container .novel-header .novel-info .novel-tags{margin-bottom:16px}.novel-page .novel-container .novel-header .novel-info .novel-tags .tag{display:inline-block;padding:5px 11px;background-color:rgba(148,115,88,.1);color:#947358;border-radius:20px;font-size:14px;margin-right:8px;margin-bottom:8px}.novel-page .novel-container .novel-header .novel-info .novel-tags .tag.activity{color:#ec8600;background-color:#ffcfa5}.novel-page .novel-container .novel-header .novel-info .novel-actions{display:flex;flex-wrap:wrap}.novel-page .novel-container .novel-header .novel-info .novel-actions .action-button{padding:8px 16px;border-radius:4px;cursor:pointer;transition:all .3s ease;font-size:14px;margin-right:12px;margin-bottom:10px;min-width:90px}.novel-page .novel-container .novel-header .novel-info .novel-actions .action-button.primary{background-color:#ea7034;color:#fff;border:none}.novel-page .novel-container .novel-header .novel-info .novel-actions .action-button.primary:hover{background-color:rgb(231.609375,95.7209821429,28.890625)}.novel-page .novel-container .novel-header .novel-info .novel-actions .action-button.reading-button{min-width:150px;position:relative;padding:10px 16px}.novel-page .novel-container .novel-header .novel-info .novel-actions .action-button.reading-button .reading-info{display:flex;flex-direction:column;align-items:center}.novel-page .novel-container .novel-header .novel-info .novel-actions .action-button.reading-button .reading-info span{font-weight:bold;font-size:16px}.novel-page .novel-container .novel-header .novel-info .novel-actions .action-button.reading-button .reading-info small{font-size:12px;opacity:.8;margin-top:2px}.novel-page .novel-container .novel-header .novel-info .novel-actions .action-button.reading-button .progress-indicator{position:absolute;bottom:0;left:0;width:100%;height:4px;background-color:rgba(0,0,0,.1);border-radius:0 0 4px 4px;overflow:hidden}.novel-page .novel-container .novel-header .novel-info .novel-actions .action-button.reading-button .progress-indicator .progress-bar{height:100%;background-color:hsla(0,0%,100%,.7);transition:width .5s ease}.novel-page .novel-container .novel-header .novel-info .novel-actions .action-button:not(.primary){background-color:rgba(0,0,0,0);border:1px solid #947358;color:#947358}.novel-page .novel-container .novel-header .novel-info .novel-actions .action-button:not(.primary):hover{background-color:rgba(148,115,88,.05)}.novel-page .novel-container .novel-rank{display:flex;justify-content:space-between;align-items:center;background-color:rgba(0,0,0,.05);border-radius:8px;padding:15px 20px;margin-bottom:20px}.novel-page .novel-container .novel-rank .rank-info{color:#947358;text-decoration:none;font-size:16px}.novel-page .novel-container .novel-rank .rank-info .rank-number{font-size:20px;font-weight:bold;margin:0 5px}.novel-page .novel-container .novel-rank .rank-value{font-size:20px;font-weight:bold;color:#ea7034;text-decoration:none}.novel-page .novel-container .novel-content{margin-top:20px}.novel-page .novel-container .novel-content .content-tabs{display:flex;border-bottom:1px solid #eee;margin-bottom:20px;overflow-x:auto}.novel-page .novel-container .novel-content .content-tabs .tab-button{padding:8px 16px;border-radius:4px;cursor:pointer;transition:all .3s ease;font-size:14px;background:none;border:none;border-bottom:2px solid rgba(0,0,0,0);color:#666;padding:10px 20px;margin-right:10px;border-radius:0;white-space:nowrap}.novel-page .novel-container .novel-content .content-tabs .tab-button.active{color:#947358;border-bottom-color:#947358}.novel-page .novel-container .novel-content .tab-content{min-height:200px}.novel-page .novel-container .novel-content .tab-content .empty-content{color:#888;font-style:italic;text-align:center;padding:30px 0}.novel-page .novel-container .novel-content .tab-content .intro-content{line-height:1.8;color:#333;white-space:pre-line}.novel-page .novel-container .novel-content .tab-content .worlds-content{margin:15px 0}.novel-page .novel-container .novel-content .tab-content .worlds-content .worlds-grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(300px, 1fr));gap:20px}@media(max-width: 768px){.novel-page .novel-container .novel-content .tab-content .worlds-content .worlds-grid{grid-template-columns:1fr}}.novel-page .novel-container .novel-content .tab-content .worlds-content .worlds-grid .world-card{background-color:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.1);transition:transform .2s,box-shadow .2s;position:relative;display:flex;height:140px}.novel-page .novel-container .novel-content .tab-content .worlds-content .worlds-grid .world-card:hover{transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,0,0,.15)}.novel-page .novel-container .novel-content .tab-content .worlds-content .worlds-grid .world-card .world-cover{width:100px;height:100%;background-size:cover;background-position:center}.novel-page .novel-container .novel-content .tab-content .worlds-content .worlds-grid .world-card .world-info{flex:1;padding:15px;overflow:hidden}.novel-page .novel-container .novel-content .tab-content .worlds-content .worlds-grid .world-card .world-info .world-title{font-size:16px;font-weight:bold;margin:0 0 10px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.novel-page .novel-container .novel-content .tab-content .worlds-content .worlds-grid .world-card .world-info .world-title .world-tag{font-size:12px;background-color:#faad14;color:#fff;padding:2px 6px;border-radius:4px;margin-left:8px;font-weight:normal;vertical-align:middle}.novel-page .novel-container .novel-content .tab-content .worlds-content .worlds-grid .world-card .world-info .world-author{display:flex;align-items:center;margin-bottom:10px}.novel-page .novel-container .novel-content .tab-content .worlds-content .worlds-grid .world-card .world-info .world-author .world-author-avatar{width:20px;height:20px;border-radius:50%;margin-right:6px}.novel-page .novel-container .novel-content .tab-content .worlds-content .worlds-grid .world-card .world-info .world-author .world-author-name{font-size:12px;color:#666}.novel-page .novel-container .novel-content .tab-content .worlds-content .worlds-grid .world-card .world-info .world-description{font-size:12px;color:#888;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;margin:0}.novel-page .novel-container .novel-content .tab-content .worlds-content .worlds-grid .world-card .world-link{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}.novel-page .novel-container .novel-content .tab-content .fans-content{margin:15px 0}.novel-page .novel-container .novel-content .tab-content .chapters-content .chapter-list{display:flex;flex-direction:column}.novel-page .novel-container .novel-content .tab-content .chapters-content .chapter-list .chapter-item{display:flex;align-items:center;padding:10px 15px;border-bottom:1px solid #f5f5f5;text-decoration:none;color:#333;transition:background-color .2s}.novel-page .novel-container .novel-content .tab-content .chapters-content .chapter-list .chapter-item:hover{background-color:#f5f5f5}.novel-page .novel-container .novel-content .tab-content .chapters-content .chapter-list .chapter-item .chapter-number{flex:0 0 50px;color:#947358;font-weight:bold}.novel-page .novel-container .novel-content .tab-content .chapters-content .chapter-list .chapter-item .chapter-title{flex:1}.novel-page .novel-container .novel-content .tab-content .chapters-content .chapter-list .chapter-item .chapter-date{color:#888;font-size:12px}.novel-page .novel-container .novel-content .tab-content .comments-content .comment-list .comment-item{background-color:rgba(148,115,88,.05);border-radius:8px;padding:15px;margin-bottom:15px}.novel-page .novel-container .novel-content .tab-content .comments-content .comment-list .comment-item .comment-content{font-size:14px;line-height:1.6;margin-bottom:10px}.novel-page .novel-container .novel-content .tab-content .comments-content .comment-list .comment-item .comment-footer{display:flex;justify-content:space-between;font-size:12px;color:#666}.novel-page .novel-container .novel-content .tab-content .comments-content .comment-list .comment-item .comment-footer .comment-likes{display:flex;align-items:center}.novel-page .novel-container .novel-content .tab-content .comments-content .comment-list .comment-item .comment-footer .comment-likes .like-icon{margin-right:5px;color:#ff6b6b}.novel-page .novel-container .novel-content .tab-content .comments-content .view-all-comments{display:block;text-align:center;color:#947358;text-decoration:none;padding:10px;border-top:1px solid #eee;margin-top:20px;cursor:pointer}.novel-page .novel-container .novel-content .tab-content .comments-content .view-all-comments:hover{background-color:rgba(148,115,88,.05)}.novel-page .recommended-novels{margin-top:40px}.novel-page .recommended-novels .section-title{font-size:20px;margin-bottom:20px;color:#704c35}.novel-page .recommended-novels .novels-grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(160px, 1fr));gap:20px}@media(max-width: 576px){.novel-page .recommended-novels .novels-grid{grid-template-columns:repeat(2, 1fr);gap:10px}}.novel-page .recommended-novels .novels-grid .mini-novel-card{position:relative;border-radius:6px;overflow:hidden;box-shadow:0 2px 6px rgba(0,0,0,.1);transition:transform .2s,box-shadow .2s}.novel-page .recommended-novels .novels-grid .mini-novel-card:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,.15)}.novel-page .recommended-novels .novels-grid .mini-novel-card .mini-novel-cover{height:200px;background-size:cover;background-position:center}.novel-page .recommended-novels .novels-grid .mini-novel-card .mini-novel-info{padding:10px}.novel-page .recommended-novels .novels-grid .mini-novel-card .mini-novel-info .mini-novel-title{font-size:14px;font-weight:bold;margin-bottom:5px;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.novel-page .recommended-novels .novels-grid .mini-novel-card .mini-novel-info .mini-novel-author{font-size:12px;color:#666;margin:0}.novel-page .recommended-novels .novels-grid .mini-novel-card .mini-novel-link{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}.gift-box{width:200px;height:200px;position:fixed;left:calc(50% - 100px);top:110vh;z-index:9999;pointer-events:none}.gift-background{position:absolute;top:0;left:0;width:100%;height:100%}.gift{position:absolute;top:20%;left:20%;width:60%;height:60%}.tipping-popup{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000}.tipping-popup .tipping-content{background-color:#fff;border-radius:8px;width:90%;max-width:400px;padding:20px}.tipping-popup .tipping-content h3{font-size:18px;margin:0 0 20px 0;text-align:center;color:#ea7034}.tipping-popup .tipping-content .tipping-options{display:flex;flex-wrap:wrap;justify-content:center;margin-bottom:20px}.tipping-popup .tipping-content .tipping-buttons{display:flex;justify-content:space-between}.tipping-popup .tipping-content .tipping-buttons button{padding:8px 16px;border-radius:4px;cursor:pointer;transition:all .3s ease;font-size:14px;min-width:100px}.tipping-popup .tipping-content .tipping-buttons button:first-child{background-color:#f5f5f5;color:#333}.tipping-popup .tipping-content .tipping-buttons button:last-child{background-color:#ea7034;color:#fff}",""]),e.exports=o},425:function(e,t,n){"use strict";n.r(t);n(27),n(15),n(21),n(47),n(48),n(49);var o=n(0),r=(n(50),n(46),n(28),n(357),n(34),n(37),n(51),n(52),n(12));n(359);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={props:{novelId:{type:[Number,String],required:!0},limit:{type:Number,default:10}},data:function(){return{loading:!0,fanInfo:[],myInfo:{rank:"未上榜",fans_value:0,name:"",avatar_url:""},rankClasses:["rank-first","rank-second","rank-third"]}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getFansList();case 2:case"end":return t.stop()}}),t)})))()},methods:{getFansList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$api.novels.getNovelFans(e.novelId);case 4:if(n=t.sent,e.fanInfo=n||[],!localStorage.getItem("token")){t.next=9;break}return t.next=9,e.getMyInfo();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.error("获取粉丝榜失败",t.t0);case 14:return t.prev=14,e.loading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})))()},getMyInfo:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.$auth.user){t.next=4;break}return t.abrupt("return");case 4:e.myInfo=c(c(c({},e.myInfo),n),{},{avatar_url:n.avatar,name:n.name||n.username}),i=0;case 6:if(!(i<e.fanInfo.length)){t.next=14;break}if(e.fanInfo[i].user_id!=n.id){t.next=11;break}return e.myInfo.rank="第 ".concat(i+1," 名"),e.myInfo.fans_value=e.fanInfo[i].fans_value,t.abrupt("break",14);case 11:i++,t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.error("获取当前用户粉丝信息失败",t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()},gotoUserProfile:function(e){this.$router.push("/user/".concat(e))}}},d=(n(412),n(10));function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,a){if(e){if("string"==typeof e)return m(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,a):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,l=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw l}}}}function m(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=Array(a);t<a;t++)n[t]=e[t];return n}var h={components:{NovelFansList:Object(d.a)(v,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"fans-ranking"},[e.loading?t("div",{staticClass:"loading-wrapper"},[t("div",{staticClass:"loading-spinner"}),e._v(" "),t("p",[e._v("正在加载粉丝榜...")])]):t("div",{staticClass:"fans-list-wrapper"},[t("div",{staticClass:"fans-list"},e._l(e.fanInfo,(function(n,o){return t("div",{key:n.user_id,staticClass:"fan-item"},[t("div",{staticClass:"fan-rank"},[t("div",{class:o<=2?e.rankClasses[o]:"rank-number"},[e._v("\n            "+e._s(o+1)+"\n          ")])]),e._v(" "),t("div",{staticClass:"fan-avatar"},[t("img",{attrs:{src:n.avatar_url,alt:"头像"},on:{click:function(t){return e.gotoUserProfile(n.user_id)}}})]),e._v(" "),t("div",{staticClass:"fan-details"},[t("div",{staticClass:"fan-info"},[t("span",{staticClass:"fan-name",on:{click:function(t){return e.gotoUserProfile(n.user_id)}}},[e._v(e._s(n.user_name))]),e._v(" "),t("span",{staticClass:"fan-value"},[e._v(e._s(n.fans_value))])]),e._v(" "),t("div",{staticClass:"fan-message"},[e._v("\n            此书只应天上有，当赏当赏！\n          ")])])])})),0),e._v(" "),e.$auth.loggedIn&&e.myInfo.name?t("div",{staticClass:"my-info-wrapper"},[t("div",{staticClass:"my-info-rank"},[e._v("\n        "+e._s(e.myInfo.rank)+"\n      ")]),e._v(" "),t("div",{staticClass:"my-info"},[t("div",{staticClass:"my-avatar"},[t("img",{attrs:{src:e.myInfo.avatar_url,alt:"我的头像"}})]),e._v(" "),t("div",{staticClass:"my-details"},[t("span",{staticClass:"my-name"},[e._v(e._s(e.myInfo.name))]),e._v(" "),t("span",{staticClass:"my-value"},[e._v(e._s(e.myInfo.fans_value))])])])]):e._e()])])}),[],!1,null,"438a0409",null).exports},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r,l,c,v,d,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.params,o=e.$api,r=e.error,l=e.redirect,t.prev=1,t.next=4,o.novels.getNovelById(n.id);case 4:if((c=t.sent)&&0!==c.length){t.next=7;break}return t.abrupt("return",r({statusCode:404,message:"找不到该小说"}));case 7:if("world"!==(v=c[0]).novel_type){t.next=10;break}return t.abrupt("return",l("/worlds?novel_id=".concat(v.novel_id)));case 10:return t.next=12,o.articles.getArticles(v.novel_id);case 12:return d=t.sent,t.next=15,o.novels.getNovelTags(v.novel_id);case 15:return f=t.sent,t.abrupt("return",{error:null,novel:v,chapters:d||[],tags:f||[]});case 19:return t.prev=19,t.t0=t.catch(1),console.error("服务端获取小说数据失败",t.t0),t.abrupt("return",r({statusCode:500,message:"加载小说数据失败，请稍后重试"}));case 23:case"end":return t.stop()}}),t,null,[[1,19]])})))()},data:function(){return{error:null,activeTab:"intro",isInBookcase:!1,recommendedNovels:[],history:1,progressArticle:{},commentInfo:[],commentAmount:0,niceStatus:!1,nice_amount:0,fanInfo:[],novelRank:{onRank:!1,rank:0,ranking:0},worlds:[],showTippingPopup:!1,giftImage:""}},head:function(){var e,t;return{title:null!==(e=this.novel)&&void 0!==e&&e.name?"".concat(this.novel.name," - 原木社区"):"小说详情 - 原木社区",meta:[{hid:"description",name:"description",content:null!==(t=this.novel)&&void 0!==t&&t.content?this.novel.content.substring(0,150):"原木社区小说详情页"},{hid:"keywords",name:"keywords",content:this.tags.map((function(e){return e.tag_name})).join(",")||"小说,原木社区,阅读"}]}},computed:{articleLength:function(){return this.chapters.length},historyShown:function(){var e,t=0,n=f(this.chapters);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(t++,o.article_chapter==this.history)return t}}catch(e){n.e(e)}finally{n.f()}return this.history}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchClientData();case 2:case"end":return t.stop()}}),t)})))()},methods:{fetchClientData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.novels.getAllNovels();case 3:n=t.sent,e.recommendedNovels=n.filter((function(t){return t.novel_id!==e.novel.novel_id})).sort((function(){return.5-Math.random()})).slice(0,6),e.getNices(),e.getCommentNum(),e.getNovelComments(),e.getFansStatistics(),e.getWorlds(),e.checkNovelRank(),e.checkBookcaseStatus(),e.getReadingProgress(),e.addReaderHistory(e.novel),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.error("获取客户端数据失败",t.t0);case 19:return t.prev=19,t.finish(19);case 21:case"end":return t.stop()}}),t,null,[[0,16,19,21]])})))()},getNovelTags:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.novels.getNovelTags(e.novel.novel_id);case 3:n=t.sent,e.tags=n||[],t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("获取标签失败",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getCommentNum:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.community.getNovelCommentsAmount(e.novel.novel_id);case 3:(n=t.sent)&&n.length>0&&(e.commentAmount=n[0]["COUNT(*)"]),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("获取评论数量失败",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getNovelComments:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.community.getNovelComments(e.novel.novel_id);case 3:n=t.sent,e.commentInfo=n.slice(0,3),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("获取评论失败",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getNices:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.novels.getNicesById(e.novel.novel_id);case 3:if((n=t.sent)&&n.length>0&&(e.nice_amount=n[0].nices),!localStorage.getItem("token")){t.next=10;break}return t.next=8,e.$api.novels.getNiceStatus(e.novel.novel_id);case 8:(o=t.sent)&&o.length>0&&1===o[0].nices&&(e.niceStatus=!0);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error("获取喜欢状态失败",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},checkNovelRank:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.novels.checkNovelRank(e.novel.novel_id);case 3:(n=t.sent)&&n.length>0&&(e.novelRank.onRank=!0,e.novelRank.rank=n[0].rank,e.novelRank.ranking=n[0].ranking),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("获取排行信息失败",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getFansStatistics:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.novels.getNovelFans(e.novel.novel_id);case 3:n=t.sent,e.fanInfo=n&&n.length>0?[{}]:[],t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("获取粉丝统计失败",t.t0),e.fanInfo=[];case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getWorlds:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.worlds.getAssoWorldByNovelId(e.novel.novel_id);case 3:n=t.sent,e.worlds=n||[],t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("获取关联世界失败",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},checkBookcaseStatus:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.getItem("token")){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.$api.bookcase.getLikesOf();case 5:(n=t.sent)&&(e.isInBookcase=n.some((function(t){return t.novel_id===e.novel.novel_id}))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error("获取收藏状态失败",t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()},getReadingProgress:function(){var e=localStorage.getItem("ReaderHistory_".concat(this.novel.novel_id));if(e&&(this.history=parseInt(e)),this.chapters.length>0){var t,n=this.chapters[0],o=f(this.chapters);try{for(o.s();!(t=o.n()).done;){var r=t.value;if(r.article_chapter==this.history){n=r;break}}}catch(e){o.e(e)}finally{o.f()}this.getChapterContent(n.article_id)}},getChapterContent:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var article;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$api.articles.getArticle(e);case 3:(article=n.sent)&&article.length>0&&(t.progressArticle=article[0]),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.error("获取章节内容失败",n.t0),t.progressArticle={title:"章节加载失败",content:"无法加载章节内容"};case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()},addReaderHistory:function(e){try{var t=JSON.parse(localStorage.getItem("loghomeReaderHistory"))||[];(t=t.filter((function(t){return t.novel_id!==e.novel_id}))).push(e),t.length>10&&(t=t.slice(-10)),localStorage.setItem("loghomeReaderHistory",JSON.stringify(t))}catch(e){console.error("保存阅读历史失败",e)}},startReading:function(){if(0!==this.chapters.length)if(1===this.history)this.$router.push("/article/".concat(this.chapters[0].article_id));else{var e,t=this.chapters[0].article_id,n=f(this.chapters);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(o.article_chapter==this.history){t=o.article_id;break}}}catch(e){n.e(e)}finally{n.f()}this.$router.push("/article/".concat(t))}else this.$message.info("本书还没有章节")},toggleLike:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.getItem("token")){t.next=3;break}return e.$router.push("/login"),t.abrupt("return");case 3:if(t.prev=3,!e.isInBookcase){t.next=10;break}return t.next=7,e.$api.bookcase.removeLikeNovel(e.novel.novel_id);case 7:e.$message.success("已从书架移除"),t.next=13;break;case 10:return t.next=12,e.$api.bookcase.likeNovel(e.novel.novel_id);case 12:e.$message.success("成功添加到书架");case 13:e.isInBookcase=!e.isInBookcase,t.next=20;break;case 16:t.prev=16,t.t0=t.catch(3),console.error("切换收藏状态失败",t.t0),e.$message.error("操作失败，请稍后重试");case 20:case"end":return t.stop()}}),t,null,[[3,16]])})))()},nice:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.getItem("token")){t.next=3;break}return e.$router.push("/login"),t.abrupt("return");case 3:return t.prev=3,t.next=6,e.$api.novels.niceNovel(e.novel.novel_id);case 6:e.getNices(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),console.error("点赞失败",t.t0),e.$message.error("操作失败，请稍后重试");case 13:case"end":return t.stop()}}),t,null,[[3,9]])})))()},tip:function(){localStorage.getItem("token")?this.$auth.user.id!==this.novel.auther_id?this.showTippingPopup=!0:this.$message.info("不能给自己的书打赏哦"):this.$router.push("/login")},confirmTip:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.runGiftAnimation(),e.showTippingPopup=!1;case 2:case"end":return t.stop()}}),t)})))()},runGiftAnimation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/images/gift.png";this.giftImage=e,setTimeout((function(){document.getElementById("gift-box").animate([{top:"110vh",transform:"scale(0.1, 0.1)"},{top:"16vh",transform:"scale(0.6, 0.6)",offset:.16},{top:"37vh",transform:"scale(0.9, 0.9)",offset:.28},{top:"36vh",transform:"scale(0.8, 0.8)",offset:.32},{top:"36vh",transform:"scale(0.8, 0.8)",offset:.48},{top:"36vh",transform:"scale(1.0, 1.0)",offset:.72},{top:"36vh",transform:"scale(1.0, 1.0)"}],{duration:4e3,iteration:1,easing:"ease-out"}),document.getElementById("gift-background").animate([{transform:"scale(0.2, 0.2)"},{transform:"scale(0.2, 0.2)",filter:"drop-shadow(0px 0px 0px rgba(255, 199, 101, 0.6)) brightness(0.0)",offset:.56},{transform:"scale(1.4, 1.4)",filter:"drop-shadow(0px 0px 10px rgba(255, 199, 101, 0.6)) brightness(1.0)",offset:.72},{transform:"scale(1.2, 1.2) rotate(30deg)",filter:"drop-shadow(0px 0px 10px rgba(255, 199, 101, 0.6)) brightness(0.9)",offset:.79},{transform:"scale(1.4, 1.4) rotate(60deg)",filter:"drop-shadow(0px 0px 10px rgba(255, 199, 101, 0.6)) brightness(0.8)",offset:.86},{transform:"scale(1.2, 1.2) rotate(90deg)",filter:"drop-shadow(0px 0px 10px rgba(255, 199, 101, 0.6)) brightness(0.9)",offset:.93},{transform:"scale(1.4, 1.4) rotate(120deg)",filter:"drop-shadow(0px 0px 10px rgba(255, 199, 101, 0.6)) brightness(1.0)"}],{duration:4e3,iteration:1,easing:"ease-out"})}),100)},shareBook:function(){var e=this,content="我正在原木社区读《".concat(this.novel.name,"》，你也一起来看看吧！\nhttps://loghome.com/novel/").concat(this.novel.novel_id);if(navigator.clipboard)navigator.clipboard.writeText(content).then((function(){return e.$message.success("分享链接已复制到剪贴板")})).catch((function(){return e.$message.error("复制失败，请手动复制")}));else{var textarea=document.createElement("textarea");textarea.value=content,document.body.appendChild(textarea),textarea.select(),document.execCommand("copy"),document.body.removeChild(textarea),this.$message.success("分享链接已复制到剪贴板")}},gotoUserProfile:function(e){this.$router.push("/user/".concat(e))},showDescription:function(content){var e=this;this.$modal.show("dialog",{title:"作品简介",text:content,buttons:[{title:"关闭",handler:function(){return e.$modal.hide("dialog")}}]})},richtext2text:function(e){if(!e)return"加载中";try{var t,n=JSON.parse(e),o="",r=f(n);try{for(r.s();!(t=r.n()).done;){var l=t.value;"text"===l.type&&(o+=l.value+"\n"),"image"===l.type&&(o+="[图片]\n")}}catch(e){r.e(e)}finally{r.f()}return o}catch(e){return console.error("解析富文本失败",e),"无法解析内容"}},formatNumber:function(e){return e>=1e4?(e/1e4).toFixed(1)+"万":e>=1e3?(e/1e3).toFixed(1)+"k":e},formatDate:function(e){if(!e)return"";var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"),"-").concat(String(t.getDate()).padStart(2,"0"))},utc2beijing:function(e){if(!e)return"";var t=e.indexOf("T"),n=e.indexOf("Z"),o=e.substr(0,t)+" "+e.substr(t+1,n-t-1),r=new Date(Date.parse(o)).getTime()/1e3;r+=28800;var l=new Date(1e3*r);return"".concat(l.getFullYear(),"-").concat(String(l.getMonth()+1).padStart(2,"0"),"-").concat(String(l.getDate()).padStart(2,"0"))},showAllComments:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!localStorage.getItem("token")){t.next=9;break}return t.next=4,e.$api.users.generateCrossSiteToken();case 4:n=t.sent.crossSiteToken,console.log(n),e.$windowManager.createWindow({title:"小说评论",url:"".concat("https://loghome.codesocean.top","/#/pages/users/external_login?token=").concat(n,"&redirectTo=").concat(encodeURIComponent("/pages/readers/bookComment?id=".concat(e.novel.novel_id)),"&hideback=true"),width:500,height:800}),t.next=10;break;case 9:e.$router.push("/login");case 10:case"end":return t.stop()}}),t)})))()}}},x=h,w=(n(414),Object(d.a)(x,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"novel-page"},[e.error?t("div",{staticClass:"error-container"},[t("p",[e._v(e._s(e.error))]),e._v(" "),t("nuxt-link",{staticClass:"back-button",attrs:{to:"/read"}},[e._v("返回小说列表")])],1):e._e(),e._v(" "),t("div",{staticClass:"novel-container"},[t("div",{staticClass:"gift-box",attrs:{id:"gift-box"}},[t("img",{staticClass:"gift-background",attrs:{id:"gift-background",src:n(411)}}),e._v(" "),t("img",{staticClass:"gift",attrs:{id:"gift",src:e.giftImage}})]),e._v(" "),t("div",{staticClass:"novel-header"},[e.novel.picUrl?t("div",{staticClass:"novel-cover",style:"background-image: url(".concat(e.novel.picUrl,")")}):t("div",{staticClass:"novel-cover",style:"background-color: hsl(".concat(30*e.novel.novel_id%360,", 70%, 80%)")}),e._v(" "),t("div",{staticClass:"book-id-tag"},[e._v("ID "+e._s(e.novel.novel_id))]),e._v(" "),t("div",{staticClass:"novel-info"},[t("h1",{staticClass:"novel-title"},[e._v(e._s(e.novel.name))]),e._v(" "),t("div",{staticClass:"novel-meta"},[t("div",{staticClass:"author-info",on:{click:function(t){return e.gotoUserProfile(e.novel.auther_id)}}},[e.novel.auther_avatar?t("img",{staticClass:"author-avatar",attrs:{src:e.novel.auther_avatar,alt:"作者头像"}}):t("div",{staticClass:"author-avatar-placeholder"},[e._v(e._s(e.novel.author_name?e.novel.author_name.charAt(0):"作")+"\n            ")]),e._v(" "),t("span",{staticClass:"author-name"},[e._v(e._s(e.novel.author_name||"佚名"))])])]),e._v(" "),t("div",{staticClass:"novel-stats"},[t("div",{staticClass:"stat-item"},[t("span",{staticClass:"stat-icon"},[e._v("👁️")]),e._v(" "),t("span",{staticClass:"stat-value"},[e._v(e._s(e.formatNumber(e.novel.clicks||0)))]),e._v(" "),t("span",{staticClass:"stat-label"},[e._v("阅读量")])]),e._v(" "),t("div",{staticClass:"stat-item"},[t("span",{staticClass:"stat-icon"},[e._v("❤️")]),e._v(" "),t("span",{staticClass:"stat-value"},[e._v(e._s(e.formatNumber(e.nice_amount||0)))]),e._v(" "),t("span",{staticClass:"stat-label"},[e._v("喜欢")])]),e._v(" "),t("div",{staticClass:"stat-item"},[t("span",{staticClass:"stat-icon"},[e._v("📃")]),e._v(" "),t("span",{staticClass:"stat-value"},[e._v(e._s(e.formatNumber(e.novel.text_count||0)))]),e._v(" "),t("span",{staticClass:"stat-label"},[e._v("字数")])]),e._v(" "),t("div",{staticClass:"stat-item"},[t("span",{staticClass:"stat-icon"},[e._v("📚")]),e._v(" "),t("span",{staticClass:"stat-value"},[e._v(e._s(1==e.novel.is_complete?"已完结":"连载中"))]),e._v(" "),t("span",{staticClass:"stat-label"},[e._v("状态")])])]),e._v(" "),t("div",{staticClass:"novel-tags"},e._l(e.tags,(function(n){return t("span",{key:n.tag_id,staticClass:"tag",class:{activity:n.is_activity_tag}},[e._v(e._s(n.tag_name))])})),0),e._v(" "),t("div",{staticClass:"novel-actions"},[e.chapters.length>0?t("button",{staticClass:"action-button primary reading-button",on:{click:e.startReading}},[t("div",{staticClass:"reading-info"},[t("span",[e._v(e._s(e.historyShown>1?"继续阅读":"开始阅读"))]),e._v(" "),e.historyShown>1?t("small",[e._v("已读 "+e._s(Math.min(e.historyShown/e.chapters.length*100,100).toFixed(0))+"%")]):e._e()]),e._v(" "),e.historyShown>1?t("div",{staticClass:"progress-indicator"},[t("div",{staticClass:"progress-bar",style:{width:"".concat(Math.min(e.historyShown/e.chapters.length*100,100),"%")}})]):e._e()]):e._e(),e._v(" "),t("button",{staticClass:"action-button",on:{click:e.toggleLike}},[e.isInBookcase?t("span",[e._v("已收藏")]):t("span",[e._v("收藏")])]),e._v(" "),t("button",{staticClass:"action-button",on:{click:e.tip}},[e._v("打赏")]),e._v(" "),t("button",{staticClass:"action-button",on:{click:e.shareBook}},[e._v("分享")])])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.novelRank.onRank,expression:"novelRank.onRank"}],staticClass:"novel-rank"},[t("nuxt-link",{staticClass:"rank-info",attrs:{to:"/read/collections?title=原木力爆棚"}},[e._v("\n        实时原木力榜第\n        "),t("span",{staticClass:"rank-number"},[e._v(e._s(e.novelRank.rank))]),e._v("\n        位\n      ")]),e._v(" "),t("nuxt-link",{staticClass:"rank-value",attrs:{to:"/read/collections?title=原木力爆棚"}},[e._v("\n        "+e._s(e.novelRank.ranking)+"\n      ")])],1),e._v(" "),t("div",{staticClass:"novel-content"},[t("div",{staticClass:"content-tabs"},[t("button",{staticClass:"tab-button",class:{active:"intro"===e.activeTab},on:{click:function(t){e.activeTab="intro"}}},[e._v("\n          作品简介\n        ")]),e._v(" "),t("button",{staticClass:"tab-button",class:{active:"chapters"===e.activeTab},on:{click:function(t){e.activeTab="chapters"}}},[e._v("\n          章节目录 ("+e._s(e.chapters.length)+")\n        ")]),e._v(" "),t("button",{staticClass:"tab-button",class:{active:"comments"===e.activeTab},on:{click:function(t){e.activeTab="comments"}}},[e._v("\n          读者评论 ("+e._s(e.commentAmount)+")\n        ")]),e._v(" "),e.worlds.length>0?t("button",{staticClass:"tab-button",class:{active:"worlds"===e.activeTab},on:{click:function(t){e.activeTab="worlds"}}},[e._v("\n          世界设定 ("+e._s(e.worlds.length)+")\n        ")]):e._e(),e._v(" "),e.fanInfo.length>0?t("button",{staticClass:"tab-button",class:{active:"fans"===e.activeTab},on:{click:function(t){e.activeTab="fans"}}},[e._v("\n          粉丝榜\n        ")]):e._e()]),e._v(" "),t("div",{staticClass:"tab-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:"intro"===e.activeTab,expression:"activeTab === 'intro'"}],staticClass:"intro-content"},[e.novel.content?t("p",[e._v(e._s(e.novel.content))]):t("p",{staticClass:"empty-content"},[e._v("暂无简介")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"chapters"===e.activeTab,expression:"activeTab === 'chapters'"}],staticClass:"chapters-content"},[0===e.chapters.length?t("div",{staticClass:"empty-content"},[e._v("\n            暂无章节\n          ")]):t("div",{staticClass:"chapter-list"},e._l(e.chapters,(function(n){return t("nuxt-link",{key:n.article_id,staticClass:"chapter-item",attrs:{to:"/article/".concat(n.article_id)}},[t("span",{staticClass:"chapter-number"},[e._v(e._s(n.article_chapter))]),e._v(" "),t("span",{staticClass:"chapter-title"},[e._v(e._s(n.title))]),e._v(" "),t("span",{staticClass:"chapter-date"},[e._v(e._s(e.formatDate(n.update_time)))])])})),1)]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"comments"===e.activeTab,expression:"activeTab === 'comments'"}],staticClass:"comments-content"},[0===e.commentInfo.length?t("div",{staticClass:"empty-content"},[t("p",[e._v("这本书还没有评论哦，快去抢沙发")])]):t("div",{staticClass:"comment-list"},e._l(e.commentInfo,(function(n){return t("div",{key:n.essay_comment_id,staticClass:"comment-item"},[t("div",{staticClass:"comment-content"},[e._v(e._s(n.content))]),e._v(" "),t("div",{staticClass:"comment-footer"},[t("span",{staticClass:"comment-author"},[e._v(e._s(n.name))]),e._v(" "),t("span",{staticClass:"comment-likes"},[t("span",{staticClass:"like-icon"},[e._v("❤️")]),e._v("\n                  "+e._s(n.likeNum)+"\n                ")])])])})),0),e._v(" "),t("div",{staticClass:"view-all-comments",on:{click:e.showAllComments}},[e._v("\n            查看全部评论 ("+e._s(e.commentAmount)+")\n          ")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"worlds"===e.activeTab,expression:"activeTab === 'worlds'"}],staticClass:"worlds-content"},[t("div",{staticClass:"worlds-grid"},e._l(e.worlds,(function(n){return t("div",{key:n.novel_id,staticClass:"world-card"},[n.picUrl?t("div",{staticClass:"world-cover",style:"background-image: url(".concat(n.picUrl,")")}):t("div",{staticClass:"world-cover",style:"background-color: hsl(".concat(30*n.novel_id%360,", 70%, 80%)")}),e._v(" "),t("div",{staticClass:"world-info"},[t("h4",{staticClass:"world-title"},[e._v("\n                  "+e._s(n.name)+"\n                  "),"world"==n.novel_type?t("span",{staticClass:"world-tag"},[e._v("世界设定")]):e._e()]),e._v(" "),t("div",{staticClass:"world-author"},[n.avatar_url?t("img",{staticClass:"world-author-avatar",attrs:{src:n.avatar_url,alt:"作者头像"}}):e._e(),e._v(" "),t("span",{staticClass:"world-author-name"},[e._v(e._s(n.user_name))])]),e._v(" "),t("p",{staticClass:"world-description"},[e._v(e._s(n.content))])]),e._v(" "),t("nuxt-link",{staticClass:"world-link",attrs:{to:"/novel/".concat(n.novel_id)}})],1)})),0)]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"fans"===e.activeTab,expression:"activeTab === 'fans'"}],staticClass:"fans-content"},[t("NovelFansList",{attrs:{novelId:e.novel.novel_id,limit:3}})],1)])])]),e._v(" "),e.error?e._e():t("div",{staticClass:"recommended-novels"},[t("h2",{staticClass:"section-title"},[e._v("推荐阅读")]),e._v(" "),t("div",{staticClass:"novels-grid"},e._l(e.recommendedNovels,(function(n){return t("div",{key:n.novel_id,staticClass:"mini-novel-card"},[n.picUrl?t("div",{staticClass:"mini-novel-cover",style:"background-image: url(".concat(n.picUrl,")")}):t("div",{staticClass:"mini-novel-cover",style:"background-color: hsl(".concat(30*n.novel_id%360,", 70%, 80%)")}),e._v(" "),t("div",{staticClass:"mini-novel-info"},[t("h3",{staticClass:"mini-novel-title"},[e._v(e._s(n.name))]),e._v(" "),t("p",{staticClass:"mini-novel-author"},[e._v(e._s(n.author_name||"佚名"))])]),e._v(" "),t("nuxt-link",{staticClass:"mini-novel-link",attrs:{to:"/novel/".concat(n.novel_id)}})],1)})),0)]),e._v(" "),e.showTippingPopup?t("div",{staticClass:"tipping-popup"},[t("div",{staticClass:"tipping-content"},[t("h3",[e._v("打赏作者")]),e._v(" "),t("div",{staticClass:"tipping-options"}),e._v(" "),t("div",{staticClass:"tipping-buttons"},[t("button",{on:{click:function(t){e.showTippingPopup=!1}}},[e._v("取消")]),e._v(" "),t("button",{on:{click:e.confirmTip}},[e._v("确认打赏")])])])]):e._e()])}),[],!1,null,null,null));t.default=w.exports}}]);