(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{358:function(t,e,n){"use strict";var r=n(7),o=n(42),c=n(43),l=n(219),d=n(104),v=n(15),f=n(74).f,m=n(75).f,x=n(20).f,A=n(359).trim,h="Number",w=r[h],_=w,y=w.prototype,C=c(n(149)(y))==h,k="trim"in String.prototype,S=function(t){var e=d(t,!1);if("string"==typeof e&&e.length>2){var n,r,o,c=(e=k?e.trim():A(e,3)).charCodeAt(0);if(43===c||45===c){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===c){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var code,l=e.slice(2),i=0,v=l.length;i<v;i++)if((code=l.charCodeAt(i))<48||code>o)return NaN;return parseInt(l,r)}}return+e};if(!w(" 0o1")||!w("0b1")||w("+0x1")){w=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof w&&(C?v((function(){y.valueOf.call(n)})):c(n)!=h)?l(new _(S(e)),n,w):S(e)};for(var N,I=n(13)?f(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),V=0;I.length>V;V++)o(_,N=I[V])&&!o(w,N)&&x(w,N,m(_,N));w.prototype=y,y.constructor=w,n(23)(r,h,w)}},359:function(t,e,n){var r=n(3),o=n(51),c=n(15),l=n(360),d="["+l+"]",v=RegExp("^"+d+d+"*"),f=RegExp(d+d+"*$"),m=function(t,e,n){var o={},d=c((function(){return!!l[t]()||"​"!="​"[t]()})),v=o[t]=d?e(x):l[t];n&&(o[n]=v),r(r.P+r.F*d,"String",o)},x=m.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(v,"")),2&e&&(t=t.replace(f,"")),t};t.exports=m},360:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},505:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAzCAYAAAA6oTAqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAyMToxMDoyNSAxODoxMToyNknx73wAAACkSURBVGhD7daLCcMgFIVhmzGcyTkcyjmcyTVaKgaiWFLKtRzk/yCYBxIuJ17jAAAAIOPRxmVSSs92WsUYl73zaOMW/p7MyDKprZKhGFV0M1V0M1UUo4pupopiVJl9v3f7yR2LtUQyM2cy3vt6/a1SSh1JZkAxqihGlXk3G7tSzrnbf0II3fNP835BMjPsM8aWF/NeI9ej3V6CNTPDXzMAYG/OvQClOznLoM6LkQAAAABJRU5ErkJggg=="},508:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAyMToxMDoyNSAxODoxMToyNknx73wAAACLSURBVFhH7dSBCYAgEIVhawxncg6Hcg5nco1CMahANBUy+z+IK4M4jtcJAAAwtSXWYsaYLd52obUu6mGNdXjVE5VShudazrlQp5sojfbWnFGl1OUb1trLVki9J6Nv+09G73KZPZDRHD/J+zS91PlT/Ey9/bdRvxXOVzxu9pmJVu/RXqbbowAAjESIHegNN+wSNyQsAAAAAElFTkSuQmCC"},509:function(t,e,n){var content=n(546);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(26).default)("62354da1",content,!0,{sourceMap:!1})},510:function(t,e,n){var content=n(548);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(26).default)("95d1f9de",content,!0,{sourceMap:!1})},544:function(t,e,n){t.exports=n.p+"img/logo.578df2f.png"},545:function(t,e,n){"use strict";n(509)},546:function(t,e,n){var r=n(25)(!1);r.push([t.i,"\n.slide-verify[data-v-46b3df03] {\n  position: relative;\n  margin: 0 auto;\n  user-select: none;\n  padding: 15px;\n  background-color: #f5f5f5;\n  border-radius: 4px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n.verify-status[data-v-46b3df03] {\n  text-align: center;\n  margin-top: 10px;\n  color: #947358;\n  font-size: 14px;\n}\n.verify-status.success[data-v-46b3df03] {\n  color: #67c23a;\n}\n\n/* 自定义 Element UI 滑块样式 */\n.slide-verify[data-v-46b3df03] .el-slider__runway {\n  height: 40px;\n  margin: 0;\n  background-color: #e4e7eb;\n  border-radius: 4px;\n}\n.slide-verify[data-v-46b3df03] .el-slider__bar {\n  height: 40px;\n  background-color: #d1e9fe;\n  border-radius: 4px;\n}\n.slide-verify[data-v-46b3df03] .el-slider__button-wrapper {\n  top: 0;\n  width: 40px;\n  height: 40px;\n}\n.slide-verify[data-v-46b3df03] .el-slider__button {\n  width: 40px;\n  height: 40px;\n  border: 1px solid #e4e7eb;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  background-color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.slide-verify[data-v-46b3df03] .el-slider__button::after {\n  content: '>';\n  color: #947358;\n  font-size: 20px;\n}\n.slide-verify.success[data-v-46b3df03] .el-slider__button::after {\n  content: 'OK';\n  color: #67c23a;\n}\n",""]),t.exports=r},547:function(t,e,n){"use strict";n(510)},548:function(t,e,n){var r=n(25)(!1);r.push([t.i,"\n.login-container[data-v-22560504] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 80vh;\n  padding: 20px;\n}\n.login-box[data-v-22560504] {\n  width: 460px;\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  padding: 40px;\n  position: relative;\n  overflow: hidden; /* 防止内容溢出 */\n}\n.login-header[data-v-22560504] {\n  text-align: center;\n  margin-bottom: 30px;\n}\n.login-header h1[data-v-22560504] {\n  color: #947358;\n  font-size: 32px;\n  margin-bottom: 10px;\n}\n.login-header p[data-v-22560504] {\n  color: #666;\n  font-size: 16px;\n}\n.login-step[data-v-22560504] {\n  height: 280px;\n  position: absolute;\n  width: calc(100% - 80px); /* 减去左右padding */\n  transition: opacity 0.3s, transform 0.3s;\n}\n.step-tip[data-v-22560504] {\n  color: #333;\n  margin-bottom: 20px;\n  font-size: 16px;\n}\n.input-group[data-v-22560504] {\n  display: flex;\n  align-items: center;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  background-color: #f5f5f5;\n  margin-bottom: 20px;\n  height: 50px;\n}\n.input-icon[data-v-22560504] {\n  width: 50px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.icon[data-v-22560504] {\n  width: 35px;\n  height: 35px;\n}\n.login-input[data-v-22560504] {\n  flex: 1;\n  height: 48px;\n  border: none;\n  background-color: #f5f5f5;\n  padding: 0 15px;\n  font-size: 16px;\n}\n.login-input[data-v-22560504]:focus {\n  outline: none;\n}\n.warning-text[data-v-22560504] {\n  color: #ff5500;\n  font-size: 14px;\n  text-align: right;\n  margin-top: -15px;\n  margin-bottom: 15px;\n}\n.login-btn[data-v-22560504] {\n  width: 100%;\n  height: 50px;\n  background-color: #947358;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  font-size: 16px;\n  font-weight: bold;\n  cursor: pointer;\n  margin-bottom: 15px;\n  transition: background-color 0.3s;\n}\n.login-btn[data-v-22560504]:hover {\n  background-color: #826347;\n}\n.cancel-btn[data-v-22560504] {\n  background-color: white;\n  color: #947358;\n  border: 1px solid #947358;\n}\n.cancel-btn[data-v-22560504]:hover {\n  background-color: #f9f9f9;\n}\n.verify-container[data-v-22560504] {\n  display: flex;\n  justify-content: center;\n  margin: 30px 0;\n}\n.slide-verify-placeholder[data-v-22560504] {\n  width: 100%;\n  height: 155px;\n  background-color: #f0f0f0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 4px;\n  color: #999;\n}\n.verify-info[data-v-22560504] {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  color: #333;\n}\n.resend-btn[data-v-22560504] {\n  color: #947358;\n  cursor: pointer;\n}\n.wait-timer[data-v-22560504] {\n  color: #999;\n}\n.login-footer[data-v-22560504] {\n  text-align: center;\n  margin-top: 320px; /* 增加底部空间，确保有足够空间容纳步骤div */\n  color: #999;\n  font-size: 14px;\n}\n\n/* 过渡动画 */\n.fade-enter-active[data-v-22560504], .fade-leave-active[data-v-22560504] {\n  transition: all 0.3s;\n  position: absolute;\n  width: calc(100% - 80px);\n}\n.fade-enter[data-v-22560504] {\n  transform: translateX(20px);\n  opacity: 0;\n}\n.fade-leave-to[data-v-22560504] {\n  transform: translateX(-20px);\n  opacity: 0;\n}\n",""]),t.exports=r},619:function(t,e,n){"use strict";n.r(e);var r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-header"},[e("img",{staticStyle:{width:"100px","margin-bottom":"20px"},attrs:{src:n(544),alt:""}}),t._v(" "),e("h1",[t._v("原木社区")]),t._v(" "),e("p",[t._v("方块跃然纸上，故事在此生长。")])])},function(){var t=this._self._c;return t("div",{staticClass:"input-icon"},[t("img",{staticClass:"icon",attrs:{src:n(508),alt:"用户"}})])},function(){var t=this._self._c;return t("div",{staticClass:"login-footer"},[t("p",[this._v("注册即表明同意《原木社区用户隐私政策》")])])}],o=n(0),c=(n(6),n(10),n(53),n(54),n(358),{name:"SlideVerify",props:{w:{type:Number,default:310},sliderText:{type:String,default:"向右滑动完成验证"}},data:function(){return{sliderValue:0,isSuccess:!1}},methods:{handleSliderChange:function(t){t>=99&&(this.isSuccess=!0,this.$emit("success",!0))},reset:function(){this.sliderValue=0,this.isSuccess=!1}}}),l=(n(545),n(12)),d={layout:"default",components:{SlideVerify:Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"slide-verify",style:{width:t.w+"px"},attrs:{"user-select":"none"}},[e("el-slider",{attrs:{"show-tooltip":!1,min:0,max:100,disabled:t.isSuccess},on:{change:t.handleSliderChange},model:{value:t.sliderValue,callback:function(e){t.sliderValue=e},expression:"sliderValue"}}),t._v(" "),e("div",{staticClass:"verify-status",class:{success:t.isSuccess}},[t.isSuccess?e("i",{staticClass:"el-icon-success"}):e("span",[t._v(t._s(t.sliderText))])])],1)}),[],!1,null,"46b3df03",null).exports},data:function(){return{step:0,account:"",email:"",pwd:"",verifyCode:"",verifyState:!1,isWaiting:!1,waitTime:60,waitTimer:void 0,accountUsed:!1,registerVerify:"",forgetPwd:!1}},methods:{checkAccount:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.users.checkAccount(t.account);case 3:t.accountUsed=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0.toString());case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},verifyResult:function(t){this.step=2,this.verifyState=!0,this.sendCode()},nextStep:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.step,e.next=0===e.t0?3:2===e.t0?19:3===e.t0?30:5===e.t0?32:34;break;case 3:if(t.forgetPwd=!1,/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.email)){e.next=8;break}return t.$message.error("请输入有效的电子邮箱地址"),e.abrupt("return");case 8:return e.prev=8,e.next=11,t.$api.users.checkEmail(t.email);case 11:n=e.sent,t.step=n?5:1,e.next=18;break;case 15:e.prev=15,e.t1=e.catch(8),console.log(e.t1);case 18:return e.abrupt("break",34);case 19:return e.prev=19,e.next=22,t.$api.users.registerWithEmail(t.email,t.verifyCode);case 22:"登录成功"==(r=e.sent).msg?(t.registerVerify=r.register_code,t.step=3):t.$message.error(r.msg),e.next=29;break;case 26:e.prev=26,e.t2=e.catch(19),t.$message.error(e.t2.toString());case 29:return e.abrupt("break",34);case 30:return t.register(),e.abrupt("break",34);case 32:return t.login(),e.abrupt("break",34);case 34:case"end":return e.stop()}}),e,null,[[8,15],[19,26]])})))()},sendCode:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.users.sendEmailVerifyCode(t.email);case 3:n=e.sent,t.$message.success(n.msg),t.waitTime=60,t.isWaiting=!0,t.waitTimer=setInterval((function(){t.waitTime--,0==t.waitTime&&(t.isWaiting=!1,clearInterval(t.waitTimer),t.waitTimer=void 0)}),1e3),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},login:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.users.login(t.email,t.pwd);case 3:t.$message.success("登录成功"),t.$router.push("/"),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t.$message.error("账号或密码错误"),t.pwd="";case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))()},isPasswd:function(s){return!!/^(\w){6,20}$/.exec(s)},register:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.pwd){e.next=3;break}return t.$message.error("请输入密码"),e.abrupt("return");case 3:if(1==t.isPasswd(t.pwd)){e.next=6;break}return t.$message.error("密码格式：6-20位字母、数字、下划线组合"),e.abrupt("return");case 6:if(/^[a-zA-Z0-9]{4,12}$/.test(t.account)||t.forgetPwd){e.next=10;break}return t.$message.error("账号格式：4-12位字母、数字组合"),e.abrupt("return");case 10:return e.prev=10,e.next=13,t.$api.users.register(t.account,t.pwd,t.email,t.registerVerify);case 13:t.$message.success("登录成功"),t.$router.push("/"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),t.$message.error("注册失败");case 20:case"end":return e.stop()}}),e,null,[[10,17]])})))()}}},v=(n(547),Object(l.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-container"},[e("div",{staticClass:"login-box"},[t._m(0),t._v(" "),0==t.step?e("div",{staticClass:"login-step"},[e("p",{staticClass:"step-tip"},[t._v("未注册邮箱将自动创建账号")]),t._v(" "),e("div",{staticClass:"input-group"},[t._m(1),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"login-input",attrs:{type:"email",placeholder:"请输入电子邮箱"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),e("button",{staticClass:"login-btn",on:{click:function(e){return t.nextStep()}}},[t._v("下一步")])]):t._e(),t._v(" "),e("transition",{attrs:{name:"fade"}},[1==t.step?e("div",{staticClass:"login-step"},[e("p",{staticClass:"step-tip"},[t._v("滑动验证以发送验证码到 "+t._s(t.email))]),t._v(" "),e("div",{staticClass:"verify-container"},[e("slide-verify",{attrs:{w:380,"slider-text":"向右滑动完成验证"},on:{success:t.verifyResult}})],1),t._v(" "),e("button",{staticClass:"login-btn cancel-btn",on:{click:function(e){t.step=0}}},[t._v("上一步")])]):t._e()]),t._v(" "),e("transition",{attrs:{name:"fade"}},[2==t.step?e("div",{staticClass:"login-step"},[e("div",{staticClass:"verify-info"},[e("div",[e("div",[t._v("验证码已发送至：")]),t._v(" "),e("div",[t._v(t._s(t.email))])]),t._v(" "),e("div",[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.isWaiting,expression:"!isWaiting"}],staticClass:"resend-btn",on:{click:t.sendCode}},[t._v("重新发送")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.isWaiting,expression:"isWaiting"}],staticClass:"wait-timer"},[t._v("等待"+t._s(t.waitTime)+"秒")])])]),t._v(" "),e("div",{staticClass:"input-group"},[e("div",{staticClass:"input-icon"},[e("img",{staticClass:"icon",attrs:{src:n(505),alt:"验证码"}})]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.verifyCode,expression:"verifyCode"}],staticClass:"login-input",attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:t.verifyCode},on:{input:function(e){e.target.composing||(t.verifyCode=e.target.value)}}})]),t._v(" "),e("button",{staticClass:"login-btn",on:{click:function(e){return t.nextStep()}}},[t._v("下一步")]),t._v(" "),e("button",{staticClass:"login-btn cancel-btn",on:{click:function(e){t.step=0}}},[t._v("上一步")])]):t._e()]),t._v(" "),e("transition",{attrs:{name:"fade"}},[3==t.step?e("div",{staticClass:"login-step"},[e("p",{staticClass:"step-tip"},[t._v("欢迎来到原木社区，请设置你的账号和密码。")]),t._v(" "),t.forgetPwd?t._e():e("div",{staticClass:"input-group"},[e("div",{staticClass:"input-icon"},[e("img",{staticClass:"icon",attrs:{src:n(508),alt:"用户"}})]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"login-input",attrs:{type:"text",placeholder:"请输入账号"},domProps:{value:t.account},on:{input:[function(e){e.target.composing||(t.account=e.target.value)},t.checkAccount]}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.accountUsed&&!t.forgetPwd,expression:"accountUsed && !forgetPwd"}],staticClass:"warning-text"},[t._v("该账号已被使用")]),t._v(" "),e("div",{staticClass:"input-group"},[e("div",{staticClass:"input-icon"},[e("img",{staticClass:"icon",attrs:{src:n(505),alt:"密码"}})]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],staticClass:"login-input",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}})]),t._v(" "),e("button",{staticClass:"login-btn",on:{click:function(e){return t.nextStep()}}},[t._v("下一步")]),t._v(" "),e("button",{staticClass:"login-btn cancel-btn",on:{click:function(e){t.step=0}}},[t._v("上一步")])]):t._e()]),t._v(" "),e("transition",{attrs:{name:"fade"}},[5==t.step?e("div",{staticClass:"login-step"},[e("div",{staticClass:"verify-info"},[e("div",[e("div",[t._v("即将使用以下邮箱登录：")]),t._v(" "),e("div",[t._v(t._s(t.email))])]),t._v(" "),e("div",[e("span",{staticClass:"resend-btn",on:{click:function(e){t.forgetPwd=!0,t.step=1}}},[t._v("忘记密码")])])]),t._v(" "),e("div",{staticClass:"input-group"},[e("div",{staticClass:"input-icon"},[e("img",{staticClass:"icon",attrs:{src:n(505),alt:"密码"}})]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],staticClass:"login-input",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}})]),t._v(" "),e("button",{staticClass:"login-btn",on:{click:function(e){return t.nextStep()}}},[t._v("登录")]),t._v(" "),e("button",{staticClass:"login-btn cancel-btn",on:{click:function(e){t.step=0}}},[t._v("上一步")])]):t._e()]),t._v(" "),t._m(2)],1)])}),r,!1,null,"22560504",null));e.default=v.exports}}]);