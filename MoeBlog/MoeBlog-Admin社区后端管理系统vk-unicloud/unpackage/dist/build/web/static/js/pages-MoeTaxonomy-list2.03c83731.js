(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-MoeTaxonomy-list2"],{2244:function(e,t,a){"use strict";var o=a("2c27"),i=a.n(o);i.a},"279f":function(e,t,a){var o=a("c86c");t=o(!1),t.push([e.i,".el-upload__tip[data-v-fd366776]{line-height:1.2}.btn[data-v-fd366776]{margin-bottom:%?50?%}",""]),e.exports=t},"2c27":function(e,t,a){var o=a("279f");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=a("967d").default;i("8785c4f0",o,!0,{sourceMap:!1,shadowMode:!1})},"53d7":function(e,t,a){"use strict";a.r(t);var o=a("619d"),i=a.n(o);for(var n in o)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(n);t["default"]=i.a},"619d":function(e,t,a){"use strict";a("6a54");var o=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5c47"),a("af8f");var i,n=o(a("39d8")),l=(uni.vk,{data:function(){return{queryForm:{formData:{},columns:[{key:"Audit",title:"审核情况",type:"select",width:150,mode:"=",placeholder:"请选择审核情况",data:[{value:0,label:"已审核"},{value:1,label:"审核中"},{value:2,label:"退回审核"}]}]},TaxonomyForm:{data:{artCount:0,name:"",parent_id:"",avatarUrl:null,backgroundUrl:null,sort:0,status:!0,is_sticky:!1},props:{action:"admin/taxonomy/sys/Action.addList",columns:[{key:"name",title:"圈子名称",type:"text",placeholder:"请输入二级圈子名称",clearable:!0,showLabel:!0},{key:"description",title:"圈子描述",type:"text",placeholder:"请输入圈子描述",clearable:!0,showLabel:!0},{key:"parent_id",title:"一级分类",type:"remote-select",placeholder:"请选择一级分类",showAll:!0,multipleLimit:"1",action:"admin/taxonomy/sys/Action.getTaxList",props:{list:"result",value:"_id",label:"name"},dataPreprocess:function(e){return e}},{key:"avatarUrl",title:"圈子头像",type:"file-select",showLabel:!0,limit:1,multiple:!1,listType:"picture",fileSize:5,sizeUnit:"MB"},{key:"Audit",title:"是否审核",type:"select",data:[{value:0,label:"已审核"},{value:1,label:"审核中"},{value:2,label:"退回审核"}],showLabel:!0,activeValue:!0},{key:"backgroundUrl",title:"圈子背景",type:"file-select",showLabel:!0,limit:1,multiple:!1,listType:"picture",fileSize:5,sizeUnit:"MB"},{key:"sort",title:"圈子排序",type:"text",placeholder:"请输入圈子排序 数值越大越靠前显示",clearable:!0,showLabel:!0},{key:"artCount",title:"文章篇数",type:"text",placeholder:"0",disabled:!0,showLabel:!0,readonly:!0},{key:"is_sticky",title:"推荐圈子",type:"switch",placeholder:"推荐圈子",clearable:!0,showLabel:!0},{key:"status",title:"是否启用",type:"switch",showLabel:!0,activeValue:!0}],rules:{name:[{required:!0,message:"圈子名称不能为空",trigger:"change"}],description:[{required:!0,message:"圈子描述不能为空",trigger:"change"}],parent_id:[{required:!0,message:"一级分类不能为空",trigger:"change"}],avatarUrl:[{required:!0,message:"圈子头像不能为空",trigger:"change"}],backgroundUrl:[{required:!0,message:"圈子背景不能为空",trigger:"change"}],Audit:[{required:!0,message:"是否为审核 0代表已审核 1代表审核中 2代表审核已退回",trigger:"change"}]},formType:"",show:!1,loading:!1}},TaxonomyTable:{data:[],columns:[{key:"userinfo",title:"创建人",type:"object",minWidth:100,align:"left",columns:[{key:"_id",title:"ID",type:"text"},{key:"avatar",title:"头像",type:"avatar"},{key:"nickname",title:"昵称",type:"text"}]},{key:"name",title:"圈子名称",type:"text",minWidth:200},{key:"Audit",title:"是否已审核",type:"tag",minWidth:200,defaultValue:0,data:[{value:1,label:"审核中",tagType:"info"},{value:2,label:"已退回",tagType:"danger"},{value:0,label:"已审核",tagType:"success"}]},{key:"description",title:"圈子描述",type:"text",minWidth:200},{key:"artCount",title:"文章总数",type:"text",minWidth:200},{key:"fans_count",title:"粉丝总数",type:"text",minWidth:200},{key:"parent.name",title:"圈子分类",type:"text",minWidth:200},{key:"avatarUrl",title:"圈子头像",type:"image",minWidth:200,shape:"circle"},{key:"backgroundUrl",title:"圈子背景",type:"image",minWidth:200},{key:"name",title:"圈子名称",type:"text",minWidth:200},{key:"is_sticky",title:"推荐圈子",type:"switch",minWidth:200},{key:"status",title:"圈子状态",type:"switch",minWidth:200},{key:"_add_time",title:"发布时间",type:"time",width:160,sortable:"custom"}],action:"admin/taxonomy/sys/Action.getList"}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=this,i.vk,i.options=e,i.init(e)},created:function(){},mounted:function(){},methods:{init:function(e){},formSc:function(){this.refresh()},formCa:function(){console.log("关闭了")},addBtn:function(){this.TaxonomyForm.props.show=!0,this.TaxonomyForm.data=(0,n.default)({name:"",status:!0,parent_id:"",sort:0},"parent_id",""),this.TaxonomyForm.props.action="admin/taxonomy/sys/Action.addList",this.TaxonomyForm.props.formType="add"},tableSc:function(e){this.TaxonomyTable.data=e.data.result.rows},refresh:function(){this.$refs.table.refresh()},tableUp:function(e){this.TaxonomyForm.props.show=!0,this.TaxonomyForm.props.formType="update",this.TaxonomyForm.props.action="admin/taxonomy/sys/Action.upList",this.TaxonomyForm.data=e.item,delete this.TaxonomyForm.data.parent,delete this.TaxonomyForm.data.userinfo,console.log(this.TaxonomyForm.data)},tableDel:function(e){var t=e.item,a=e.deleteFn;a({action:"admin/taxonomy/sys/Action.delList",data:{_id:t._id}}),this.refresh()},search:function(e){console.log(e),i.$refs.table.search()}},watch:{},filters:{},computed:{}});t.default=l},"65e7":function(e,t,a){"use strict";a.r(t);var o=a("8fba"),i=a("53d7");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("2244");var l=a("828b"),r=Object(l["a"])(i["default"],o["b"],o["c"],!1,null,"fd366776",null,!1,o["a"],void 0);t["default"]=r.exports},"8fba":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page-body"},[a("el-button",{staticClass:"btn",attrs:{type:"success",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addBtn.apply(void 0,arguments)}}},[e._v("添加")]),a("vk-data-table-query",{attrs:{columns:e.queryForm.columns},on:{search:function(t){arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)}},model:{value:e.queryForm.formData,callback:function(t){e.$set(e.queryForm,"formData",t)},expression:"queryForm.formData"}}),a("vk-data-dialog",{attrs:{title:"添加二级分类",width:"600px",mode:"form"},model:{value:e.TaxonomyForm.props.show,callback:function(t){e.$set(e.TaxonomyForm.props,"show",t)},expression:"TaxonomyForm.props.show"}},[a("vk-data-form",{ref:"TaxonomyForm",attrs:{rules:e.TaxonomyForm.props.rules,action:e.TaxonomyForm.props.action,"form-type":e.TaxonomyForm.props.formType,columns:e.TaxonomyForm.props.columns,loading:e.TaxonomyForm.props.loading,"label-width":100,width:"100%","label-position":"left",size:"medium",disabled:!1},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.TaxonomyForm.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.formSc.apply(void 0,arguments)},cancel:function(t){arguments[0]=t=e.$handleEvent(t),e.formCa.apply(void 0,arguments)}},model:{value:e.TaxonomyForm.data,callback:function(t){e.$set(e.TaxonomyForm,"data",t)},expression:"TaxonomyForm.data"}})],1),a("vk-data-table",{ref:"table",attrs:{data:e.TaxonomyTable.data,columns:e.TaxonomyTable.columns,"right-btns":["detail_auto","update","delete"],"query-form-param":e.queryForm,action:e.TaxonomyTable.action,pagination:!0},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.tableSc.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.tableDel.apply(void 0,arguments)},update:function(t){arguments[0]=t=e.$handleEvent(t),e.tableUp.apply(void 0,arguments)}}})],1)},i=[]}}]);