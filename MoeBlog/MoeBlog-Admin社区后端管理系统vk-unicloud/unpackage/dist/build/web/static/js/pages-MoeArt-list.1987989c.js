(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-MoeArt-list"],{"124e":function(t,e,a){"use strict";var i;a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("5c47"),a("af8f");uni.vk;var o={data:function(){return{ArtForm:{data:{coverImg:[],Audit:1,art_status:!0,is_sticky:!1},props:{action:"admin/art/sys/addList",columns:[{key:"title",title:"文章标题",type:"text",placeholder:"请输入单行文本文章标题",clearable:!0,showLabel:!0},{key:"taxonmoy_id",title:"圈子分类",type:"remote-select",placeholder:"请选择圈子分类",clearable:!0,showLabel:!0,action:"admin/art/sys/getTaxonomy",props:{list:"result",value:"_id",label:"name"},showAll:!0},{key:"coverImg",title:"文章图片",type:"file-select",showLabel:!0,limit:9,listType:"picture",fileSize:5,sizeUnit:"MB",multiple:!0,multipleLimit:12},{key:"content",title:"文章内容",type:"textarea",placeholder:"请输入文章内容",showLabel:!0,autosize:{minRows:4,maxRows:4}},{key:"Audit",title:"是否审核",type:"select",placeholder:"请选择是否审核",clearable:!0,showLabel:!0,data:[{label:"已审核",value:0},{label:"审核中",value:1},{label:"已退回",value:2}]},{key:"art_status",title:"文章状态",type:"switch",showLabel:!0,activeValue:!0},{key:"is_sticky",title:"是否置顶",type:"switch",showLabel:!0,activeValue:!0}],rules:{title:[{required:!0,message:"文章标题不能为空",trigger:"change"}],taxonmoy_id:[{required:!0,message:"圈子分类不能为空",trigger:"change"}],Audit:[{required:!0,message:"是否审核不能为空",trigger:"change"}],art_status:[{required:!0,message:"文章状态不能为空",trigger:"change"}],is_sticky:[{required:!0,message:"是否置顶不能为空",trigger:"change"}]},formType:"",show:!1,loading:!1}},ArtTable:{data:[],columns:[{key:"userinfo",title:"用户详情",type:"object",minWidth:200,align:"center",columns:[{key:"_id",title:"ID",type:"text"},{key:"username",title:"账号",type:"text"},{key:"avatar",title:"头像",type:"avatar"}]},{key:"title",title:"文章标题",type:"text",minWidth:200},{key:"Audit",title:"是否审核",type:"tag",width:200,data:[{value:1,label:"审核中",tagType:"info"},{value:2,label:"已退回",tagType:"danger"},{value:0,label:"已审核",tagType:"success"}]},{key:"content",title:"文章内容",type:"text",width:300},{key:"coverImg",title:"文章图片",type:"image",width:200},{key:"category.name",title:"所属圈子",type:"text",width:200},{key:"art_status",title:"是否显示",type:"switch",width:200},{key:"is_sticky",title:"是否置顶",type:"switch",width:200},{key:"view_count",title:"文章浏览",type:"text",width:200},{key:"like_count",title:"用户点赞",type:"text",width:200},{key:"comment_count",title:"文章评论",type:"text",width:200},{key:"_add_time_str",title:"发布时间",type:"text",width:200}],action:"admin/art/sys/getList"},query:{formData:{},columns:[{key:"Audit",title:"是否审核",type:"select",width:160,mode:"=",data:[{value:0,label:"已通过"},{value:1,label:"审核中"},{value:2,label:"未通过"}]}]}}},onLoad:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=this,i.vk,i.options=t,i.init(t)},created:function(){},mounted:function(){},methods:{init:function(t){},formSuccess:function(){console.log("表单提交了"),this.ArtForm.props.show=!1,this.refresh()},onCancel:function(){this.ArtForm.props.show=!1,this.ArtForm.data={coverImg:[],Audit:1,art_status:!0,is_sticky:!1},console.log("关闭了")},addBtn:function(){this.ArtForm.props.show=!0},tabSc:function(t){this.ArtTable.data=t.data.result.rows,console.log(t.data)},tabUp:function(t){this.ArtForm.props.show=!0,this.ArtForm.props.action="admin/art/sys/upList",this.ArtForm.data=t.item,delete this.ArtForm.data.category,delete this.ArtForm.data.userinfo,console.log(this.ArtForm.data)},refresh:function(){this.$refs.ArtTable.refresh()},tabDel:function(t){var e=t.item,a=t.deleteFn;a({action:"admin/art/sys/delList",data:{_id:e._id}}),this.refresh()},search:function(){this.$refs.ArtTable.search()}},watch:{},filters:{},computed:{}};e.default=o},"23c9":function(t,e,a){"use strict";var i=a("ffb1"),o=a.n(i);o.a},"824c":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page-body"},[a("el-button",{staticStyle:{margin:"50rpx 0"},attrs:{type:"success",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addBtn.apply(void 0,arguments)}}},[t._v("添加")]),a("vk-data-table-query",{attrs:{columns:t.query.columns},on:{search:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}},model:{value:t.query.formData,callback:function(e){t.$set(t.query,"formData",e)},expression:"query.formData"}}),a("el-dialog",{attrs:{visible:t.ArtForm.props.show,width:"60%"},on:{"update:visible":function(e){arguments[0]=e=t.$handleEvent(e),t.$set(t.ArtForm.props,"show",e)}}},[a("vk-data-form",{ref:"ArtForm",attrs:{rules:t.ArtForm.props.rules,action:t.ArtForm.props.action,"form-type":t.ArtForm.props.formType,columns:t.ArtForm.props.columns,loading:t.ArtForm.props.loading,"label-width":100,width:"100%","label-position":"left",size:"medium",disabled:!1},on:{"update:loading":function(e){arguments[0]=e=t.$handleEvent(e),t.$set(t.ArtForm.props,"loading",e)},success:function(e){arguments[0]=e=t.$handleEvent(e),t.formSuccess.apply(void 0,arguments)},cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.onCancel.apply(void 0,arguments)}},model:{value:t.ArtForm.data,callback:function(e){t.$set(t.ArtForm,"data",e)},expression:"ArtForm.data"}})],1),a("vk-data-table",{ref:"ArtTable",attrs:{data:t.ArtTable.data,columns:t.ArtTable.columns,"right-btns":["detail_auto","update","delete"],action:t.ArtTable.action,"query-form-param":t.query,"get-count":"auto",pagination:!0},on:{success:function(e){arguments[0]=e=t.$handleEvent(e),t.tabSc.apply(void 0,arguments)},update:function(e){arguments[0]=e=t.$handleEvent(e),t.tabUp.apply(void 0,arguments)},delete:function(e){arguments[0]=e=t.$handleEvent(e),t.tabDel.apply(void 0,arguments)}}})],1)},o=[]},"8b97":function(t,e,a){"use strict";a.r(e);var i=a("124e"),o=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=o.a},a24e:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".el-upload__tip[data-v-fbe0606a]{line-height:1.2}",""]),t.exports=e},e3a8:function(t,e,a){"use strict";a.r(e);var i=a("824c"),o=a("8b97");for(var r in o)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(r);a("23c9");var l=a("828b"),n=Object(l["a"])(o["default"],i["b"],i["c"],!1,null,"fbe0606a",null,!1,i["a"],void 0);e["default"]=n.exports},ffb1:function(t,e,a){var i=a("a24e");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("967d").default;o("1b9cde09",i,!0,{sourceMap:!1,shadowMode:!1})}}]);