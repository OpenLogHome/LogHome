import{p as a,q as s,d as e,o as l,a as t,w as u,b as r,h as o,F as c,j as n,e as i,k as d,t as _,f,i as p,S as m,l as v,m as k}from"./index-C69BgsYY.js";import{_ as h}from"./uni-icons.DbPdresR.js";import{r as q}from"./uni-app.es.4Bntlf4B.js";import{_ as y}from"./u-tag.Dl-Gh5KS.js";import{B as g}from"./api.ClmPzCnk.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const w=j({__name:"square-item",props:{type:String,default(){}},emits:["callBack"],setup(j,{emit:w}){const C=a([]),R=a(0),x=w;return s((()=>{g().then((a=>{console.log(a.result.rows),a.result.rows.forEach((a=>{null!=a.parent_id&&""!=a.parent_id||C.value.push({...a,children:[]})}));for(let s=0;s<a.result.rows.length;s++)for(let e=0;e<C.value.length;e++)C.value[e]._id==a.result.rows[s].parent_id&&C.value[e].children.push(a.result.rows[s]);console.log(C.value)}))})),(a,s)=>{const g=p,w=m,I=v,B=k,F=q(e("uni-icons"),h),L=q(e("u-tag"),y);return l(),t(g,{class:"square-C"},{default:u((()=>[r(g,{class:"square-ctx"},{default:u((()=>[r(w,{"scroll-y":"",class:"scroll-L"},{default:u((()=>[r(g,{class:"square-L"},{default:u((()=>[(l(!0),o(c,null,n(C.value,((a,s)=>(l(),t(g,{class:i(["square-L-I",R.value==s?"active":""]),key:a._id,onClick:a=>function(a){R.value=a}(s)},{default:u((()=>[d(_(a.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),r(w,{"scroll-y":"",class:"scroll-R"},{default:u((()=>[r(g,{class:"square-R"},{default:u((()=>[r(g,{class:"square-R-I"},{default:u((()=>[(l(!0),o(c,null,n(C.value,((a,s)=>(l(),t(g,{class:"square-R-1",key:a._id},{default:u((()=>[s==R.value?(l(!0),o(c,{key:0},n(a.children,((a,s)=>(l(),t(g,{class:"square-R-2",key:s,onClick:s=>function(a,s){if("into"==s&&vk.navigateTo("/pages/square/squareInfo?id="+a._id),"sel"==s){let s={id:a._id,name:a.name};x("callBack",s)}}(a,j.type)},{default:u((()=>[r(g,{class:"square-R-2-C"},{default:u((()=>[r(g,{class:"head"},{default:u((()=>[r(g,{class:"avatar"},{default:u((()=>[r(I,{mode:"aspectFill",src:a.avatarUrl},null,8,["src"])])),_:2},1024),r(g,{class:"info"},{default:u((()=>[r(g,{class:"name"},{default:u((()=>[d(_(a.name),1)])),_:2},1024),r(g,{class:"infoData"},{default:u((()=>[r(B,null,{default:u((()=>[d("关注 "+_(a.fans_count||0),1)])),_:2},1024),r(B,null,{default:u((()=>[d("帖子 "+_(a.count||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(g,{class:"custom"},{default:u((()=>["into"==j.type?(l(),t(g,{key:0},{default:u((()=>[r(F,{type:"right",size:"20"})])),_:1})):f("",!0),"sel"==j.type?(l(),t(g,{key:1},{default:u((()=>[r(L,{text:"选择",mode:"dark"})])),_:1})):f("",!0)])),_:1})])),_:2},1024),r(g,{class:"btm"},{default:u((()=>[r(g,{class:"desc"},{default:u((()=>[d(_(a.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)):f("",!0)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-3820d61d"]]);export{w as _};
