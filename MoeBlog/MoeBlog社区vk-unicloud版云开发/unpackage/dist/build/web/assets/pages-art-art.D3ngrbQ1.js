import{o as e,a as t,w as a,b as s,p as l,F as u,q as i,i as n,r,L as c,n as o,d as f,t as d,e as m,f as p,h as v,Q as A,k as g,u as _,m as k,R as h,T as y,s as C,J as F,U as x}from"./index-BcbBmaH1.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{o as w,c as S,r as R}from"./uni-app.es.CDgP4_Nc.js";import{_ as E}from"./u-icon.C0MRo5fe.js";import{_ as U,a as j}from"./comments-send-item.11BE6ggi.js";import{_ as b,a as P,b as Q}from"./like.DUCAGHvM.js";import{_ as H}from"./square.DS5UtVkO.js";import{g as B,o as W}from"./api.D6LgEBnm.js";import{a as N,u as G,g as V}from"./utils.qqFolnPJ.js";import"./uni-icons.DNeyR9zY.js";import"./u-button.D0fXPeiT.js";import"./u-popup.Blx2ASJN.js";import"./check.CqE10ALw.js";const X=I({},[["render",function(r,c){const o=n;return e(),t(o,{class:"Skeleton-item"},{default:a((()=>[s(o,{class:"banner"}),s(o,{class:"list"},{default:a((()=>[(e(),l(u,null,i(10,((e,t)=>s(o,{class:"list-item",key:t},{default:a((()=>[s(o,{class:"list-item-1"}),s(o,{class:"list-item-2"})])),_:2},1024))),64))])),_:1}),s(o,{class:"art"},{default:a((()=>[(e(),l(u,null,i(4,((e,t)=>s(o,{class:"art-item",key:t},{default:a((()=>[s(o,{class:"art-item-1"}),s(o,{class:"art-item-2"}),s(o,{class:"art-item-3"},{default:a((()=>[s(o,{class:"art-item-3-avatar"}),s(o,{class:"art-item-3-name"})])),_:1})])),_:2},1024))),64))])),_:1})])),_:1})}],["__scopeId","data-v-1b922e16"]]);const D=I({name:"u-col",emits:["click"],props:{span:{type:[Number,String],default:12},offset:{type:[Number,String],default:0},justify:{type:String,default:"start"},align:{type:String,default:"center"},textAlign:{type:String,default:"left"},stop:{type:Boolean,default:!0}},data:()=>({gutter:20}),created(){this.parent=!1},mounted(){this.parent=this.$u.$parent.call(this,"u-row"),this.parent&&(this.gutter=this.parent.gutter)},computed:{uJustify(){return"end"==this.justify||"start"==this.justify?"flex-"+this.justify:"around"==this.justify||"between"==this.justify?"space-"+this.justify:this.justify},uAlignItem(){return"top"==this.align?"flex-start":"bottom"==this.align?"flex-end":this.align}},methods:{click(e){this.$emit("click",e)}}},[["render",function(s,l,u,i,f,d){const m=n;return e(),t(m,{class:c(["u-col",["u-col-"+u.span]]),style:o({padding:"0 "+(Number(f.gutter)/2+"rpx"),marginLeft:100/12*u.offset+"%",flex:`0 0 ${100/12*u.span}%`,alignItems:d.uAlignItem,justifyContent:d.uJustify,textAlign:u.textAlign}),onClick:d.click},{default:a((()=>[r(s.$slots,"default",{},void 0,!0)])),_:3},8,["class","style","onClick"])}],["__scopeId","data-v-7a986216"]]);const Y=I({name:"u-row",emits:["click"],props:{gutter:{type:[String,Number],default:20},justify:{type:String,default:"start"},align:{type:String,default:"center"},stop:{type:Boolean,default:!0}},computed:{uJustify(){return"end"==this.justify||"start"==this.justify?"flex-"+this.justify:"around"==this.justify||"between"==this.justify?"space-"+this.justify:this.justify},uAlignItem(){return"top"==this.align?"flex-start":"bottom"==this.align?"flex-end":this.align}},methods:{click(e){this.$emit("click",e)}}},[["render",function(s,l,u,i,c,f){const d=n;return e(),t(d,{class:"u-row",style:o({alignItems:f.uAlignItem,justifyContent:f.uJustify}),onClick:f.click},{default:a((()=>[r(s.$slots,"default",{},void 0,!0)])),_:3},8,["style","onClick"])}],["__scopeId","data-v-c792c2be"]]),K=I({__name:"Empty-item",props:{mode:{type:String,default:"data"}},setup(l){const{mode:u}=l;function i(){switch(u){case"comments":return"暂无评论,快来抢沙发吧";case"art":return"暂无文章,快去发布一篇";case"like":return"暂无喜欢,快去收藏一篇";case"square":return"暂无圈子,快去创建一个吧";case"user":return"暂无关注粉丝或关注";case"none":return"暂无内容";default:return"数据"}}return(u,r)=>{const c=m,o=p,v=n;return e(),t(v,{class:"empty-item"},{default:a((()=>[s(v,{class:"empty-I"},{default:a((()=>[s(c,{mode:"widthFix",src:`https://404.kim/api/img/${l.mode}-empty.png`},null,8,["src"]),s(o,null,{default:a((()=>[f(d(i()),1)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-ab0bd397"]]),L=I({__name:"art",setup(r){w((e=>{o.value=e.id,I.value.artid=e.id,function(){let e={id:o.value,need_user_info:!0};B(e).then((e=>{J.value=!1,e.result.rows[0].like_info&&e.result.rows[0].like_info._id&&e.result.rows[0].like_info.user_id==vk.getVuex("$user.userInfo")._id?(console.log("存在点赞"),I.value.like_info=e.result.rows[0].like_info._id):I.value.like_info="",L.value=e.result.rows[0],console.log(0==L.value.coverVideo.length&&0==L.value.coverImg.length),A({title:e.result.rows[0].title||"暂无标题"})}))}(),te()})),S((()=>{M.value||(O.value+=1,te())}));const o=v(""),p=v(null),I=v({artid:o.value,level:0,parent_id:"",username:"",commentsN:0,commentsL:""}),L=v({}),J=v(!0),O=v(1),z=v([]),M=v(!1),q=v(null),T=v("");function Z(e){F({urls:L.value.coverImg,current:e})}function $(e){switch(e){case 0:return 12;case 1:case 2:return 6;default:return 4}}function ee(e){switch(e){case 0:return"col";case 1:case 2:return"col-6";default:return"col-4"}}function te(){let e={pageIndex:O.value,art_id:o.value};W(e).then((e=>{if(1==O.value&&(q.value=e.result.total,I.value.commentsN=e.result.total),0==e.result.rows.length)return void(M.value=!0);let t=e.result.rows.filter((e=>""==e.parent_id||null==e.parent_id)).map((e=>({...e,children:[]})));t.forEach((t=>{e.result.rows.forEach((e=>{t._id==e.parent_id&&t.children.push(e)}))})),z.value=[...z.value,...t]}))}function ae(e){T.value=e?"1":"",I.value={artid:o.value,level:0,parent_id:"",username:"",commentsN:q.value,commentsL:T.value}}function se(e){q.value+=1,0==e.parent_id.length?z.value.push(e):z.value.forEach((t=>{t._id==e.parent_id&&t.children.push(t)})),ae()}function le(e){q.value-=1;let t=z.value.findIndex((t=>t._id==e));z.value.splice(t,1)}function ue(){}function ie(){}return(r,o)=>{const v=R(g("Skeleton-item"),X),A=n,F=m,w=R(g("u-icon"),E),S=R(g("u-col"),D),B=R(g("u-row"),Y),W=h,O=x,M=y,q=C,T=R(g("comment-list-item"),U),te=R(g("Empty-item"),K),ne=R(g("comments-send-item"),j);return e(),t(A,{class:"art"},{default:a((()=>[J.value?(e(),t(A,{key:0},{default:a((()=>[s(v)])),_:1})):(e(),t(A,{key:1,class:"art-ctx"},{default:a((()=>[s(A,{class:"user",onClick:o[0]||(o[0]=e=>{return t=L.value.userinfo._id,void vk.navigateTo("/pages/userinfo/userinfo?id="+t);var t})},{default:a((()=>[L.value.userinfo?(e(),t(A,{key:0,class:"user-R"},{default:a((()=>[s(F,{src:_(N)(L.value.userinfo),mode:"aspectFill"},null,8,["src"]),s(A,{class:"user-R-info"},{default:a((()=>[s(A,{class:"name"},{default:a((()=>[f(d(_(G)(L.value.userinfo)),1)])),_:1}),s(A,{class:"gxqm"},{default:a((()=>[f(d(_(V)(L.value.userinfo)),1)])),_:1})])),_:1})])),_:1})):k("",!0),s(A,{class:"user-L"},{default:a((()=>[s(w,{name:"arrow-right"})])),_:1})])),_:1}),s(A,{style:{height:"124rpx"}}),L.value.Carousel?(e(),t(A,{key:1,class:"art-B"},{default:a((()=>[0!=L.value.coverImg.length&&0==L.value.coverVideo.length?(e(),t(M,{key:0,class:"swiper","indicator-dots":"",circular:!0,"indicator-active-color":"#ffffff"},{default:a((()=>[(e(!0),l(u,null,i(L.value.coverImg,((l,u)=>(e(),t(O,{class:"swiper-item",key:u},{default:a((()=>[s(F,{onClick:e=>Z(u),mode:"aspectFill",src:l},null,8,["onClick","src"])])),_:2},1024)))),128))])),_:1})):k("",!0),0!=L.value.coverVideo.length?(e(),t(A,{key:1,class:"tv"},{default:a((()=>[s(W,{src:L.value.coverVideo[0]},null,8,["src"])])),_:1})):k("",!0),s(A,{class:"title"},{default:a((()=>[f(d(L.value.title),1)])),_:1}),s(A,{class:"content"},{default:a((()=>[f(d(L.value.content),1)])),_:1}),s(A,{class:"timer"},{default:a((()=>[f(" 发布于: "+d(L.value._add_time_str.slice(0,10)),1)])),_:1}),s(A,{class:"artinfo"},{default:a((()=>[s(A,{class:"artinfo-item"},{default:a((()=>[s(F,{mode:"aspectFill",src:b}),f(" "+d(L.value.view_count),1)])),_:1}),s(A,{class:"artinfo-item"},{default:a((()=>[s(F,{mode:"aspectFill",src:P}),f(" "+d(L.value.comment_count),1)])),_:1}),s(A,{class:"artinfo-item"},{default:a((()=>[s(F,{mode:"aspectFill",src:Q}),f(" "+d(L.value.like_count),1)])),_:1})])),_:1})])),_:1})):(e(),t(A,{key:0,class:"art-C"},{default:a((()=>[s(A,{class:"title"},{default:a((()=>[f(d(L.value.title),1)])),_:1}),s(A,{class:"content"},{default:a((()=>[f(d(L.value.content),1)])),_:1}),0==L.value.coverVideo.length?(e(),t(A,{key:0,class:"img"},{default:a((()=>[s(A,{class:"imgRow"},{default:a((()=>[s(B,{class:"row"},{default:a((()=>[(e(!0),l(u,null,i(L.value.coverImg,((l,u)=>(e(),t(S,{class:c(["col",ee(u)]),span:$(u),key:u},{default:a((()=>[s(F,{onClick:e=>Z(u),mode:"aspectFill",src:l},null,8,["onClick","src"])])),_:2},1032,["span","class"])))),128))])),_:1})])),_:1})])),_:1})):(e(),t(A,{key:1,class:"tv"},{default:a((()=>[s(W,{src:L.value.coverVideo},null,8,["src"])])),_:1})),s(A,{class:"timer"},{default:a((()=>[f(" 发布于: "+d(L.value._add_time_str.slice(0,10)),1)])),_:1}),s(A,{class:"artinfo"},{default:a((()=>[s(A,{class:"artinfo-item"},{default:a((()=>[s(F,{mode:"aspectFill",src:b}),f(" "+d(L.value.view_count),1)])),_:1}),s(A,{class:"artinfo-item"},{default:a((()=>[s(F,{mode:"aspectFill",src:P}),f(" "+d(L.value.comment_count),1)])),_:1}),s(A,{class:"artinfo-item"},{default:a((()=>[s(F,{mode:"aspectFill",src:Q}),f(" "+d(L.value.like_count),1)])),_:1})])),_:1})])),_:1})),s(A,{class:"share"},{default:a((()=>[s(A,{class:"share-item",onClick:o[1]||(o[1]=e=>{return t=L.value.taxonmoy_id,void vk.navigateTo("/pages/square/squareInfo?id="+t);var t})},{default:a((()=>[s(A,null,{default:a((()=>[s(F,{mode:"aspectFill",src:H})])),_:1}),s(A,{class:"share-item-text"},{default:a((()=>[f(d(L.value.taxonmoy_info.name),1)])),_:1})])),_:1}),s(A,{class:"share-item",onClick:ue},{default:a((()=>[s(A,null,{default:a((()=>[s(F,{mode:"aspectFill",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAi9JREFUWEftllFOwkAQhmfWHqQGMPEUtrdQYgI9iXgSeDDoLainMBGM9RyWHTstW7fbXdgFE17kkU53vvln/tkinPmHZ84P/wBBCsRvt7FqWXH9UvxF+/YCDNf3CaGcgIQEEdrknJgICkQqypKyU2CsAFxpFOEcABO/Kik/FqQH0CQXn36Ju1FlKS9D1egAuJI3cndb4AIMhegADNd3K0P22Wa0fORkg/fxpwFRPxuuxw/V85kCYtjtVqa+SrQAtuoJYbH9ljWA2RYkyNZXy4XtPfXMp40tgFmJz8sAlHcVo5wQCyQolHKHzjkRQNlRZADypklGCRHGbFGGERJeWSkXiAbQ6/8heH4+q+T+IoT5vuDdEC9sqrQAg814Xkk39cm6i5lxtf67AoBn6mO4zPQcmgL3SSXjygdAVaRPv+s9i4VbZ/E7HRtarOY4V6R9WJGWZVkYbulZtQES2Wb0lPcA2FIXF2J1aOmwzfS+86ECoLar+X911sLSqlaF3iquLyCScxcEJwMBeeC8GEpSvhk9pz0FVNS++4AHCYnikOEz+6gP457b0HUh1cuH+9euX5/B1WMOAvBWrKSecl/VEuHW1JKRjAlF4esYO5xIrUOogjmZCnBVd8TeaPaksQuCPsl0GF/HdAv4HT71/9EAfMBuWCd+89BP7nRB6FC5PuHUdyM7xraG/wzAbE0URbE+Q6P38ZSQJsr71rsgtOrQeFbJ9pV00gyEQtji/wHOrsAPPYcgMD6Glz4AAAAASUVORK5CYII="})])),_:1}),s(q,{"open-type":"share",class:"share-item-text"},{default:a((()=>[f("分享好友")])),_:1})])),_:1}),s(A,{class:"share-item",onClick:ie},{default:a((()=>[s(A,null,{default:a((()=>[s(F,{mode:"aspectFill",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABNdJREFUWEfFl39oW1UUx899eV2ymLUpjSXBdnvDCKMKi3SCjvpjUHEwmIrpVIqu06J/qEOlmziUdtKBm4OiVRlWbP1DhiJu+0NRp6SFOOtaRwQF0UADTUi2PKVpU5O0771rTng3u3l5L2mhsAuBkNx7v59z7jnnnkvgBg9yg/VhXQCUUgkA8HM/ADzAwcf071OEkIn1GLUmAF34YHHjIUgn4zQ5L2szUwsloXRCFHbuBrhFchFfuwdu9ilFuEkAOE4IYWCWTHUBKKWDKKz89UVYbL5X0k4flenyUsBqR+G5Y5F0Y2e+VbJ5i96aIIQcr+URSwDd6nG6nPTnf3pdhpXFgODbPWnf2uuvBYEAo6fvyNo3g+vAkCPQ7BPQC3usvGEKoIvPaVcvRwozb1dYyyDU4RcBVLXNaB0DSP6tdgkiifeecMgd94luKwgrgJB29bLbKM7EakHwAGz+K2ed03gkhJDtRuAqAErpOAD05b7piYNWbWE9CDMA9MSrZ53Q0ib8QAg5xENUADDX577vi+CZ10snM0+YAeA+bTuEiRfGb8LUPUQIwSwpDSMABl134cqpuunDNti042m/AF6FxQQCnDjaAcsZWmXAvsP2P7ue3DTNe8EIQFdzM5Faltsa2j2C6MXgQ0hmiQTppB8hhGdfk80AfLfZwgdGHZK3SVD4WCgDUEr7AGA8M99jrU+EuLNlQG7YfNd5Pr/LhSqd7MfFw09tkXkPMPGRi/nYyaCzS8+IEjwPML6amwn8J58yP3sLcZ6WGTG8NxthAEz8jfM5eSlPA0ceckR2SWLZgAqA/OKX/kLmcySsHNfFA0XL6xav4b1ZNwIYxXFTHWCBELLH6IHQsjwCSu4Sf8kA6OIFR7vHRbxVaWRkpZSGEKCxVcjimTPL2bx7bhUnX+52wNoAdPG0Q4BZdQz2i2fK5FaBgnXkx08K/tsfa6gSxzVSixA+GXRiIFZ7YDU34y7HACd+SR0JbAJXZL94xm1WzQxxMJfKaKLRcjanZ1dDONhpj7JU5GNgUFNS/UvJl9qY29FyFMfFOgB+H7K64fDmTGW0fitx3OfdJ5xxb9P1isgD4NmHMvHHS6nGizOADvEtjx9a8b6vumbXIs4BvMkaFx4AO525ohfiKVtCZpaXKx64ItT2PATpB55V4WNjIcIaArMxJRL7R83WKmTBTnsXn0lVpThLU93fqgNV1yweAQI8Qt8LiGCLI8RnOUX+eUX5vZYg/98Rl92/zUYqMsnsMgqdU55xqLCCHU158AD4I0JE6Rj0ZfJKTNHQezVHs0AiVzxOjKHtfHNidh0PZmmq/ztlQKGk1ICWhhFgvRCTLc640fqKQsSEWCs2q425Y9pUuSy7YVt42RZ04RHwpu4kW8MXtCHpnWwh+nVBrSxi+sSPmuyRB+2iaQ2p1ZKFptXRWEL7RUJPWAGgRi2IfXbb5PtNDsmqftSr66EsTYkX1WPiFvBFzTzAvGGEEAnEP2y0y1aWs3U123LuPdC3SBOpEFxzGI/A7DguFJTYYWcDXmqWRWtNAIa4OBiFa/1/0IT8G8xnv4JfIUH/dS1AzvMo6Yzi3F642/0wubNULYvR/umGPEx4C3WPYKDh0wwHn37YYODTrNzv1UtN0yxYy6KNnFP3abaRYmZ7/Q/6ksk//pU3GgAAAABJRU5ErkJggg=="})])),_:1}),s(q,{"open-type":"share",class:"share-item-text"},{default:a((()=>[f("分享微信")])),_:1})])),_:1})])),_:1}),s(A,{class:"comments"},{default:a((()=>[s(A,{class:"comments-H"},{default:a((()=>[f("全部评论")])),_:1}),0!=z.value.length?(e(),t(A,{key:0},{default:a((()=>[(e(!0),l(u,null,i(z.value,((s,l)=>(e(),t(A,{onClick:e=>{return t=s,I.value.parent_id=t._id,I.value.username=G(t.userinfo),I.value.level=1,void(p.value&&p.value.openPop());var t}},{default:a((()=>[(e(),t(T,{onDelComment:le,item:s,key:s._id},null,8,["item"]))])),_:2},1032,["onClick"])))),256))])),_:1})):(e(),t(A,{key:1},{default:a((()=>[s(te,{mode:"comments"})])),_:1}))])),_:1}),s(A,{class:"comments-content"},{default:a((()=>[s(ne,{ref_key:"commentsPop",ref:p,artInfo:I.value,onPopColse:ae,onCommentSc:se},null,8,["artInfo"])])),_:1})])),_:1}))])),_:1})}}},[["__scopeId","data-v-338e6fe7"]]);export{L as default};
