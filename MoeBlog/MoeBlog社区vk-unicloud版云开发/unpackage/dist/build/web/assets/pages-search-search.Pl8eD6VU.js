import{Y as e,d as t,o as l,a,w as o,b as s,n as r,f as c,e as i,s as u,k as n,t as d,i as p,N as h,h as m,F as f,j as y,p as g}from"./index-C69BgsYY.js";import{_}from"./u-icon.yGbbo8IR.js";import{r as k}from"./uni-app.es.4Bntlf4B.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as C}from"./art-item.BNfpIJqP.js";import{C as v}from"./api.ClmPzCnk.js";import"./u-action-sheet.CidrWLxj.js";import"./u-popup.CZC_HG1o.js";import"./square.DS5UtVkO.js";import"./like.DUCAGHvM.js";import"./utils.qqFolnPJ.js";const w=b({name:"u-search",emits:["update:modelValue","input","change","search","custom","clear","focus","blur"],props:{value:{type:String,default:""},modelValue:{type:String,default:""},shape:{type:String,default:"round"},bgColor:{type:String,default:"#f2f2f2"},placeholder:{type:String,default:"请输入关键字"},clearabled:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},showAction:{type:Boolean,default:!0},actionStyle:{type:Object,default:()=>({})},actionText:{type:String,default:"搜索"},inputAlign:{type:String,default:"left"},disabled:{type:Boolean,default:!1},animation:{type:Boolean,default:!1},borderColor:{type:String,default:"none"},height:{type:[Number,String],default:64},inputStyle:{type:Object,default:()=>({})},maxlength:{type:[Number,String],default:"-1"},searchIconColor:{type:String,default:""},color:{type:String,default:"#606266"},placeholderColor:{type:String,default:"#909399"},margin:{type:String,default:"0"},searchIcon:{type:String,default:"search"}},data(){return{keyword:"",showClear:!1,show:!1,focused:this.focus}},watch:{keyword(e){this.$emit("input",e),this.$emit("update:modelValue",e),this.$emit("change",e)},valueCom:{immediate:!0,handler(e){this.keyword=e}}},computed:{valueCom(){return this.modelValue},showActionBtn(){return!(this.animation||!this.showAction)},borderStyle(){return this.borderColor?`1px solid ${this.borderColor}`:"none"}},methods:{inputChange(e){this.keyword=e.detail.value},clear(){this.keyword="",this.$nextTick((()=>{this.$emit("clear")}))},search(t){this.$emit("search",t.detail.value);try{e()}catch(l){}},custom(){this.$emit("custom",this.keyword);try{e()}catch(t){}},getFocus(){this.focused=!0,this.animation&&this.showAction&&(this.show=!0),this.$emit("focus",this.keyword)},blur(){setTimeout((()=>{this.focused=!1}),100),this.show=!1,this.$emit("blur",this.keyword)},clickHandler(){this.disabled&&this.$emit("click")}}},[["render",function(e,m,f,y,g,b){const C=k(t("u-icon"),_),v=p,w=h;return l(),a(v,{class:"u-search",onClick:b.clickHandler,style:r({margin:f.margin})},{default:o((()=>[s(v,{class:"u-content",style:r({backgroundColor:f.bgColor,borderRadius:"round"==f.shape?"100rpx":"10rpx",border:b.borderStyle,height:f.height+"rpx"})},{default:o((()=>[s(v,{class:"u-icon-wrap"},{default:o((()=>[s(C,{class:"u-clear-icon",size:30,name:f.searchIcon,color:f.searchIconColor?f.searchIconColor:f.color},null,8,["name","color"])])),_:1}),s(w,{"confirm-type":"search",onBlur:b.blur,value:b.valueCom,onConfirm:b.search,onInput:b.inputChange,disabled:f.disabled,onFocus:b.getFocus,focus:f.focus,maxlength:f.maxlength,"placeholder-class":"u-placeholder-class",placeholder:f.placeholder,"placeholder-style":`color: ${f.placeholderColor}`,class:"u-input",type:"text",style:r([{textAlign:f.inputAlign,color:f.color,backgroundColor:f.bgColor},f.inputStyle])},null,8,["onBlur","value","onConfirm","onInput","disabled","onFocus","focus","maxlength","placeholder","placeholder-style","style"]),g.keyword&&f.clearabled&&g.focused?(l(),a(v,{key:0,class:"u-close-wrap",onClick:b.clear},{default:o((()=>[s(C,{class:"u-clear-icon",name:"close-circle-fill",size:"34",color:"#c0c4cc"})])),_:1},8,["onClick"])):c("",!0)])),_:1},8,["style"]),s(v,{style:r([f.actionStyle]),class:i(["u-action",[b.showActionBtn||g.show?"u-action-active":""]]),onClick:u(b.custom,["stop","prevent"])},{default:o((()=>[n(d(f.actionText),1)])),_:1},8,["style","class","onClick"])])),_:1},8,["onClick","style"])}],["__scopeId","data-v-209d41ca"]]),S=b({__name:"skeleton-item1",props:{num:Number,default:()=>1},setup:e=>(t,r)=>{const c=p;return l(),a(c,{class:"skeletion-item1"},{default:o((()=>[(l(!0),m(f,null,y(e.num,((e,t)=>(l(),a(c,{class:"skeletion-C",key:t},{default:o((()=>[s(c,{class:"sl-L"},{default:o((()=>[s(c,{class:"sl-L-A"})])),_:1}),s(c,{class:"sl-R"},{default:o((()=>[s(c,{class:"sl-R-I"}),s(c,{class:"sl-R-I"}),s(c,{class:"sl-R-I"}),s(c,{class:"sl-R-I"})])),_:1})])),_:2},1024)))),128))])),_:1})}},[["__scopeId","data-v-4a9732bb"]]);const x=b({name:"u-loading",props:{mode:{type:String,default:"circle"},color:{type:String,default:"#c7c7c7"},size:{type:[String,Number],default:"34"},show:{type:Boolean,default:!0}},computed:{cricleStyle(){let e={};return e.width=this.size+"rpx",e.height=this.size+"rpx","circle"==this.mode&&(e.borderColor=`#e4e4e4 #e4e4e4 #e4e4e4 ${this.color?this.color:"#c7c7c7"}`),e}}},[["render",function(e,t,o,s,u,n){const d=p;return o.show?(l(),a(d,{key:0,class:i(["u-loading","circle"==o.mode?"u-loading-circle":"u-loading-flower"]),style:r([n.cricleStyle])},null,8,["class","style"])):c("",!0)}],["__scopeId","data-v-ae8dd367"]]),I=b({__name:"loading-item",props:["status"],setup(e){const r=e;return(e,c)=>{const i=k(t("u-loading"),x),u=p;return l(),a(u,{class:"loding"},{default:o((()=>[r.status?(l(),a(u,{key:1,class:"lodingF"},{default:o((()=>[n("没有更多数据了")])),_:1})):(l(),a(u,{key:0,class:"lodingT"},{default:o((()=>[s(i,{color:"#29B6F6",mode:"circle",size:"40"}),n(" 数据加载中···")])),_:1}))])),_:1})}}},[["__scopeId","data-v-2cbce315"]]),j=b({__name:"search",setup(e){const r=g(""),i=g([]),u=g(1),n=g(!1),d=g(!1);function h(){u.value=1,n.value=!0;let e={pageIndex:u.value,text:r.value};i.value=[],v(e).then((e=>{n.value=!1;let t=e.result;0==e.result.length&&(d.value=!0),i.value=[...i.value,...t]}))}return(e,u)=>{const g=k(t("u-search"),w),_=k(t("skeleton-item1"),S),b=p,v=k(t("art-item"),C),x=k(t("loading-item"),I);return l(),a(b,{class:"search"},{default:o((()=>[s(g,{placeholder:"请输入文章",modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=e=>r.value=e),onSearch:h,onCustom:h},null,8,["modelValue"]),n.value?(l(),a(b,{key:0,class:"loading"},{default:o((()=>[s(_,{num:4})])),_:1})):(l(),a(b,{key:1,class:"loading"},{default:o((()=>[s(b,{class:"art"},{default:o((()=>[(l(!0),m(f,null,y(i.value,((e,t)=>(l(),a(v,{key:e._id,item:e},null,8,["item"])))),128)),d.value?(l(),a(x,{key:0,status:d.value},null,8,["status"])):c("",!0)])),_:1})])),_:1}))])),_:1})}}},[["__scopeId","data-v-c5f1dac8"]]);export{j as default};
