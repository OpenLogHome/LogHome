import{p as e,C as s,d as a,o as t,h as l,b as i,w as u,a as r,s as d,f as c,k as o,t as n,e as m,F as f,l as _,i as p}from"./index-C69BgsYY.js";import{_ as h}from"./u-action-sheet.CidrWLxj.js";import{r as v}from"./uni-app.es.4Bntlf4B.js";import{I as A}from"./api.ClmPzCnk.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=b({__name:"Mysquare-item",props:["item"],emits:["refresh"],setup(b,{emit:x}){const C=b,j=e(!0),k=x,F=e([{text:"通过审核",disabled:0==C.item.Audit},{text:"退回审核",color:"#F44336",disabled:2==C.item.Audit}]),g=e(!1);function y(){switch(C.item.Audit){case 0:return"已通过";case 1:return"审核中";case 2:return"未通过"}}function U(){j.value=!0}function q(){k("refresh",!0)}function I(e){if(1==e){let e={_id:C.item._id,Audit:2};A(e).then((e=>{q()}))}if(0==e){let e={_id:C.item._id,Audit:0};A(e).then((e=>{q()}))}}return g.value=s.getCurrentUserInfo().role.indexOf("admin")>-1,(e,s)=>{const A=_,b=p,x=v(a("u-action-sheet"),h);return t(),l(f,null,[i(b,{class:"Mysquare-item"},{default:u((()=>[i(b,{class:"Mysquare-C"},{default:u((()=>[i(b,{class:"bg"},{default:u((()=>[i(A,{mode:"aspectFill",src:C.item.backgroundUrl},null,8,["src"])])),_:1}),g.value?(t(),r(b,{key:0,class:"art-head-L"},{default:u((()=>[i(b,{class:"art-head-L-c",onClick:d(U,["stop"])},{default:u((()=>[i(b,{class:"iconS"}),i(b,{class:"iconS"}),i(b,{class:"iconS"})])),_:1})])),_:1})):c("",!0),i(b,{class:"info"},{default:u((()=>[i(b,{class:"info-C"},{default:u((()=>[i(b,{class:"avatar"},{default:u((()=>[i(A,{mode:"aspectFill",src:C.item.avatarUrl},null,8,["src"])])),_:1}),i(b,{class:"name"},{default:u((()=>[i(b,{class:"title"},{default:u((()=>[o(n(C.item.name),1)])),_:1}),i(b,{class:"desc"},{default:u((()=>[o(n(C.item.description),1)])),_:1})])),_:1}),i(b,{class:"status"},{default:u((()=>[i(b,{class:m(0==C.item.Audit?"s":1==C.item.Audit?"p":"e")},{default:u((()=>[o(n(y()),1)])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),i(x,{onClick:I,"safe-area-inset-bottom":!0,"z-index":"9999","border-radius":"25",list:F.value,modelValue:j.value,"onUpdate:modelValue":s[0]||(s[0]=e=>j.value=e)},null,8,["list","modelValue"])],64)}}},[["__scopeId","data-v-cf73a79d"]]);export{x as _};
