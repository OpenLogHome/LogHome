import{_ as e,a as s}from"./comments-send-item.Cdm-1mwX.js";import{p as t,d as a,a as l,w as o,i as n,o as u,b as m,f as i,h as r,j as c,F as p}from"./index-C69BgsYY.js";import{o as d,c as v,r as _}from"./uni-app.es.4Bntlf4B.js";import{p as f}from"./api.ClmPzCnk.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.DbPdresR.js";import"./utils.qqFolnPJ.js";import"./u-button.CQyuZRx3.js";import"./u-popup.CZC_HG1o.js";import"./u-icon.yGbbo8IR.js";import"./check.CqE10ALw.js";const g=j({__name:"comments_detail",setup(j){d((e=>{let s=JSON.parse(e.item);I.value=s.art_id,x.value=s.comments_id,g.value.username=s.username,g.value.artid=s.art_id,g.value.parent_id=s.comments_id,console.log(g.value),y()})),v((()=>{w.value+=1,1!=h.value&&y()}));const g=t({artid:"",level:1,parent_id:"",username:""}),h=t(!1),w=t(1),I=t(""),x=t(""),b=t([]),k=t({});function y(){let e={art_id:I.value,comments_id:x.value,pageIndex:w.value};f(e).then((e=>{0==e.result2.rows.length&&(h.value=!0),k.value=e.result1.rows[0],console.log(e.result1.rows[0]);let s=[...b.value,...e.result2.rows];b.value=s,console.log(b.value)}))}function C(){}function F(e){b.value.push(e),console.log(e)}return t(""),(t,d)=>{const v=_(a("comment-list-item"),e),f=n,j=_(a("comments-send-item"),s);return u(),l(f,{class:"comments-detail"},{default:o((()=>["art_id"in k.value?(u(),l(f,{key:0,class:"comments-current"},{default:o((()=>[m(v,{item:k.value},null,8,["item"])])),_:1})):i("",!0),m(f,{class:"comments-list"},{default:o((()=>[(u(!0),r(p,null,c(b.value,((e,s)=>(u(),l(f,{class:"comments-list-I",key:e._id},{default:o((()=>[m(v,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1}),m(f,{class:"comments-send"},{default:o((()=>[m(j,{artInfo:g.value,onPopColse:C,onCommentSc:F},null,8,["artInfo"])])),_:1})])),_:1})}}},[["__scopeId","data-v-df9bc7f7"]]);export{g as default};
