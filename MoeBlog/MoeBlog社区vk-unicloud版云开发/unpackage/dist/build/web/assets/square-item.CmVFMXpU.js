import{h as a,j as s,k as e,o as l,a as t,w as u,b as r,p as o,F as c,q as n,L as i,d,t as f,m as _,i as p,S as m,e as v,f as k}from"./index-BcbBmaH1.js";import{_ as y}from"./uni-icons.DNeyR9zY.js";import{r as h}from"./uni-app.es.CDgP4_Nc.js";import{_ as q}from"./u-tag.BFInBbI9.js";import{F as g}from"./api.D6LgEBnm.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const R=j({__name:"square-item",props:{type:String,default(){}},emits:["callBack"],setup(j,{emit:R}){const w=a([]),C=a(0),x=R;return s((()=>{g().then((a=>{console.log(a.result.rows),a.result.rows.forEach((a=>{null!=a.parent_id&&""!=a.parent_id||w.value.push({...a,children:[]})}));for(let s=0;s<a.result.rows.length;s++)for(let e=0;e<w.value.length;e++)w.value[e]._id==a.result.rows[s].parent_id&&w.value[e].children.push(a.result.rows[s]);console.log(w.value)}))})),(a,s)=>{const g=p,R=m,I=v,L=k,b=h(e("uni-icons"),y),F=h(e("u-tag"),q);return l(),t(g,{class:"square-C"},{default:u((()=>[r(g,{class:"square-ctx"},{default:u((()=>[r(R,{"scroll-y":"",class:"scroll-L"},{default:u((()=>[r(g,{class:"square-L"},{default:u((()=>[(l(!0),o(c,null,n(w.value,((a,s)=>(l(),t(g,{class:i(["square-L-I",C.value==s?"active":""]),key:a._id,onClick:a=>function(a){C.value=a}(s)},{default:u((()=>[d(f(a.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),r(R,{"scroll-y":"",class:"scroll-R"},{default:u((()=>[r(g,{class:"square-R"},{default:u((()=>[r(g,{class:"square-R-I"},{default:u((()=>[(l(!0),o(c,null,n(w.value,((a,s)=>(l(),t(g,{class:"square-R-1",key:a._id},{default:u((()=>[s==C.value?(l(!0),o(c,{key:0},n(a.children,((a,s)=>(l(),t(g,{class:"square-R-2",key:s,onClick:s=>function(a,s){if("into"==s&&vk.navigateTo("/pages/square/squareInfo?id="+a._id),"sel"==s){let s={id:a._id,name:a.name};x("callBack",s)}}(a,j.type)},{default:u((()=>[r(g,{class:"square-R-2-C"},{default:u((()=>[r(g,{class:"head"},{default:u((()=>[r(g,{class:"avatar"},{default:u((()=>[r(I,{mode:"aspectFill",src:a.avatarUrl},null,8,["src"])])),_:2},1024),r(g,{class:"info"},{default:u((()=>[r(g,{class:"name"},{default:u((()=>[d(f(a.name),1)])),_:2},1024),r(g,{class:"infoData"},{default:u((()=>[r(L,null,{default:u((()=>[d("关注 "+f(a.fans_count||0),1)])),_:2},1024),r(L,null,{default:u((()=>[d("帖子 "+f(a.count||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(g,{class:"custom"},{default:u((()=>["into"==j.type?(l(),t(g,{key:0},{default:u((()=>[r(b,{type:"right",size:"20"})])),_:1})):_("",!0),"sel"==j.type?(l(),t(g,{key:1},{default:u((()=>[r(F,{text:"选择",mode:"dark"})])),_:1})):_("",!0)])),_:1})])),_:2},1024),r(g,{class:"btm"},{default:u((()=>[r(g,{class:"desc"},{default:u((()=>[d(f(a.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)):_("",!0)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-91ebef57"]]);export{R as _};
