import{h as e,k as a,a as l,w as t,o as s,b as o,u,d as n,t as i,p as r,q as c,F as f,m,e as d,i as p,f as _,s as g,S as v}from"./index-BcbBmaH1.js";import{_ as k}from"./avatar-item.CHKnCc0x.js";import{o as y,d as h,c as C,r as b}from"./uni-app.es.CDgP4_Nc.js";import{_ as x}from"./u-icon.C0MRo5fe.js";import{_ as w}from"./art-item.BtrXExoi.js";import{_ as j,a as V}from"./u-cell-group.BkGW_3T0.js";import{_ as N}from"./u-popup.Blx2ASJN.js";import{_ as T}from"./z-paging.DJjrhKoD.js";import{_ as I}from"./art_icon.Iz8j59mQ.js";import{b as $,u as z,g as A,a as F}from"./utils.qqFolnPJ.js";import{e as S,f as q}from"./api.D6LgEBnm.js";import{_ as G}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-action-sheet.ukLITz2J.js";import"./square.DS5UtVkO.js";import"./like.DUCAGHvM.js";const L=G({__name:"my",setup(G){y((()=>{S().then((e=>{U.value.followerNum=e.follower_Num,U.value.followingNum=e.following_Num,U.value.likeNum=e.like_Num}))})),h((()=>{vk.checkToken()?M.value=vk.getVuex("$user.userInfo"):vk.navigateTo("/pages/auth/auth")})),C((()=>{}));const L=e(!1),M=e({}),U=e({followerNum:0,followingNum:0,likeNum:0}),B=e(null),D=e([]);function E(){vk.navigateTo("/pages/my/pubMyArt")}function H(e){if(!("gender"in M.value))return"Genderunknown";switch(e){case 0:return"man";case 1:return"woman"}}function J(e,a){q({pageNo:e,pageSize:a,Audit:0}).then((e=>{B.value.complete(e.result)}))}function K(){vk.navigateTo("/pages/userinfo/userinfo?id="+vk.getVuex("$user.userInfo")._id)}function P(){L.value=!0,console.log(L.value)}function Q(){vk.userCenter.logout({success:e=>{vk.reLaunch("/pages/auth/auth")}})}function O(){vk.navigateTo("/pages/my/userCenter")}function R(){vk.navigateTo("/pages/my/myArt")}function W(){vk.navigateTo("/pages/square/Mysquare")}function X(e){vk.navigateTo("/pages/my/myFans?type="+e)}function Y(){vk.navigateTo("/pages/my/myAbout")}function Z(){vk.navigateTo("/pages/Admin/Admin")}return e(!0),(e,y)=>{const h=d,C=p,S=b(a("avatar-item"),k),q=_,G=b(a("u-icon"),x),ee=b(a("art-item"),w),ae=b(a("u-cell-item"),j),le=b(a("u-cell-group"),V),te=g,se=v,oe=b(a("u-popup"),N),ue=b(a("z-paging"),T);return s(),l(ue,{ref_key:"paging",ref:B,modelValue:D.value,"onUpdate:modelValue":y[5]||(y[5]=e=>D.value=e),onQuery:J},{default:t((()=>[o(C,{class:"my"},{default:t((()=>[o(C,{class:"userinfo"},{default:t((()=>[o(C,{class:"userinfo-ctx"},{default:t((()=>[o(C,{class:"userinfo-bj"},{default:t((()=>[o(h,{mode:"aspectFill",src:u($)(e.vk.getVuex("$user.userInfo"))},null,8,["src"])])),_:1}),o(C,{class:"info"},{default:t((()=>[o(C,{class:"info-ctx"},{default:t((()=>[o(C,{class:"info-top",onClick:P},{default:t((()=>[o(C,{class:"iconS"}),o(C,{class:"iconS"}),o(C,{class:"iconS"})])),_:1}),o(C,{class:"info-center",onClick:O},{default:t((()=>[o(C,{class:"info-center-left"},{default:t((()=>[o(C,{class:"avatar"},{default:t((()=>[o(C,{class:"avatar-img"},{default:t((()=>[o(S,{height:"180",width:"180"})])),_:1}),o(C,{class:"name"},{default:t((()=>[o(C,{class:"nameT"},{default:t((()=>[n("昵称:"),o(q,null,{default:t((()=>[n(i(u(z)(e.vk.getVuex("$user.userInfo"))),1)])),_:1})])),_:1}),o(C,{class:"gender"},{default:t((()=>[n(" 性别:"),o(h,{src:`../../static/img/${H(M.value.gender)}.png`},null,8,["src"])])),_:1}),o(C,{class:"signT"},{default:t((()=>[n("签名:"),o(q,null,{default:t((()=>[n(i(u(A)(e.vk.getVuex("$user.userInfo"))),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),o(C,{class:"info-center-right"},{default:t((()=>[o(G,{name:"arrow-right",size:"35"})])),_:1})])),_:1}),o(C,{class:"info-bottom"},{default:t((()=>[o(C,{class:"info-bottom-item",onClick:y[0]||(y[0]=e=>X("following"))},{default:t((()=>[o(C,null,{default:t((()=>[n(i(U.value.followerNum),1)])),_:1}),o(C,null,{default:t((()=>[n("关注")])),_:1})])),_:1}),o(C,{class:"info-bottom-item",onClick:y[1]||(y[1]=e=>X("fans"))},{default:t((()=>[o(C,null,{default:t((()=>[n(i(U.value.followingNum),1)])),_:1}),o(C,null,{default:t((()=>[n("粉丝")])),_:1})])),_:1}),o(C,{class:"info-bottom-item",onClick:E},{default:t((()=>[o(C,null,{default:t((()=>[n(i(U.value.likeNum),1)])),_:1}),o(C,null,{default:t((()=>[n("喜欢")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),o(C,{class:"name"},{default:t((()=>[o(h,{mode:"aspectFill",src:I}),n(" 最新动态 ")])),_:1}),o(C,{class:"art"},{default:t((()=>[o(C,{class:"art-C"},{default:t((()=>[(s(!0),r(f,null,c(D.value,(e=>(s(),l(ee,{key:e._id,item:e},null,8,["item"])))),128))])),_:1})])),_:1}),o(C,{class:"leftPopup"},{default:t((()=>[o(oe,{modelValue:L.value,"onUpdate:modelValue":y[4]||(y[4]=e=>L.value=e),mode:"left",mask:!0,"z-index":"99"},{default:t((()=>[o(C,{class:"popCtx"},{default:t((()=>[o(C,{class:"popItem",onClick:K},{default:t((()=>[o(C,{class:"img"},{default:t((()=>[o(h,{mode:"aspectFill",src:u(F)(e.vk.getVuex("$user.userInfo"))},null,8,["src"])])),_:1}),o(C,{class:"name"},{default:t((()=>[n(i(u(z)(e.vk.getVuex("$user.userInfo"))),1)])),_:1}),o(C,{class:"icon"},{default:t((()=>[o(G,{name:"arrow-right",size:"35"})])),_:1})])),_:1}),o(se,{class:"scroll","scroll-y":""},{default:t((()=>[o(le,{class:"cell",title:"我的","title-style":{height:"50px"},border:""},{default:t((()=>[o(ae,{onClick:O,icon:"edit-pen",title:"编辑资料"}),o(ae,{onClick:R,icon:"order",title:"我的文章"}),o(ae,{onClick:y[2]||(y[2]=e=>X("fans")),icon:"eye",title:"我的粉丝"}),o(ae,{onClick:y[3]||(y[3]=e=>X("following")),icon:"man-add","border-bottom":!1,title:"我的关注"})])),_:1}),o(le,{class:"cell",title:"更多","title-style":{height:"50px"},border:""},{default:t((()=>[o(ae,{onClick:W,icon:"grid",title:"我的圈子"}),o(ae,{icon:"account",title:"用户协议"}),o(ae,{icon:"eye",title:"联系我们"}),o(ae,{onClick:Y,icon:"man-add","border-bottom":!1,title:"关于我们"}),"admin"==e.vk.getVuex("$user.userInfo.role[0]")?(s(),l(ae,{key:0,onClick:Z,icon:"setting","border-bottom":!1,title:"后台管理"})):m("",!0)])),_:1}),o(C,{class:"btn",onClick:Q},{default:t((()=>[o(te,null,{default:t((()=>[n("退出登陆")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-cc3866fc"]]);export{L as default};
