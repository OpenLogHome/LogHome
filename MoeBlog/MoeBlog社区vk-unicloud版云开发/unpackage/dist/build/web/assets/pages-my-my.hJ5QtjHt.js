import{p as e,d as a,a as l,w as t,o as s,b as o,u,k as n,t as i,h as r,j as c,F as f,f as m,l as d,i as p,m as _,v as g,S as v,x as k}from"./index-C69BgsYY.js";import{_ as y}from"./avatar-item.Cq-RVIM4.js";import{o as h,d as C,c as x,r as b}from"./uni-app.es.4Bntlf4B.js";import{_ as w}from"./u-icon.yGbbo8IR.js";import{_ as j}from"./art-item.BNfpIJqP.js";import{_ as V,a as N}from"./u-cell-group.4KRMgfnJ.js";import{_ as I}from"./u-popup.CZC_HG1o.js";import{_ as T}from"./z-paging.D7ASjMuL.js";import{b as $,u as A,g as z,a as F}from"./utils.qqFolnPJ.js";import{e as S,f as q}from"./api.ClmPzCnk.js";import{_ as G}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-action-sheet.CidrWLxj.js";import"./square.DS5UtVkO.js";import"./like.DUCAGHvM.js";const M=G({__name:"my",setup(G){const{proxy:M}=k();h((()=>{S().then((e=>{E.value.followerNum=e.follower_Num,E.value.followingNum=e.following_Num,E.value.likeNum=e.like_Num}))})),C((()=>{vk.checkToken()?U.value=vk.getVuex("$user.userInfo"):vk.navigateTo("/pages/auth/auth")})),x((()=>{}));const P=e(!1),U=e({}),E=e({followerNum:0,followingNum:0,likeNum:0}),H=e(null),J=e([]);function L(){vk.navigateTo("/pages/my/pubMyArt")}function R(e){if(!("gender"in U.value))return"Genderunknown";switch(e){case 0:return"man";case 1:return"woman"}}function D(e,a){q({pageNo:e,pageSize:a,Audit:0}).then((e=>{H.value.complete(e.result)}))}function K(){M.$framePostman.send({type:"USER_PAGE",id:vk.getVuex("$user.userInfo")._id})}function Q(){P.value=!0,console.log(P.value)}function Y(){vk.userCenter.logout({success:e=>{vk.reLaunch("/pages/auth/auth")}})}function B(){vk.navigateTo("/pages/my/userCenter")}function O(){vk.navigateTo("/pages/my/myArt")}function W(){vk.navigateTo("/pages/square/Mysquare")}function X(e){vk.navigateTo("/pages/my/myFans?type="+e)}function Z(){vk.navigateTo("/pages/my/myAbout")}function ee(){vk.navigateTo("/pages/Admin/Admin")}return e(!0),(e,k)=>{const h=d,C=p,x=b(a("avatar-item"),y),S=_,q=b(a("u-icon"),w),G=b(a("art-item"),j),M=b(a("u-cell-item"),V),ae=b(a("u-cell-group"),N),le=g,te=v,se=b(a("u-popup"),I),oe=b(a("z-paging"),T);return s(),l(oe,{ref_key:"paging",ref:H,modelValue:J.value,"onUpdate:modelValue":k[5]||(k[5]=e=>J.value=e),onQuery:D},{default:t((()=>[o(C,{class:"my"},{default:t((()=>[o(C,{class:"userinfo"},{default:t((()=>[o(C,{class:"userinfo-ctx"},{default:t((()=>[o(C,{class:"userinfo-bj"},{default:t((()=>[o(h,{mode:"aspectFill",src:u($)(e.vk.getVuex("$user.userInfo"))},null,8,["src"])])),_:1}),o(C,{class:"info"},{default:t((()=>[o(C,{class:"info-ctx"},{default:t((()=>[o(C,{class:"info-top",onClick:Q},{default:t((()=>[o(C,{class:"iconS"}),o(C,{class:"iconS"}),o(C,{class:"iconS"})])),_:1}),o(C,{class:"info-center",onClick:B},{default:t((()=>[o(C,{class:"info-center-left"},{default:t((()=>[o(C,{class:"avatar"},{default:t((()=>[o(C,{class:"avatar-img"},{default:t((()=>[o(x,{height:"180",width:"180"})])),_:1}),o(C,{class:"name"},{default:t((()=>[o(C,{class:"nameT"},{default:t((()=>[n("昵称:"),o(S,null,{default:t((()=>[n(i(u(A)(e.vk.getVuex("$user.userInfo"))),1)])),_:1})])),_:1}),o(C,{class:"gender"},{default:t((()=>[n(" 性别:"),o(h,{src:`../../static/img/${R(U.value.gender)}.png`},null,8,["src"])])),_:1}),o(C,{class:"signT"},{default:t((()=>[n("签名:"),o(S,null,{default:t((()=>[n(i(u(z)(e.vk.getVuex("$user.userInfo"))),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),o(C,{class:"info-center-right"},{default:t((()=>[o(q,{name:"arrow-right",size:"35"})])),_:1})])),_:1}),o(C,{class:"info-bottom"},{default:t((()=>[o(C,{class:"info-bottom-item",onClick:k[0]||(k[0]=e=>X("following"))},{default:t((()=>[o(C,null,{default:t((()=>[n(i(E.value.followerNum),1)])),_:1}),o(C,null,{default:t((()=>[n("关注")])),_:1})])),_:1}),o(C,{class:"info-bottom-item",onClick:k[1]||(k[1]=e=>X("fans"))},{default:t((()=>[o(C,null,{default:t((()=>[n(i(E.value.followingNum),1)])),_:1}),o(C,null,{default:t((()=>[n("粉丝")])),_:1})])),_:1}),o(C,{class:"info-bottom-item",onClick:L},{default:t((()=>[o(C,null,{default:t((()=>[n(i(E.value.likeNum),1)])),_:1}),o(C,null,{default:t((()=>[n("喜欢")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),o(C,{class:"name"},{default:t((()=>[o(h,{mode:"aspectFill",src:"/assets/art_icon-CHtRmJYa.png"}),n(" 最新动态 ")])),_:1}),o(C,{class:"art"},{default:t((()=>[o(C,{class:"art-C"},{default:t((()=>[(s(!0),r(f,null,c(J.value,(e=>(s(),l(G,{key:e._id,item:e},null,8,["item"])))),128))])),_:1})])),_:1}),o(C,{class:"leftPopup"},{default:t((()=>[o(se,{modelValue:P.value,"onUpdate:modelValue":k[4]||(k[4]=e=>P.value=e),mode:"left",mask:!0,"z-index":"99"},{default:t((()=>[o(C,{class:"popCtx"},{default:t((()=>[o(C,{class:"popItem",onClick:K},{default:t((()=>[o(C,{class:"img"},{default:t((()=>[o(h,{mode:"aspectFill",src:u(F)(e.vk.getVuex("$user.userInfo"))},null,8,["src"])])),_:1}),o(C,{class:"name"},{default:t((()=>[n(i(u(A)(e.vk.getVuex("$user.userInfo"))),1)])),_:1}),o(C,{class:"icon"},{default:t((()=>[o(q,{name:"arrow-right",size:"35"})])),_:1})])),_:1}),o(te,{class:"scroll","scroll-y":""},{default:t((()=>[o(ae,{class:"cell",title:"我的","title-style":{height:"50px"},border:""},{default:t((()=>[o(M,{onClick:B,icon:"edit-pen",title:"编辑资料"}),o(M,{onClick:O,icon:"order",title:"我的文章"}),o(M,{onClick:k[2]||(k[2]=e=>X("fans")),icon:"eye",title:"我的粉丝"}),o(M,{onClick:k[3]||(k[3]=e=>X("following")),icon:"man-add","border-bottom":!1,title:"我的关注"})])),_:1}),o(ae,{class:"cell",title:"更多","title-style":{height:"50px"},border:""},{default:t((()=>[o(M,{onClick:W,icon:"grid",title:"我的圈子"}),o(M,{icon:"account",title:"用户协议"}),o(M,{icon:"eye",title:"联系我们"}),o(M,{onClick:Z,icon:"man-add","border-bottom":!1,title:"关于我们"}),"admin"==e.vk.getVuex("$user.userInfo.role[0]")?(s(),l(M,{key:0,onClick:ee,icon:"setting","border-bottom":!1,title:"后台管理"})):m("",!0)])),_:1}),o(C,{class:"btn",onClick:Y},{default:t((()=>[o(le,null,{default:t((()=>[n("退出登陆")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-5fd363ec"]]);export{M as default};
