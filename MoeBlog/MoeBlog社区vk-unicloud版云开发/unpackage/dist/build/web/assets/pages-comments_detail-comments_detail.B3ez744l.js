import{_ as e,a as s}from"./comments-send-item.11BE6ggi.js";import{h as t,k as a,a as l,w as o,i as n,o as u,b as m,m as i,p as r,q as c,F as p}from"./index-BcbBmaH1.js";import{o as d,c as v,r as _}from"./uni-app.es.CDgP4_Nc.js";import{p as f}from"./api.D6LgEBnm.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.DNeyR9zY.js";import"./utils.qqFolnPJ.js";import"./u-button.D0fXPeiT.js";import"./u-popup.Blx2ASJN.js";import"./u-icon.C0MRo5fe.js";import"./check.CqE10ALw.js";const g=j({__name:"comments_detail",setup(j){d((e=>{let s=JSON.parse(e.item);w.value=s.art_id,x.value=s.comments_id,g.value.username=s.username,g.value.artid=s.art_id,g.value.parent_id=s.comments_id,console.log(g.value),y()})),v((()=>{I.value+=1,1!=h.value&&y()}));const g=t({artid:"",level:1,parent_id:"",username:""}),h=t(!1),I=t(1),w=t(""),x=t(""),k=t([]),b=t({});function y(){let e={art_id:w.value,comments_id:x.value,pageIndex:I.value};f(e).then((e=>{0==e.result2.rows.length&&(h.value=!0),b.value=e.result1.rows[0],console.log(e.result1.rows[0]);let s=[...k.value,...e.result2.rows];k.value=s,console.log(k.value)}))}function S(){}function C(e){k.value.push(e),console.log(e)}return t(""),(t,d)=>{const v=_(a("comment-list-item"),e),f=n,j=_(a("comments-send-item"),s);return u(),l(f,{class:"comments-detail"},{default:o((()=>["art_id"in b.value?(u(),l(f,{key:0,class:"comments-current"},{default:o((()=>[m(v,{item:b.value},null,8,["item"])])),_:1})):i("",!0),m(f,{class:"comments-list"},{default:o((()=>[(u(!0),r(p,null,c(k.value,((e,s)=>(u(),l(f,{class:"comments-list-I",key:e._id},{default:o((()=>[m(v,{item:e},null,8,["item"])])),_:2},1024)))),128))])),_:1}),m(f,{class:"comments-send"},{default:o((()=>[m(j,{artInfo:g.value,onPopColse:S,onCommentSc:C},null,8,["artInfo"])])),_:1})])),_:1})}}},[["__scopeId","data-v-df9bc7f7"]]);export{g as default};
