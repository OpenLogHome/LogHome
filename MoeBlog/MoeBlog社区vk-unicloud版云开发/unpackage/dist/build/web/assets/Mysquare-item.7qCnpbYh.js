import{h as e,B as a,k as s,o as t,p as l,b as i,w as u,a as r,l as d,m as c,d as o,t as n,L as m,F as f,e as _,i as p}from"./index-BcbBmaH1.js";import{_ as h}from"./u-action-sheet.ukLITz2J.js";import{r as v}from"./uni-app.es.CDgP4_Nc.js";import{M as b}from"./api.D6LgEBnm.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const A=x({__name:"Mysquare-item",props:["item"],emits:["refresh"],setup(x,{emit:A}){const j=x,k=e(!0),y=A,C=e([{text:"通过审核",disabled:0==j.item.Audit},{text:"退回审核",color:"#F44336",disabled:2==j.item.Audit}]),g=e(!1);function F(){switch(j.item.Audit){case 0:return"已通过";case 1:return"审核中";case 2:return"未通过"}}function M(){k.value=!0}function U(){y("refresh",!0)}function q(e){if(1==e){let e={_id:j.item._id,Audit:2};b(e).then((e=>{U()}))}if(0==e){let e={_id:j.item._id,Audit:0};b(e).then((e=>{U()}))}}return g.value=a.getCurrentUserInfo().role.indexOf("admin")>-1,(e,a)=>{const b=_,x=p,A=v(s("u-action-sheet"),h);return t(),l(f,null,[i(x,{class:"Mysquare-item"},{default:u((()=>[i(x,{class:"Mysquare-C"},{default:u((()=>[i(x,{class:"bg"},{default:u((()=>[i(b,{mode:"aspectFill",src:j.item.backgroundUrl},null,8,["src"])])),_:1}),g.value?(t(),r(x,{key:0,class:"art-head-L"},{default:u((()=>[i(x,{class:"art-head-L-c",onClick:d(M,["stop"])},{default:u((()=>[i(x,{class:"iconS"}),i(x,{class:"iconS"}),i(x,{class:"iconS"})])),_:1})])),_:1})):c("",!0),i(x,{class:"info"},{default:u((()=>[i(x,{class:"info-C"},{default:u((()=>[i(x,{class:"avatar"},{default:u((()=>[i(b,{mode:"aspectFill",src:j.item.avatarUrl},null,8,["src"])])),_:1}),i(x,{class:"name"},{default:u((()=>[i(x,{class:"title"},{default:u((()=>[o(n(j.item.name),1)])),_:1}),i(x,{class:"desc"},{default:u((()=>[o(n(j.item.description),1)])),_:1})])),_:1}),i(x,{class:"status"},{default:u((()=>[i(x,{class:m(0==j.item.Audit?"s":1==j.item.Audit?"p":"e")},{default:u((()=>[o(n(F()),1)])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),i(A,{onClick:q,"safe-area-inset-bottom":!0,"z-index":"9999","border-radius":"25",list:C.value,modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value=e)},null,8,["list","modelValue"])],64)}}},[["__scopeId","data-v-fecf6dad"]]);export{A as _};
