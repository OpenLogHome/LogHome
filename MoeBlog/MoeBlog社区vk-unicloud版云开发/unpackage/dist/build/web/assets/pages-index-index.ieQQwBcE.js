import{_ as a}from"./u-icon.C0MRo5fe.js";import{g as e,c as l,o as t,a as u,w as s,b as n,n as r,u as o,d as i,r as c,i as d,e as m,f as p,h as v,j as f,k as g,l as _,t as h,m as b,p as k,q as y,F as q}from"./index-BcbBmaH1.js";import{o as x,a as I,b as j,c as C,r as B}from"./uni-app.es.CDgP4_Nc.js";import{_ as z}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as F}from"./u-tabs.6fETAvsl.js";import{_ as R}from"./art-item.BtrXExoi.js";import{_ as V}from"./z-paging.DJjrhKoD.js";import{a as w,b as E,c as U}from"./api.D6LgEBnm.js";import"./u-action-sheet.ukLITz2J.js";import"./u-popup.Blx2ASJN.js";import"./square.DS5UtVkO.js";import"./like.DUCAGHvM.js";import"./utils.qqFolnPJ.js";const L=""+new URL("logos-DbibzYCe.png",import.meta.url).href,M=e(),T=()=>M.statusBarHeight||15,D=()=>{if(uni.getMenuButtonBoundingClientRect){let{height:a,top:e}=uni.getMenuButtonBoundingClientRect();return 2*(e-T())+a}return 40},H=()=>{if(uni.getMenuButtonBoundingClientRect){let{width:a}=uni.getMenuButtonBoundingClientRect();return 2*a}},S=()=>D()+T(),A=z({__name:"custom-tabbar-item",setup:a=>(x((()=>{})),l((()=>{})),(a,e)=>{const l=d,v=m,f=p;return t(),u(l,{class:"custom-tabbar"},{default:s((()=>[n(l,{style:r({height:o(T)()+"px"})},null,8,["style"]),n(l,{class:"custom-tabbar-ctx",style:r({height:o(D)()+"px"})},{default:s((()=>[n(l,{class:"tabbar-ctx-item"},{default:s((()=>[n(v,{src:L}),n(f,null,{default:s((()=>[i("萌Blog")])),_:1})])),_:1}),n(l,{class:"tabbar-ctx-item item1",style:r({width:o(H)()+"px"})},{default:s((()=>[c(a.$slots,"custom",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["style"])])),_:3})})},[["__scopeId","data-v-802a4222"]]),G=z({__name:"index",setup(e){const l=v({taxonmoy:""}),c=v([{name:"首页",value:""},{name:"推荐",value:"sticky"}]),x=v(null),z=v(!1),L=v(0),M=v([]),T=v([]);function D(){vk.navigateTo("/pages/search/search")}function H(a){l.value.taxonmoy=c.value[a].value,x.value.reload()}function G(a,e){l.value.pageNo=a,l.value.pageSize=e,U(l.value).then((a=>{x.value.complete(a.result)}))}function N(){vk.navigateTo("/pages/square/allSquare")}function Q(a){if(""===a)return 0;vk.navigateTo("/pages/square/squareInfo?id="+a)}return I((a=>{})),j((a=>{})),f((()=>{E().then((a=>{T.value=a.result,T.value=T.value.map((a=>({name:a.name,background:a.backgroundUrl,avatar:a.avatarUrl,id:a._id,count:a.count})));for(let e=0;e<4-a.result.length;e++){let a={name:"暂无推荐",background:"/static/img/default-bg.jpg",avatar:"/static/img/user-default.png",id:"",count:0};T.value.push(a)}})),w().then((a=>{a.result.forEach((a=>{let e={name:a.name,value:a.taxonomy_id};c.value.push(e)})),z.value=!0,console.log(c.value)}))})),C((()=>{})),(e,l)=>{const v=B(g("u-icon"),a),f=p,I=d,j=B(g("custom-tabbar-item"),A),C=m,w=B(g("u-tabs"),F),E=B(g("art-item"),R),U=B(g("z-paging"),V);return t(),u(U,{ref_key:"paging",ref:x,modelValue:M.value,"onUpdate:modelValue":l[5]||(l[5]=a=>M.value=a),onQuery:G},{default:s((()=>[n(I,{class:"index"},{default:s((()=>[n(j,null,{custom:s((()=>[n(I,{class:"search",onClick:D},{default:s((()=>[n(v,{name:"search",color:"#E0E0E0",size:"28"}),n(f,null,{default:s((()=>[i("搜索")])),_:1})])),_:1})])),_:1}),n(I,{style:r({height:o(S)()+"px"})},null,8,["style"]),n(I,{class:"name",style:{"margin-top":"30rpx"}},{default:s((()=>[i("推荐圈子")])),_:1}),n(I,{class:"square-grid"},{default:s((()=>[T.value.length>0?(t(),u(I,{key:0,class:"square-grid-C"},{default:s((()=>[n(I,{class:"square-grid-I"},{default:s((()=>[n(I,{class:"square-grid-I-R",onClick:l[0]||(l[0]=_((a=>Q(T.value[0].id)),["stop"]))},{default:s((()=>[n(C,{mode:"aspectFill",src:T.value[0].background},null,8,["src"]),n(I,{class:"square-grid-I-R-b"},{default:s((()=>[n(C,{src:T.value[0].avatar,mode:"aspectFill"},null,8,["src"]),n(I,null,{default:s((()=>[i(h(T.value[0].name),1)])),_:1}),n(f,null,{default:s((()=>[i(h(T.value[0].count),1)])),_:1})])),_:1})])),_:1}),n(I,{class:"square-grid-I-L",onClick:l[2]||(l[2]=_((a=>Q(T.value[1].id)),["stop"]))},{default:s((()=>[n(I,{class:"square-grid-I-L-I"},{default:s((()=>[n(C,{mode:"aspectFill",src:T.value[1].avatar},null,8,["src"]),n(I,null,{default:s((()=>[i(h(T.value[1].name),1)])),_:1}),n(f,null,{default:s((()=>[i(h(T.value[1].count),1)])),_:1})])),_:1}),n(I,{class:"square-grid-I-L-I",onClick:l[1]||(l[1]=_((a=>Q(T.value[2].id)),["stop"]))},{default:s((()=>[n(C,{mode:"aspectFill",src:T.value[2].avatar},null,8,["src"]),n(I,null,{default:s((()=>[i(h(T.value[2].name),1)])),_:1}),n(f,null,{default:s((()=>[i(h(T.value[2].count),1)])),_:1})])),_:1})])),_:1})])),_:1}),n(I,{class:"square-grid-I"},{default:s((()=>[n(I,{class:"square-grid-I-I",onClick:l[3]||(l[3]=_((a=>Q(T.value[3].id)),["stop"]))},{default:s((()=>[n(C,{mode:"aspectFill",src:T.value[3].avatar},null,8,["src"]),n(I,null,{default:s((()=>[i(h(T.value[3].name),1)])),_:1}),n(f,null,{default:s((()=>[i(h(T.value[3].count),1)])),_:1})])),_:1}),n(I,{class:"square-grid-I-I",onClick:N},{default:s((()=>[n(I,null,{default:s((()=>[i("全部圈子")])),_:1}),n(v,{name:"arrow-right"})])),_:1})])),_:1})])),_:1})):b("",!0)])),_:1}),z.value?(t(),u(w,{key:0,"inactive-color":"#000","active-color":"#000","font-size":"25",list:c.value,"is-scroll":!0,modelValue:L.value,"onUpdate:modelValue":l[4]||(l[4]=a=>L.value=a),onChange:H},null,8,["list","modelValue"])):b("",!0),n(I,{class:"art"},{default:s((()=>[(t(!0),k(q,null,y(M.value,(a=>(t(),u(E,{key:a._id,item:a},null,8,["item"])))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-177b8502"]]);export{G as default};
