import{_ as t}from"./u-icon.yGbbo8IR.js";import{g as e,c as a,o,a as i,w as l,b as n,n as s,u as r,r as u,i as c,d as f,e as d,f as h,h as p,F as m,j as g,k as _,t as v,l as b,m as y,p as k,q as x,s as C}from"./index-C69BgsYY.js";import{o as B,r as z,a as S,b as I,c as w}from"./uni-app.es.4Bntlf4B.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as q}from"./u-tabs.BhYwbLdv.js";import{_ as T}from"./art-item.BNfpIJqP.js";import{_ as P}from"./z-paging.D7ASjMuL.js";import{_ as F}from"./uni-icons.DbPdresR.js";import{a as D,b as E,c as A}from"./api.ClmPzCnk.js";import"./u-action-sheet.CidrWLxj.js";import"./u-popup.CZC_HG1o.js";import"./square.DS5UtVkO.js";import"./like.DUCAGHvM.js";import"./utils.qqFolnPJ.js";const M=e(),R=()=>M.statusBarHeight||15,V=()=>{if(uni.getMenuButtonBoundingClientRect){let{height:t,top:e}=uni.getMenuButtonBoundingClientRect();return 2*(e-R())+t}return 40},W=()=>{if(uni.getMenuButtonBoundingClientRect){let{width:t}=uni.getMenuButtonBoundingClientRect();return 2*t}},L=()=>V()+R(),U=j({__name:"custom-tabbar-item",setup:t=>(B((()=>{})),a((()=>{})),(t,e)=>{const a=c;return o(),i(a,{class:"custom-tabbar"},{default:l((()=>[n(a,{style:s({height:r(R)()+"rpx"})},null,8,["style"]),n(a,{class:"custom-tabbar-ctx",style:s({height:r(V)()+"px"})},{default:l((()=>[n(a,{class:"tabbar-ctx-item item1",style:s({width:r(W)()+"px"})},{default:l((()=>[u(t.$slots,"custom",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["style"])])),_:3})})},[["__scopeId","data-v-f70a7922"]]);const H=j({name:"UniFab",emits:["fabClick","trigger"],props:{pattern:{type:Object,default:()=>({})},horizontal:{type:String,default:"left"},vertical:{type:String,default:"bottom"},direction:{type:String,default:"horizontal"},content:{type:Array,default:()=>[]},show:{type:Boolean,default:!1},popMenu:{type:Boolean,default:!0}},data:()=>({fabShow:!1,isShow:!1,isAndroidNvue:!1,styles:{color:"#3c3e49",selectedColor:"#007AFF",backgroundColor:"#fff",buttonColor:"#007AFF",iconColor:"#fff",icon:"plusempty"}}),computed:{contentWidth(t){return 45*(this.content.length+1)+15+"px"},contentWidthMin:()=>"45px",boxWidth(){return this.getPosition(3,"horizontal")},boxHeight(){return this.getPosition(3,"vertical")},leftBottom(){return this.getPosition(0,"left","bottom")},rightBottom(){return this.getPosition(0,"right","bottom")},leftTop(){return this.getPosition(0,"left","top")},rightTop(){return this.getPosition(0,"right","top")},flexDirectionStart(){return this.getPosition(1,"vertical","top")},flexDirectionEnd(){return this.getPosition(1,"vertical","bottom")},horizontalLeft(){return this.getPosition(2,"horizontal","left")},horizontalRight(){return this.getPosition(2,"horizontal","right")},nvueBottom:()=>45},watch:{pattern:{handler(t,e){this.styles=Object.assign({},this.styles,t)},deep:!0}},created(){this.isShow=this.show,0===this.top&&(this.fabShow=!0),this.styles=Object.assign({},this.styles,this.pattern)},methods:{_onClick(){this.$emit("fabClick"),this.popMenu&&(this.isShow=!this.isShow)},open(){this.isShow=!0},close(){this.isShow=!1},_onItemClick(t,e){this.isShow&&this.$emit("trigger",{index:t,item:e})},getPosition(t,e,a){return 0===t?this.horizontal===e&&this.vertical===a:1===t?this.direction===e&&this.vertical===a:2===t?this.direction===e&&this.horizontal===a:this.isShow&&this.direction===e?this.contentWidth:this.contentWidthMin}}},[["render",function(t,e,a,r,u,k){const x=c,C=b,B=y,S=z(f("uni-icons"),F);return o(),i(x,{class:"uni-cursor-point"},{default:l((()=>[a.popMenu&&(k.leftBottom||k.rightBottom||k.leftTop||k.rightTop)&&a.content.length>0?(o(),i(x,{key:0,class:d([{"uni-fab--leftBottom":k.leftBottom,"uni-fab--rightBottom":k.rightBottom,"uni-fab--leftTop":k.leftTop,"uni-fab--rightTop":k.rightTop},"uni-fab"]),style:s(k.nvueBottom)},{default:l((()=>[n(x,{class:d([{"uni-fab__content--left":"left"===a.horizontal,"uni-fab__content--right":"right"===a.horizontal,"uni-fab__content--flexDirection":"vertical"===a.direction,"uni-fab__content--flexDirectionStart":k.flexDirectionStart,"uni-fab__content--flexDirectionEnd":k.flexDirectionEnd,"uni-fab__content--other-platform":!u.isAndroidNvue},"uni-fab__content"]),style:s({width:k.boxWidth,height:k.boxHeight,backgroundColor:u.styles.backgroundColor}),elevation:"5"},{default:l((()=>[k.flexDirectionStart||k.horizontalLeft?(o(),i(x,{key:0,class:"uni-fab__item uni-fab__item--first"})):h("",!0),(o(!0),p(m,null,g(a.content,((t,e)=>(o(),i(x,{key:e,class:d([{"uni-fab__item--active":u.isShow},"uni-fab__item"]),onClick:a=>k._onItemClick(e,t)},{default:l((()=>[n(C,{src:t.active?t.selectedIconPath:t.iconPath,class:"uni-fab__item-image",mode:"aspectFit"},null,8,["src"]),n(B,{class:"uni-fab__item-text",style:s({color:t.active?u.styles.selectedColor:u.styles.color})},{default:l((()=>[_(v(t.text),1)])),_:2},1032,["style"])])),_:2},1032,["class","onClick"])))),128)),k.flexDirectionEnd||k.horizontalRight?(o(),i(x,{key:1,class:"uni-fab__item uni-fab__item--first"})):h("",!0)])),_:1},8,["class","style"])])),_:1},8,["class","style"])):h("",!0),n(x,{class:d([{"uni-fab__circle--leftBottom":k.leftBottom,"uni-fab__circle--rightBottom":k.rightBottom,"uni-fab__circle--leftTop":k.leftTop,"uni-fab__circle--rightTop":k.rightTop,"uni-fab__content--other-platform":!u.isAndroidNvue},"uni-fab__circle uni-fab__plus"]),style:s({"background-color":u.styles.buttonColor,bottom:k.nvueBottom}),onClick:k._onClick},{default:l((()=>[n(S,{class:d(["fab-circle-icon",{"uni-fab__plus--active":u.isShow&&a.content.length>0}]),type:u.styles.icon,color:u.styles.iconColor,size:"32"},null,8,["type","color","class"])])),_:1},8,["class","style","onClick"])])),_:1})}],["__scopeId","data-v-3bc1e510"]]),N=j({__name:"index",setup(e){const a=k({taxonmoy:""}),u=k([{name:"首页",value:""},{name:"推荐",value:"sticky"}]),d=k(null),B=k(!1),j=k(0),F=k([]),M=k([]),R=k({horizontal:"right",vertical:"bottom",direction:"vertical",pattern:{color:"#7A7E83",backgroundColor:"#fff",buttonColor:"#947358",iconColor:"#fff"},content:[{iconPath:"/static/fab/新建帖子.png",text:"帖子",active:!1},{iconPath:"/static/fab/icon-圈子.png",text:"圈子",active:!1}]});function V(t){"帖子"==R.value.content[t.index].text?vk.navigateTo("/pages/art/addArt"):"圈子"==R.value.content[t.index].text&&vk.navigateTo("/pages/square/addSquare")}function W(){vk.navigateTo("/pages/search/search")}function N(t){a.value.taxonmoy=u.value[t].value,d.value.reload()}function O(t,e){a.value.pageNo=t,a.value.pageSize=e,A(a.value).then((t=>{d.value.complete(t.result)}))}function $(){vk.navigateTo("/pages/square/allSquare")}function G(t){if(""===t)return 0;vk.navigateTo("/pages/square/squareInfo?id="+t)}return S((t=>{})),I((t=>{})),x((()=>{E().then((t=>{M.value=t.result,M.value=M.value.map((t=>({name:t.name,background:t.backgroundUrl,avatar:t.avatarUrl,id:t._id,count:t.count})));for(let e=0;e<4-t.result.length;e++){let t={name:"暂无推荐",background:"/static/img/default-bg.jpg",avatar:"/static/img/user-default.png",id:"",count:0};M.value.push(t)}})),D().then((t=>{t.result.forEach((t=>{let e={name:t.name,value:t.taxonomy_id};u.value.push(e)})),B.value=!0,console.log(u.value)}))})),w((()=>{})),(e,a)=>{const k=z(f("u-icon"),t),x=y,S=c,I=z(f("custom-tabbar-item"),U),w=b,D=z(f("u-tabs"),q),E=z(f("art-item"),T),A=z(f("z-paging"),P),J=z(f("uni-fab"),H);return o(),p(m,null,[n(A,{ref_key:"paging",ref:d,modelValue:F.value,"onUpdate:modelValue":a[5]||(a[5]=t=>F.value=t),onQuery:O},{default:l((()=>[n(S,{class:"index"},{default:l((()=>[n(I,null,{custom:l((()=>[n(S,{class:"search",onClick:W},{default:l((()=>[n(k,{name:"search",color:"#E0E0E0",size:"28"}),n(x,{style:{"margin-left":"15rpx"}},{default:l((()=>[_("搜索帖子")])),_:1})])),_:1})])),_:1}),n(S,{style:s({height:r(L)()+"px"})},null,8,["style"]),n(S,{class:"name",style:{"margin-top":"30rpx"}},{default:l((()=>[_("推荐圈子")])),_:1}),n(S,{class:"square-grid"},{default:l((()=>[M.value.length>0?(o(),i(S,{key:0,class:"square-grid-C"},{default:l((()=>[n(S,{class:"square-grid-I"},{default:l((()=>[n(S,{class:"square-grid-I-R",onClick:a[0]||(a[0]=C((t=>G(M.value[0].id)),["stop"]))},{default:l((()=>[n(w,{mode:"aspectFill",src:M.value[0].background},null,8,["src"]),n(S,{class:"square-grid-I-R-b"},{default:l((()=>[n(w,{src:M.value[0].avatar,mode:"aspectFill"},null,8,["src"]),n(S,null,{default:l((()=>[_(v(M.value[0].name),1)])),_:1}),n(x,null,{default:l((()=>[_(v(M.value[0].count),1)])),_:1})])),_:1})])),_:1}),n(S,{class:"square-grid-I-L",onClick:a[2]||(a[2]=C((t=>G(M.value[1].id)),["stop"]))},{default:l((()=>[n(S,{class:"square-grid-I-L-I"},{default:l((()=>[n(w,{mode:"aspectFill",src:M.value[1].avatar},null,8,["src"]),n(S,null,{default:l((()=>[_(v(M.value[1].name),1)])),_:1}),n(x,null,{default:l((()=>[_(v(M.value[1].count),1)])),_:1})])),_:1}),n(S,{class:"square-grid-I-L-I",onClick:a[1]||(a[1]=C((t=>G(M.value[2].id)),["stop"]))},{default:l((()=>[n(w,{mode:"aspectFill",src:M.value[2].avatar},null,8,["src"]),n(S,null,{default:l((()=>[_(v(M.value[2].name),1)])),_:1}),n(x,null,{default:l((()=>[_(v(M.value[2].count),1)])),_:1})])),_:1})])),_:1})])),_:1}),n(S,{class:"square-grid-I"},{default:l((()=>[n(S,{class:"square-grid-I-I",onClick:a[3]||(a[3]=C((t=>G(M.value[3].id)),["stop"]))},{default:l((()=>[n(w,{mode:"aspectFill",src:M.value[3].avatar},null,8,["src"]),n(S,null,{default:l((()=>[_(v(M.value[3].name),1)])),_:1}),n(x,null,{default:l((()=>[_(v(M.value[3].count),1)])),_:1})])),_:1}),n(S,{class:"square-grid-I-I",onClick:$},{default:l((()=>[n(S,null,{default:l((()=>[_("全部圈子")])),_:1}),n(k,{name:"arrow-right"})])),_:1})])),_:1})])),_:1})):h("",!0)])),_:1}),B.value?(o(),i(D,{key:0,"inactive-color":"#000","active-color":"#000","font-size":"25",list:u.value,"is-scroll":!0,modelValue:j.value,"onUpdate:modelValue":a[4]||(a[4]=t=>j.value=t),onChange:N},null,8,["list","modelValue"])):h("",!0),n(S,{class:"art"},{default:l((()=>[(o(!0),p(m,null,g(F.value,(t=>(o(),i(E,{key:t._id,item:t},null,8,["item"])))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"]),n(J,{ref:"fab",pattern:R.value.pattern,content:R.value.content,horizontal:R.value.horizontal,vertical:R.value.vertical,direction:R.value.direction,onTrigger:V},null,8,["pattern","content","horizontal","vertical","direction"])],64)}}},[["__scopeId","data-v-ee9ea4a4"]]);export{N as default};
