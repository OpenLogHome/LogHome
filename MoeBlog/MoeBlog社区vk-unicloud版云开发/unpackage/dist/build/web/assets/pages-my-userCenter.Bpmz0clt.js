import{h as a,k as e,a as s,w as l,i as t,o as u,b as n,d as A,L as o,C as r,e as i,I as c}from"./index-BcbBmaH1.js";import{_ as f}from"./avatar-item.CHKnCc0x.js";import{r as d}from"./uni-app.es.CDgP4_Nc.js";import{_ as v}from"./u-button.D0fXPeiT.js";import{u as g,a as p,c as m,b as I,g as k}from"./utils.qqFolnPJ.js";import{y as x}from"./api.D6LgEBnm.js";import{g as C}from"./check.CqE10ALw.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";const h=S({__name:"userCenter",setup(S){const h=a({nickname:g(vk.getVuex("$user.userInfo")),avatar:p(vk.getVuex("$user.userInfo")),gender:m(vk.getVuex("$user.userInfo")),background:I(vk.getVuex("$user.userInfo")),gxqm:k(vk.getVuex("$user.userInfo"))}),w=a({}),Y=a({});function E(){vk.navigateTo("/pages/my/AvatarFrame")}function B(a){h.value.gender=a}function R(){0==h.value.nickname.length?vk.toast("用户名不能为空"):"path"in w.value||"path"in Y.value?(console.log("这是保存后的信息",h.value),async function(){"path"in w.value&&await b(w.value,"bg");"path"in Y.value&&await b(Y.value,"avatar")}().then((a=>{U()}))):U()}function j(){console.log(123456),r({count:1,sizeType:["original"],success:a=>{Y.value=a.tempFiles[0],h.value.avatar=a.tempFiles[0].path}})}function Q(){r({count:1,sizeType:["original"],success:a=>{w.value=a.tempFiles[0],h.value.background=a.tempFiles[0].path}})}function U(){var a,e;h.value.nickname,h.value.gxqm,null==(e=null==(a=vk.getVuex("$user.userInfo"))?void 0:a.wx_openid)||e["mp-weixin"],C().then((a=>{a.isT?x(h.value).then((a=>{let e=vk.getVuex("$user.userInfo");vk.setVuex("$user.userInfo",{...e,...h.value}),vk.toast("用户信息修改成功")})):vk.toast(a.msg)}))}async function b(a,e){console.log(a),await vk.uploadFile({title:"图片上传中...",file:a,success:a=>{let s=a.url;"bg"==e&&(h.value.background=s),"avatar"==e&&(h.value.avatar=s)},fail:a=>{}})}return(a,r)=>{const g=i,p=t,m=d(e("avatar-item"),f),I=d(e("u-button"),v),k=c;return u(),s(p,{class:"userCenter"},{default:l((()=>[n(p,{class:"userCenter-C"},{default:l((()=>[n(p,{class:"bj"},{default:l((()=>[n(g,{mode:"aspectFill",src:h.value.background},null,8,["src"])])),_:1}),n(p,{class:"userinfo"},{default:l((()=>[n(p,{class:"userinfo-C"},{default:l((()=>[n(p,{class:"avatar"},{default:l((()=>[n(p,{onClick:j},{default:l((()=>[n(m,{height:"220",width:"220",avatar:h.value.avatar},null,8,["avatar"])])),_:1}),n(p,{onClick:j},{default:l((()=>[A("点击更换头像")])),_:1})])),_:1}),n(p,{class:"info"},{default:l((()=>[n(p,{class:"info-I"},{default:l((()=>[n(p,{class:"info-I-I"},{default:l((()=>[n(p,{class:"text"},{default:l((()=>[A(" 头像框 ")])),_:1}),n(p,{class:"input"},{default:l((()=>[n(I,{onClick:E,size:"mini",type:"primary"},{default:l((()=>[A("去切换头像框")])),_:1})])),_:1})])),_:1}),n(p,{class:"hr"})])),_:1}),n(p,{class:"info-I"},{default:l((()=>[n(p,{class:"info-I-I"},{default:l((()=>[n(p,{class:"text"},{default:l((()=>[A(" 昵称 ")])),_:1}),n(p,{class:"input"},{default:l((()=>[n(k,{modelValue:h.value.nickname,"onUpdate:modelValue":r[0]||(r[0]=a=>h.value.nickname=a)},null,8,["modelValue"])])),_:1})])),_:1}),n(p,{class:"hr"})])),_:1}),n(p,{class:"info-I"},{default:l((()=>[n(p,{class:"info-I-I"},{default:l((()=>[n(p,{class:"text"},{default:l((()=>[A(" 签名 ")])),_:1}),n(p,{class:"input"},{default:l((()=>[n(k,{modelValue:h.value.gxqm,"onUpdate:modelValue":r[1]||(r[1]=a=>h.value.gxqm=a)},null,8,["modelValue"])])),_:1})])),_:1}),n(p,{class:"hr"})])),_:1}),n(p,{class:"info-I"},{default:l((()=>[n(p,{class:"info-I-I"},{default:l((()=>[n(p,{class:"text"},{default:l((()=>[A(" 背景 ")])),_:1}),n(p,{class:"input"},{default:l((()=>[n(I,{onClick:Q,size:"mini",type:"primary"},{default:l((()=>[A("点击更换背景")])),_:1})])),_:1})])),_:1}),n(p,{class:"hr"})])),_:1}),n(p,{class:"info-I"},{default:l((()=>[n(p,{class:"info-I-I"},{default:l((()=>[n(p,{class:"text"},{default:l((()=>[A(" 性别 ")])),_:1}),n(p,{class:"input gender"},{default:l((()=>[n(p,{class:o(["gender-I",0==h.value.gender?"man":""]),onClick:r[2]||(r[2]=a=>B(0))},{default:l((()=>[n(g,{mode:"aspectFill",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAl9JREFUWEfFllFu4kAMhm3ytFJ6h/YSC28tR6hKnyknoZyk7PNS9Qhl32Av0ewZiLQvELd/Og6T6SQzAVQiISFwxp/t3/YwnfnhM/unkwD0F/kbEV1GBpMx02x1l85hfzTA4OX/pex2AOjyzNejdHISABwCCNpuGzMgzGMierAITwvQFvrgOX8QoSfH5nsAHOfLjyxkJhOHAWiqix5d94j/USHZ6v4CB395XOfrUTrsL3JkAqWIBzAimzo1dB1mLDJRGJ9zvNAZ4OfzZsrCj443pBEfPDfuf8Iyt95ZInK1iQYwUSNd6iDDwX/vLma2w7IkRFQU27EHtOa8Uwb6i/xVnQvLo+vYW/PfmxthBjSgvjiPBrDTziJD1BWRIkoc0gajIkXfC0vm2gZLMPiMAtGTRu72sUK19T6CKLuklyxXtz9UL2ERWqkvU2gDQXg+HTSB9Be54J31KL1SG3PelEVm2jG1XWBeImaaYFlY5fDWtC0L1VmmjE22FYC9VDhJrpA6nQEs8qtp4LRkoBRySMR7AGtmr0fp0VsyNnuVI59Cu+xX19YSb00Hrl0FEEscC2UBVHPf966vBK3EsQCxGd0D7GdAxkkytPs31qltp9c07ajYLijnf0i5ISB7fmhHBQFgYOngqCy4A60NuNZupu/Rv40LJRR9bZeYeRINAENn/HaagDXnZpqGgL0Dx7mIBLvCc3+IBm+cePYWhJDKSIrd5wWlkAz3QnxlYfxW3Yy6Crh15OqNBy1p9XVTVg8SbvTM11VqBAqRYs8vcfHoFfSn67LSKKIBQmI69P+zA7wDdeS5MI7SRdkAAAAASUVORK5CYII="})])),_:1},8,["class"]),n(p,{class:o(["gender-I",1==h.value.gender?"woman":""]),onClick:r[3]||(r[3]=a=>B(1))},{default:l((()=>[n(g,{mode:"aspectFill",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAnJJREFUWEfFVm1yozAMxXausHT2Hz3JJidZAr1Hm3uUlD3Jpicp/zqlV4jRroztCgd/ZToTZviFsZ6enp7Eihs/7Mbxi6sBvNd1xTn/jQkwxrZFUeA7qIQADuXx2Kcklw0AAwshXnRAX4y+7Lo9nt1sNtWP5+eT72AWgLFp6oIxDG6eAQBUppzzV5X8NFVymlRAIcQbsoJn7o7HwxqIZABj2/4lWQ+MsX0oM5cpAHhaA5EE4PPhYQsACKDwXbSWndEJY+xJa2PvaiMJwNi2SGX1n4FT2XW7FHHRM2PbYtlqLIeUcvez72exooBjlxHqh7Lr7mPnfUwIIZBBTEIJNAcA6FbbhWoeA0YEvEgkyACtfdl1UbZCILQosZToGzaZ4KUE9VW1dwHZcgJYMYYBfIlnUbcY3b7vBgDtpBgA1fs5rRcCR7rBJhQE8NE0j7qHv6sEczunloCIMLsF9b+PBcAfYz5j26qOklLeGy8IMkCVS3+KacCxYUU3nSO0o6KtpYVTuQ7mA0HKNjudbjliaHlGhJdoOl9iTkgZo95PQblMLhjQB2t3fCKAaZp+4cg9n88D9fKLXm+amnE+GNekZkbFt2rF1PddEKFvSZPQM8gWDGgKzdCwi4SzC5h46juyYrI1GxCyZUfwfNprZBcidEHoaDjF1EUAgMvIPN/jT3RxWe0CB4QJY7MgiwbOeAPOMqPXsJNvDaO4vW3o0u6zYwSDFwrOt6mbcBRAqOYpWcUr83XiggEneC+lPJBtJrjh5gSOteFCua4wYxtxDhDLgLPzX7SNA+Jb9gNl1QatcazQ7FcgrhSbj5XoMMqh85qzNwfwDxLmsTBlt3XxAAAAAElFTkSuQmCC"})])),_:1},8,["class"]),n(p,{class:o(["gender-I",2==h.value.gender?"wz":""]),onClick:r[4]||(r[4]=a=>B(2))},{default:l((()=>[n(g,{mode:"aspectFill",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAwNJREFUWEe1l2t2okAQhavQrGPIMnRiwJWoK1FXoq4ElYwsI8w6ol0zt6EJMP3AmOGX59h03a7H1xemO54sK+JoTAu8wiSpEKX6daZSSI6Rik6vr5P9HVsSD118yos1kWxMMJaoVEQnulJJY4pHQjGxLIQpJuF9Mptsh+wdFIBTj8ayw8ZKeDWfTY6+jTvrP3g+n09K33qvgCrl8s5Ex9fZdD7kRGaNzhjLMiTaK+CcXzJseG/wvojkZfrsEu8UcD4XS2HZqSs/h9Lo2tyUg4QPruZ0C8gvmWIp05efq3tS319rSuHKglPAKb/II6c3QkwfKeK5rYGtAnT6I1n7audMe16k/UDopRvx9r8KyPIijVh2ENbv/OPbrx24YWODNQOoG0g3pPvbcw8AVWSUZRtGyIAQH79NQINkBMLTI5+hprDs5SPaRk+SseKtbRKsGWjSKbxnod9VDPrxeTqK/14AG/znGq+OSKHY1dB2AVkR85Nas/ASFNR1ZSlRR/xupxKBfJzQ9SdO7x5DkwXbi03d69sQIm9XXtmEnN4u78pzJzg5EJpfnEwkOjCrhc6U8MpWDvAkmU2dcYJ3QYiGOCELlbaJAU9UpBIfTf23YT3brvohADyAa1x1+gNXeNAPYIZ9WXA14VCWBAWYXsDY9UFSAYbSfo11A5NkLv63MR4UgMUuEQiE/w3jPz2jbIYEr+yk59E1rp/bjY7GmqHpgFbjCUcjSitQycaMJHxiRJSYNS5WWAUYeJBQDJwCJMCtutIBeuCMtSuGATVP/T8CGRRDTGVSK3Li/b6QjoDGwRBR+/psgweCYL9vTI3Z1I4YtIxUYujZeT8vUs0L4rQPpY4AjI3PUlfNRQlOX98POjBKYnANOLmcc2NUW2RsBISs0yO2rP2uBlfrZmwEhOb92wT0vEYjwFw+vovjURG2+6XbA+ZjYsAXzVfE2JzRP2NoRtDlYL4S2JDR9oXldUQd4CAyPkSHPPXHqh5LMMRiVM024duQKNEmswFOCz4uMTUjhnyy/wHzp08/9dgEvgAAAABJRU5ErkJggg=="})])),_:1},8,["class"])])),_:1})])),_:1}),n(p,{class:"hr"})])),_:1})])),_:1})])),_:1})])),_:1}),n(p,{class:"btn"},{default:l((()=>[n(I,{onClick:R,type:"primary"},{default:l((()=>[A("保存")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-e08431a8"]]);export{h as default};
